import{c as y,r as a,j as e,G as j,U as Z,a6 as le,s as re,Z as M,T as z,h as p,Y as De,a7 as Le,a8 as ke,d as L,S as Ue,p as be,v as F,a9 as te,aa as Oe,y as Pe,L as H,E as Fe,ab as $,ac as Me,a2 as q,a4 as Ge,l as J,a as Be,ad as pe,M as ge,b as O,i as He,ae as Y,q as W,Q as $e,X as ne,B as We,F as Ve,C as Ne,k as Ye,af as Xe,ag as Ke,ah as Qe,ai as ze,aj as qe,ak as xe,al as Je,x as Ze,$ as me,W as fe,u as es,am as ss}from"./index-Cxmp2eWs.js";import{D as P,U as ts,A as V}from"./user-x-BEoeOAJN.js";import{R as G,S as as}from"./settings-CfLDryEX.js";import{T as ce}from"./trash-2-BqpMS_RT.js";import{Q as ls}from"./qr-code-Br7Ofnzm.js";import{S as je}from"./save-Co4-mtpI.js";import{a as rs,U as ns}from"./user-cog-6a5F7Ytf.js";import{P as cs}from"./plus-circle-CmrGWSLr.js";import{P as is}from"./plus-tnFknzSr.js";import{H as ds}from"./history-DnlI9Q06.js";import{L as os}from"./layout-grid-CQHTFAXN.js";import{H as xs}from"./hard-drive-DAAT41Ye.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=y("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=y("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=y("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=y("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=y("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=y("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=y("Ghost",[["path",{d:"M9 10h.01",key:"qbtxuw"}],["path",{d:"M15 10h.01",key:"1qmjsl"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z",key:"uwwb07"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=y("LifeBuoy",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.93 4.93 4.24 4.24",key:"1ymg45"}],["path",{d:"m14.83 9.17 4.24-4.24",key:"1cb5xl"}],["path",{d:"m14.83 14.83 4.24 4.24",key:"q42g0n"}],["path",{d:"m9.17 14.83-4.24 4.24",key:"bqpfvv"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=y("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=y("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=y("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=y("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=y("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=y("Stethoscope",[["path",{d:"M4.8 2.3A.3.3 0 1 0 5 2H4a2 2 0 0 0-2 2v5a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6V4a2 2 0 0 0-2-2h-1a.2.2 0 1 0 .3.3",key:"1jd90r"}],["path",{d:"M8 15v1a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6v-4",key:"126ukv"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=y("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=y("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=y("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Ss=()=>{var r,g;const[s,n]=a.useState(null),[f,N]=a.useState(!0);return a.useEffect(()=>{const i=async()=>{const l=await p.getAdvancedSystemStats();n(l),N(!1)};i();const m=setInterval(i,3e4);return()=>clearInterval(m)},[]),f?e.jsx("div",{className:"text-center text-slate-500 py-20 font-mono",children:"INITIALIZING TELEMETRY..."}):e.jsxs("div",{className:"space-y-6 animate-fade-in-up",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs(j,{className:"bg-slate-900 border border-slate-800 relative overflow-hidden group hover:border-blue-500/50 transition-all",children:[e.jsx("div",{className:"absolute right-0 top-0 p-3 opacity-10 group-hover:opacity-20 transition-opacity",children:e.jsx(Z,{className:"w-16 h-16 text-blue-500"})}),e.jsx("p",{className:"text-xs font-mono text-blue-400 mb-1",children:"TOTAL USERS"}),e.jsx("h2",{className:"text-3xl font-black text-white",children:(r=s==null?void 0:s.totalStudents)==null?void 0:r.toLocaleString()}),e.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-green-400 mt-2",children:[e.jsx(ms,{className:"w-3 h-3"})," +",s==null?void 0:s.dailyGrowthRate,"% Today"]})]}),e.jsxs(j,{className:"bg-slate-900 border border-slate-800 relative overflow-hidden group hover:border-green-500/50 transition-all",children:[e.jsx("div",{className:"absolute right-0 top-0 p-3 opacity-10 group-hover:opacity-20 transition-opacity",children:e.jsx(le,{className:"w-16 h-16 text-green-500"})}),e.jsx("p",{className:"text-xs font-mono text-green-400 mb-1",children:"REVENUE (MRR)"}),e.jsxs("h2",{className:"text-3xl font-black text-white",children:["₹",(g=s==null?void 0:s.totalRevenue)==null?void 0:g.toLocaleString()]}),e.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-slate-400 mt-2",children:[s==null?void 0:s.proSchools," Active Subscriptions"]})]}),e.jsxs(j,{className:"bg-slate-900 border border-slate-800 relative overflow-hidden group hover:border-purple-500/50 transition-all",children:[e.jsx("div",{className:"absolute right-0 top-0 p-3 opacity-10 group-hover:opacity-20 transition-opacity",children:e.jsx(re,{className:"w-16 h-16 text-purple-500"})}),e.jsx("p",{className:"text-xs font-mono text-purple-400 mb-1",children:"ACTIVE SCHOOLS"}),e.jsx("h2",{className:"text-3xl font-black text-white",children:s==null?void 0:s.totalSchools}),e.jsx("div",{className:"flex items-center gap-1 text-[10px] text-slate-400 mt-2",children:"Across 12 Districts"})]}),e.jsxs(j,{className:"bg-slate-900 border border-slate-800 relative overflow-hidden group hover:border-orange-500/50 transition-all",children:[e.jsx("div",{className:"absolute right-0 top-0 p-3 opacity-10 group-hover:opacity-20 transition-opacity",children:e.jsx(M,{className:"w-16 h-16 text-orange-500"})}),e.jsx("p",{className:"text-xs font-mono text-orange-400 mb-1",children:"LIVE TRAFFIC"}),e.jsx("h2",{className:"text-3xl font-black text-white",children:s==null?void 0:s.activeUsersNow}),e.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-green-400 mt-2 animate-pulse",children:[e.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"})," Online Now"]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"md:col-span-2 bg-slate-900 border border-slate-800 rounded-xl p-6 relative overflow-hidden",children:[e.jsxs("h3",{className:"text-sm font-bold text-slate-400 mb-4 flex items-center gap-2",children:[e.jsx(Ts,{className:"w-4 h-4"})," SYSTEM LATENCY"]}),e.jsx("div",{className:"flex items-end gap-1 h-32 w-full",children:[...Array(40)].map((i,m)=>{const l=Math.floor(Math.random()*80)+10;return e.jsx("div",{className:`flex-1 rounded-t-sm transition-all duration-500 ${l>70?"bg-red-500":l>40?"bg-blue-500":"bg-slate-700"}`,style:{height:`${l}%`}},m)})}),e.jsxs("div",{className:"flex justify-between mt-2 text-xs font-mono text-slate-500",children:[e.jsx("span",{children:"-60s"}),e.jsxs("span",{className:"text-green-400",children:[s==null?void 0:s.serverLatency,"ms avg"]}),e.jsx("span",{children:"Now"})]})]}),e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-xl p-6 flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-bold text-slate-400 mb-4 flex items-center gap-2",children:[e.jsx(P,{className:"w-4 h-4"})," DATABASE LOAD"]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between text-xs text-slate-300 mb-1",children:[e.jsx("span",{children:"Storage Used"}),e.jsxs("span",{children:[s==null?void 0:s.dbSizeMB," MB"]})]}),e.jsx("div",{className:"w-full bg-slate-800 h-2 rounded-full overflow-hidden",children:e.jsx("div",{className:"bg-blue-500 h-full rounded-full",style:{width:"15%"}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-xs text-slate-300 mb-1",children:[e.jsx("span",{children:"API Requests (1m)"}),e.jsx("span",{children:"1,204"})]}),e.jsx("div",{className:"w-full bg-slate-800 h-2 rounded-full overflow-hidden",children:e.jsx("div",{className:"bg-green-500 h-full rounded-full",style:{width:"45%"}})})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-800 text-[10px] text-slate-500 flex justify-between",children:[e.jsx("span",{children:"Region: ap-south-1"}),e.jsx("span",{className:"text-green-500 font-bold",children:"HEALTHY"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-900/20 to-blue-900/20 border border-slate-800 rounded-xl p-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-indigo-500/20 rounded-full flex items-center justify-center",children:e.jsx(z,{className:"w-6 h-6 text-indigo-400"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-white font-bold",children:"AI Growth Prediction"}),e.jsxs("p",{className:"text-xs text-slate-400",children:["Based on current trajectory, we expect ",e.jsx("span",{className:"text-white font-bold",children:"+50 schools"})," next month."]})]})]}),e.jsxs("div",{className:"text-right hidden md:block",children:[e.jsx("p",{className:"text-[10px] uppercase text-slate-500 font-bold",children:"Projected Revenue"}),e.jsxs("p",{className:"text-xl font-mono text-green-400",children:["₹",((s==null?void 0:s.totalRevenue)||0)*1.2]})]})]})]})},Ts=({className:s})=>e.jsx("svg",{className:s,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M22 12h-4l-3 9L9 3l-3 9H2"})}),we=`
/* 
  RESULTMATE FULL DATABASE SCHEMA - V3.1 (Auto-Expiry & Bug Fixes)
  Includes: Wallet Logic, Atomic Transactions, Ledger System, Expiry
*/

-- 1. Payment Proofs (Manual GPay)
CREATE TABLE IF NOT EXISTS payment_proofs (
    id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,
    school_id UUID REFERENCES schools(id) ON DELETE CASCADE,
    student_id UUID REFERENCES students(id) ON DELETE SET NULL,
    amount INTEGER NOT NULL,
    transaction_ref TEXT,
    screenshot_url TEXT NOT NULL,
    type TEXT NOT NULL, -- CREDIT_PURCHASE or STUDENT_FEE
    status TEXT DEFAULT 'PENDING', -- PENDING, APPROVED, REJECTED
    fee_id UUID REFERENCES fee_structures(id) ON DELETE SET NULL,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- 2. Staff Members
CREATE TABLE IF NOT EXISTS staff_members (
    id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,
    name TEXT NOT NULL,
    email TEXT UNIQUE,
    role TEXT DEFAULT 'SUPPORT',
    status TEXT DEFAULT 'OFFLINE',
    performance_score INTEGER DEFAULT 100,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- 3. Assessment Tables
CREATE TABLE IF NOT EXISTS assessment_programs (
    id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,
    school_id UUID REFERENCES schools(id) ON DELETE CASCADE,
    name TEXT NOT NULL,
    type TEXT NOT NULL,
    frequency TEXT,
    questions JSONB,
    assignee TEXT,
    target_class_ids TEXT[],
    start_date DATE,
    end_date DATE,
    schedules JSONB,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

CREATE TABLE IF NOT EXISTS assessment_logs (
    id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,
    program_id UUID REFERENCES assessment_programs(id) ON DELETE CASCADE,
    student_id UUID REFERENCES students(id) ON DELETE CASCADE,
    date DATE,
    data JSONB,
    total_score INTEGER,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    UNIQUE(program_id, student_id, date)
);

-- 4. Calendar
CREATE TABLE IF NOT EXISTS academic_calendar (
    id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,
    school_id UUID REFERENCES schools(id) ON DELETE CASCADE,
    title TEXT NOT NULL,
    date DATE NOT NULL,
    type TEXT NOT NULL,
    description TEXT,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- 5. Missing Columns Check
DO $$ 
BEGIN 
    IF NOT EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name='schools' AND column_name='principal_email') THEN
        ALTER TABLE schools ADD COLUMN principal_email TEXT;
        ALTER TABLE schools ADD COLUMN principal_password TEXT;
        ALTER TABLE schools ADD COLUMN has_principal_login BOOLEAN DEFAULT FALSE;
        ALTER TABLE schools ADD COLUMN principal_invite_token TEXT;
        ALTER TABLE schools ADD COLUMN principal_invite_expires TIMESTAMP WITH TIME ZONE;
    END IF;

    IF NOT EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name='campus_posts' AND column_name='likes') THEN
        ALTER TABLE campus_posts ADD COLUMN likes INTEGER DEFAULT 0;
        ALTER TABLE campus_posts ADD COLUMN scheduled_at TIMESTAMP WITH TIME ZONE;
    END IF;
    
    -- Wallet Balance Check
    IF NOT EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name='schools' AND column_name='wallet_balance') THEN
        ALTER TABLE schools ADD COLUMN wallet_balance INTEGER DEFAULT 0;
    END IF;

    -- Result Expiry Check (NEW V3.1)
    IF NOT EXISTS (SELECT 1 FROM information_schema.columns WHERE table_name='schools' AND column_name='result_expiry_date') THEN
        ALTER TABLE schools ADD COLUMN result_expiry_date TIMESTAMP WITH TIME ZONE;
    END IF;
    
    -- Transaction Table Check
    CREATE TABLE IF NOT EXISTS credit_transactions_v2 (
        id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,
        school_id UUID REFERENCES schools(id) ON DELETE CASCADE,
        amount INTEGER NOT NULL,
        type TEXT NOT NULL, -- CREDIT / DEBIT
        description TEXT,
        category TEXT,
        user_role TEXT,
        user_id UUID,
        transaction_id TEXT,
        meta JSONB,
        created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
    );
END $$;

-- 6. RPC: Approve Payment
CREATE OR REPLACE FUNCTION approve_payment_proof(
    proof_id UUID, 
    admin_id UUID
)
RETURNS JSONB AS $$
DECLARE
    proof_rec RECORD;
    new_bal INTEGER;
BEGIN
    SELECT * INTO proof_rec FROM payment_proofs WHERE id = proof_id;
    
    IF proof_rec.status = 'APPROVED' THEN
        RETURN jsonb_build_object('success', false, 'message', 'Already approved');
    END IF;

    -- A. IF CREDIT PURCHASE -> TOPUP WALLET
    IF proof_rec.type = 'CREDIT_PURCHASE' THEN
        UPDATE schools 
        SET wallet_balance = wallet_balance + proof_rec.amount 
        WHERE id = proof_rec.school_id 
        RETURNING wallet_balance INTO new_bal;

        INSERT INTO credit_transactions_v2 (school_id, amount, type, description, category, transaction_id)
        VALUES (proof_rec.school_id, proof_rec.amount, 'CREDIT', 'Manual GPay Topup (Verified)', 'RECHARGE', proof_rec.transaction_ref);
    END IF;

    -- B. IF STUDENT FEE -> MARK AS PAID
    IF proof_rec.type = 'STUDENT_FEE' THEN
        INSERT INTO fee_payments (fee_id, student_id, amount_paid, status, transaction_id, collected_by)
        VALUES (proof_rec.fee_id, proof_rec.student_id, proof_rec.amount, 'PAID', proof_rec.transaction_ref, 'Online (GPay Verified)');
    END IF;

    -- C. UPDATE PROOF STATUS
    UPDATE payment_proofs SET status = 'APPROVED' WHERE id = proof_id;

    RETURN jsonb_build_object('success', true);
END;
$$ LANGUAGE plpgsql SECURITY DEFINER;

-- 7. RPC: Holiday Radar
CREATE OR REPLACE FUNCTION get_holiday_radar_safe(user_district TEXT, check_date TEXT)
RETURNS INTEGER AS $$
DECLARE
  holiday_count INTEGER;
BEGIN
  SELECT count(*) INTO holiday_count
  FROM academic_calendar ac
  JOIN schools s ON ac.school_id = s.id
  WHERE s.district = user_district
  AND ac.date = check_date::DATE
  AND ac.type = 'HOLIDAY';
  
  RETURN holiday_count;
END;
$$ LANGUAGE plpgsql SECURITY DEFINER;

-- 8. RPC: RECHARGE WALLET (Super Admin / Auto)
CREATE OR REPLACE FUNCTION recharge_wallet_v16(
    school_id_in UUID,
    amount_in INTEGER,
    reason_in TEXT,
    txn_id_in TEXT
)
RETURNS JSONB AS $$
DECLARE
    current_bal INTEGER;
    new_bal INTEGER;
BEGIN
    -- Update Balance
    UPDATE schools 
    SET wallet_balance = COALESCE(wallet_balance, 0) + amount_in
    WHERE id = school_id_in
    RETURNING wallet_balance INTO new_bal;

    -- Log Transaction
    INSERT INTO credit_transactions_v2 (school_id, amount, type, description, category, transaction_id)
    VALUES (school_id_in, amount_in, 'CREDIT', 'Manual GPay Topup (Verified)', 'RECHARGE', txn_id_in);

    RETURN jsonb_build_object('success', true, 'new_balance', new_bal);
END;
$$ LANGUAGE plpgsql SECURITY DEFINER;

-- 9. RPC: DEDUCT CREDITS (Usage)
CREATE OR REPLACE FUNCTION deduct_credits_v16(
    school_id_in UUID,
    amount_in INTEGER,
    reason_in TEXT,
    category_in TEXT,
    user_id_in UUID,
    user_role_in TEXT,
    meta_in JSONB
)
RETURNS JSONB AS $$
DECLARE
    current_bal INTEGER;
    new_bal INTEGER;
BEGIN
    SELECT wallet_balance INTO current_bal FROM schools WHERE id = school_id_in;
    
    -- Check Sufficient Funds (Allow negative balance only for PENALTY)
    IF category_in != 'PENALTY' AND (current_bal IS NULL OR current_bal < amount_in) THEN
        RETURN jsonb_build_object('success', false, 'message', 'Insufficient Credits');
    END IF;

    -- Deduct
    UPDATE schools 
    SET wallet_balance = COALESCE(wallet_balance, 0) - amount_in
    WHERE id = school_id_in
    RETURNING wallet_balance INTO new_bal;

    -- Log
    INSERT INTO credit_transactions_v2 (school_id, amount, type, description, category, user_id, user_role, meta)
    VALUES (school_id_in, -amount_in, 'DEBIT', reason_in, category_in, user_id_in, user_role_in, meta_in);

    RETURN jsonb_build_object('success', true, 'new_balance', new_bal, 'transaction_id', uuid_generate_v4());
END;
$$ LANGUAGE plpgsql SECURITY DEFINER;

-- 10. RPC: ATOMIC PUBLISH (Payment + Publish)
CREATE OR REPLACE FUNCTION publish_result_atomic_v17(
    school_id_in UUID,
    exam_type_in TEXT,
    publish_date_in TEXT
)
RETURNS JSONB AS $$
DECLARE
    student_count INTEGER;
    cost_per_student INTEGER := 1;
    total_cost INTEGER;
    current_bal INTEGER;
    new_bal INTEGER;
BEGIN
    -- 1. Calculate Cost
    SELECT count(*) INTO student_count FROM students WHERE school_id = school_id_in AND is_verified = true;
    
    -- Free Tier Logic (First 50 students free, or specific exam types free)
    IF exam_type_in = 'CLASS_TEST' OR exam_type_in = 'REVISION' THEN
        total_cost := 0;
    ELSE
        total_cost := student_count * cost_per_student;
    END IF;

    -- 2. Check Balance
    SELECT wallet_balance INTO current_bal FROM schools WHERE id = school_id_in;
    
    IF current_bal < total_cost THEN
        RETURN jsonb_build_object('success', false, 'message', 'Insufficient Credits for ' || student_count || ' students. Cost: ' || total_cost || ' CR.');
    END IF;

    -- 3. Deduct if cost > 0
    IF total_cost > 0 THEN
        UPDATE schools 
        SET wallet_balance = wallet_balance - total_cost 
        WHERE id = school_id_in 
        RETURNING wallet_balance INTO new_bal;

        INSERT INTO credit_transactions_v2 (school_id, amount, type, description, category)
        VALUES (school_id_in, -total_cost, 'DEBIT', 'Result Publish (' || exam_type_in || ')', 'PUBLISH');
    ELSE
        new_bal := current_bal;
    END IF;

    -- 4. Execute Publish
    UPDATE schools 
    SET scheduled_publish_date = publish_date_in 
    WHERE id = school_id_in;

    RETURN jsonb_build_object('success', true, 'cost', total_cost, 'new_balance', new_bal);
END;
$$ LANGUAGE plpgsql SECURITY DEFINER;

NOTIFY pgrst, 'reload schema';
`,Ee=we,Cs=()=>{const[s,n]=a.useState([]),[f,N]=a.useState(!0),[r,g]=a.useState(null),[i,m]=a.useState(""),[l,x]=a.useState(!1),[t,c]=a.useState(""),[v,b]=a.useState(!1),[h,E]=a.useState(!1);a.useEffect(()=>{w()},[]);const w=async()=>{N(!0);const d=await p.getAllSupportTickets();n(d),N(!1)},T=d=>{g(d),m(d.aiSuggestedReply||""),d.category==="BUG"&&d.userEmail&&c(d.userEmail)},I=async()=>{!r||!i||(x(!0),await p.resolveTicket(r.id,i),x(!1),g(null),w(),alert("Ticket Resolved & User Notified"))},D=async()=>{if(!t)return alert("Enter email address");if(!confirm(`Force delete account for ${t}? This allows them to sign up again.`))return;b(!0);const d=await p.forceDeleteUser(t);b(!1),d.success?(alert(d.message),c("")):alert("Failed: "+d.message)},C=async()=>{if(!confirm("This will attempt to create missing columns/tables. Continue?"))return;E(!0);const d=await p.runDatabaseMigration(Ee);E(!1),alert(d.success?"Schema Fix Executed. Ask user to try again.":"Failed: "+d.message)},k=async()=>{confirm("This will purge server cache. Continue?")&&(E(!0),await p.triggerAutoHeal("CACHE"),E(!1),alert("System Cache Purged."))};return e.jsxs("div",{className:"h-[calc(100vh-140px)] flex gap-6 animate-fade-in-up",children:[e.jsxs("div",{className:"w-1/3 bg-slate-900 border border-slate-800 rounded-xl overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-slate-800 flex justify-between items-center bg-slate-900",children:[e.jsxs("h3",{className:"font-bold text-white flex items-center gap-2",children:[e.jsx(ue,{className:"w-4 h-4 text-blue-500"})," Inbox (",s.filter(d=>d.status==="OPEN").length,")"]}),e.jsx("button",{onClick:w,className:"text-slate-500 hover:text-white",children:e.jsx(G,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:[s.length===0&&e.jsx("div",{className:"p-8 text-center text-slate-500 text-sm",children:"No tickets found."}),s.map(d=>e.jsxs("div",{onClick:()=>T(d),className:`p-4 border-b border-slate-800 cursor-pointer hover:bg-slate-800/50 transition-colors ${(r==null?void 0:r.id)===d.id?"bg-slate-800 border-l-4 border-l-blue-500":"border-l-4 border-l-transparent"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsx("span",{className:`text-[10px] font-bold px-1.5 py-0.5 rounded uppercase ${d.priority==="CRITICAL"?"bg-red-500/20 text-red-400":"bg-slate-700 text-slate-300"}`,children:d.category||d.priority}),e.jsx("span",{className:"text-[10px] text-slate-500",children:new Date(d.createdAt).toLocaleDateString()})]}),e.jsx("h4",{className:`text-sm font-bold mb-1 truncate ${d.status==="RESOLVED"?"text-slate-500 line-through":"text-white"}`,children:d.subject}),e.jsx("p",{className:"text-xs text-slate-400 truncate",children:d.schoolName})]},d.id))]})]}),e.jsxs("div",{className:"flex-1 flex flex-col gap-6",children:[e.jsx("div",{className:"bg-slate-900 border border-slate-800 rounded-xl overflow-hidden flex flex-col relative h-2/3",children:r?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-6 border-b border-slate-800 bg-slate-900",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-1",children:r.subject}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-slate-400",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(De,{className:"w-3 h-3"})," ",r.userEmail]}),e.jsx("span",{className:"w-1 h-1 bg-slate-600 rounded-full"}),e.jsx("span",{children:r.schoolName})]})]}),e.jsx("div",{className:`px-3 py-1 rounded text-xs font-bold ${r.status==="OPEN"?"bg-green-500/20 text-green-400":"bg-slate-700 text-slate-300"}`,children:r.status})]}),e.jsx("div",{className:"bg-slate-800/50 p-4 rounded-lg text-sm text-slate-300 leading-relaxed max-h-32 overflow-y-auto custom-scrollbar",children:r.message})]}),r.category==="BUG"&&r.status!=="RESOLVED"&&e.jsxs("div",{className:"px-6 py-3 bg-red-900/10 border-b border-red-900/30 flex items-center gap-4",children:[e.jsxs("span",{className:"text-xs font-bold text-red-400 flex items-center gap-1",children:[e.jsx(Le,{className:"w-3 h-3"})," Quick Fixes:"]}),e.jsxs("button",{onClick:C,disabled:h,className:"text-[10px] bg-red-900/30 hover:bg-red-900/50 text-red-300 px-2 py-1 rounded border border-red-800 flex items-center gap-1",children:[e.jsx(P,{className:"w-3 h-3"})," Fix Schema/Tables"]}),e.jsxs("button",{onClick:k,disabled:h,className:"text-[10px] bg-orange-900/30 hover:bg-orange-900/50 text-orange-300 px-2 py-1 rounded border border-orange-800 flex items-center gap-1",children:[e.jsx(M,{className:"w-3 h-3"})," Clear Server Cache"]})]}),r.status!=="RESOLVED"&&e.jsxs("div",{className:"p-6 flex-1 flex flex-col",children:[r.aiSuggestedReply&&e.jsxs("div",{className:"bg-purple-900/10 border border-purple-500/30 p-3 rounded-lg mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 text-purple-400 text-xs font-bold uppercase",children:[e.jsx(ke,{className:"w-4 h-4"})," AI Auto-Draft"]}),e.jsxs("p",{className:"text-sm text-slate-300 italic line-clamp-2",children:['"',r.aiSuggestedReply,'"']}),e.jsx("button",{onClick:()=>m(r.aiSuggestedReply||""),className:"mt-2 text-xs text-purple-400 hover:text-purple-300 underline",children:"Use this reply"})]}),e.jsx("textarea",{className:"w-full flex-1 bg-slate-800 border border-slate-700 rounded-xl p-4 text-white resize-none focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"Type your reply here...",value:i,onChange:d=>m(d.target.value)}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx(L,{onClick:I,disabled:l,className:"bg-blue-600 hover:bg-blue-700 flex items-center gap-2",children:l?"Sending...":e.jsxs(e.Fragment,{children:[e.jsx(Ue,{className:"w-4 h-4"})," Approve & Send Reply"]})})})]}),r.status==="RESOLVED"&&e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-slate-500",children:[e.jsx(be,{className:"w-16 h-16 mb-4 text-green-900"}),e.jsx("p",{children:"This ticket has been resolved."})]})]}):e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-slate-600",children:[e.jsx(ue,{className:"w-20 h-20 mb-4 opacity-20"}),e.jsx("p",{children:"Select a ticket to view details"})]})}),e.jsxs("div",{className:"h-1/3 bg-slate-900 border border-slate-800 rounded-xl p-6",children:[e.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx(F,{className:"w-4 h-4 text-orange-500"})," Advanced Troubleshooting"]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:e.jsxs("div",{className:"bg-slate-950 p-4 rounded-lg border border-slate-800",children:[e.jsxs("h4",{className:"text-sm font-bold text-white mb-2 flex items-center gap-2",children:[e.jsx(ts,{className:"w-4 h-4 text-red-500"})," Account Fixer"]}),e.jsx("p",{className:"text-xs text-slate-500 mb-3",children:'Fix "Profile Not Found" errors by resetting Auth.'}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{className:"flex-1 bg-slate-800 border border-slate-700 rounded px-3 py-1.5 text-xs text-white",placeholder:"Enter user email...",value:t,onChange:d=>c(d.target.value)}),e.jsx("button",{onClick:D,disabled:v,className:"bg-red-900/30 text-red-400 border border-red-900/50 px-3 py-1.5 rounded text-xs font-bold hover:bg-red-900/50 flex items-center gap-1",children:v?"Fixing...":e.jsxs(e.Fragment,{children:[e.jsx(ce,{className:"w-3 h-3"})," Reset"]})})]})]})})]})]})]})},As=()=>{const[s,n]=a.useState({}),[f,N]=a.useState(!0),[r,g]=a.useState(!0),[i,m]=a.useState(""),[l,x]=a.useState(""),[t,c]=a.useState("DISCONNECTED"),[v,b]=a.useState(""),[h,E]=a.useState(""),[w,T]=a.useState(""),[I,D]=a.useState(!1),[C,k]=a.useState(""),[d,R]=a.useState(""),[X,K]=a.useState(""),[u,S]=a.useState({exams:0,results:1,ai:5,sms:1}),[A,B]=a.useState(""),[ee,ie]=a.useState(""),[Se,de]=a.useState(!1);a.useEffect(()=>{g(te());const o=Oe();o.url&&!o.url.includes("placeholder")?(m(o.url),x(o.key),c("CONNECTED")):c("DISCONNECTED"),Te()},[]);const Te=async()=>{try{const o=await p.getGlobalSettings();if(n(o),o.CASHFREE_APP_ID&&b(o.CASHFREE_APP_ID),o.CASHFREE_SECRET_KEY&&E(o.CASHFREE_SECRET_KEY),o.RAZORPAY_KEY_ID&&T(o.RAZORPAY_KEY_ID),o.GPAY_CONFIG){const _=JSON.parse(o.GPAY_CONFIG);k(_.qrUrl||""),R(_.vpa||""),K(_.whatsappNumber||"")}o.FEATURE_COSTS&&S(JSON.parse(o.FEATURE_COSTS)),o.SUPER_ADMIN_EMAIL&&B(o.SUPER_ADMIN_EMAIL)}catch(o){console.error("Failed to load settings",o)}N(!1)},oe=async o=>{if(!te())return alert("Connect Database First");const Q=s[o]==="TRUE"?"FALSE":"TRUE";n({...s,[o]:Q}),await p.updateGlobalSetting(o,Q)},Ce=async o=>{const _=o.target.value;n({...s,ACTIVE_PAYMENT_GATEWAY:_}),await p.updateGlobalSetting("ACTIVE_PAYMENT_GATEWAY",_)},Ae=async o=>{const _=o.target.value;n({...s,PAYMENT_MODE:_}),await p.updateGlobalSetting("PAYMENT_MODE",_)},_e=async()=>{if(!te())return alert("Connect Database First");D(!0),await p.updateGlobalSetting("CASHFREE_APP_ID",v),await p.updateGlobalSetting("CASHFREE_SECRET_KEY",h),await p.updateGlobalSetting("RAZORPAY_KEY_ID",w),await p.updateGlobalSetting("GPAY_CONFIG",JSON.stringify({qrUrl:C,vpa:d,whatsappNumber:X})),await p.updateGlobalSetting("FEATURE_COSTS",JSON.stringify(u)),D(!1),alert("Settings Updated in Database.")},Re=async()=>{if(!A)return alert("Email required");de(!0),r&&(await p.updateGlobalSetting("SUPER_ADMIN_EMAIL",A),ee&&await p.updateGlobalSetting("SUPER_ADMIN_PASS",ee)),de(!1),alert("Admin Credentials Updated!"),ie("")},Ie=()=>{if(!i||!l)return alert("URL & Key required");if(i.includes("placeholder"))return alert("Invalid URL");Me(i,l),alert("Database connection updated! The app will reload to apply changes."),window.location.reload()};if(f)return e.jsx("div",{className:"p-8 text-white",children:"Loading Controls..."});const U=({label:o,keyName:_,desc:Q})=>{const se=s[_]==="TRUE";return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-900 border border-slate-800 rounded-xl",children:[e.jsxs("div",{children:[e.jsx("h4",{className:`font-bold ${se?"text-white":"text-slate-500"}`,children:o}),e.jsx("p",{className:"text-xs text-slate-500",children:Q})]}),e.jsx("button",{onClick:()=>oe(_),className:`relative w-12 h-7 rounded-full transition-colors ${se?"bg-green-500":"bg-slate-700"}`,children:e.jsx("div",{className:`absolute top-1 left-1 w-5 h-5 bg-white rounded-full transition-transform ${se?"translate-x-5":"translate-x-0"}`})})]})};return e.jsxs("div",{className:"max-w-5xl mx-auto space-y-8 animate-fade-in-up pb-20",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-sm font-bold text-green-400 uppercase tracking-wider flex items-center gap-2",children:[e.jsx(P,{className:"w-4 h-4"})," Database Cluster"]}),e.jsxs(j,{className:"bg-slate-900 border-slate-800",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${t==="CONNECTED"?"bg-green-500 animate-pulse":"bg-red-500"}`}),e.jsxs("span",{className:"text-white font-bold text-sm",children:["Status: ",t]})]}),e.jsx("p",{className:"text-xs text-slate-500",children:"Supabase / Postgres"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase block mb-1",children:"Project URL"}),e.jsx("input",{className:"w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm font-mono",value:i,onChange:o=>m(o.target.value),placeholder:"https://your-project.supabase.co"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase block mb-1",children:"API Key (anon)"}),e.jsx("input",{className:"w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm font-mono",type:"password",value:l,onChange:o=>x(o.target.value),placeholder:"eyJhbGciOiJIUzI1NiIsInR5cCI6Ik..."})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsxs("button",{onClick:Ie,className:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg font-bold text-sm flex items-center gap-2",children:[e.jsx(G,{className:"w-4 h-4"})," ",t==="CONNECTED"?"Reconnect":"Connect"]})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-sm font-bold text-yellow-400 uppercase tracking-wider flex items-center gap-2",children:[e.jsx(Pe,{className:"w-4 h-4"})," Payment & Billing"]}),e.jsxs(j,{className:"bg-slate-900 border-slate-800",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase block mb-2",children:"Active Provider"}),e.jsxs("select",{className:"w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm outline-none focus:ring-2 focus:ring-yellow-600",value:s.ACTIVE_PAYMENT_GATEWAY||"NONE",onChange:Ce,children:[e.jsx("option",{value:"NONE",children:"Disabled (Manual Only)"}),e.jsx("option",{value:"CASHFREE",children:"Cashfree Payments"}),e.jsx("option",{value:"RAZORPAY",children:"Razorpay"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase block mb-2",children:"Environment"}),e.jsxs("select",{className:"w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm outline-none focus:ring-2 focus:ring-yellow-600",value:s.PAYMENT_MODE||"SANDBOX",onChange:Ae,children:[e.jsx("option",{value:"SANDBOX",children:"Sandbox (Test Mode)"}),e.jsx("option",{value:"LIVE",children:"Live (Production)"})]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-slate-950 p-4 rounded-xl border border-slate-800",children:[e.jsxs("h4",{className:"text-white font-bold text-sm flex items-center gap-2 mb-3",children:[e.jsx(H,{className:"w-3 h-3"})," Razorpay"]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase block mb-1",children:"Key ID"}),e.jsx("input",{className:"w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm font-mono",placeholder:"rzp_test_...",value:w,onChange:o=>T(o.target.value)})]})]}),e.jsxs("div",{className:"bg-slate-950 p-4 rounded-xl border border-slate-800",children:[e.jsxs("h4",{className:"text-white font-bold text-sm flex items-center gap-2 mb-3",children:[e.jsx(H,{className:"w-3 h-3"})," Cashfree"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{className:"w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm font-mono",placeholder:"App ID",value:v,onChange:o=>b(o.target.value)}),e.jsx("input",{className:"w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm font-mono",type:"password",placeholder:"Secret",value:h,onChange:o=>E(o.target.value)})]})]})]}),e.jsxs("div",{className:"bg-slate-950 p-4 rounded-xl border border-slate-800 mt-4 border-l-4 border-l-blue-500",children:[e.jsxs("h4",{className:"text-white font-bold text-sm flex items-center gap-2 mb-3",children:[e.jsx(ls,{className:"w-4 h-4 text-blue-500"})," GPay Business Fallback (Manual Mode)"]}),e.jsx("p",{className:"text-xs text-slate-500 mb-3",children:"If gateway fails, users can pay manually. Config below controls the buttons."}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase block mb-1",children:"UPI VPA (Required)"}),e.jsx("input",{className:"w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm font-mono",placeholder:"user@upi",value:d,onChange:o=>R(o.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase block mb-1",children:"QR Image URL"}),e.jsx("input",{className:"w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm",placeholder:"https://...",value:C,onChange:o=>k(o.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase block mb-1",children:"Support WhatsApp No"}),e.jsxs("div",{className:"relative",children:[e.jsx(Fe,{className:"absolute left-3 top-2.5 w-4 h-4 text-green-500"}),e.jsx("input",{className:"w-full bg-slate-900 border border-slate-700 rounded p-2 pl-9 text-white text-sm font-mono",placeholder:"919876543210",value:X,onChange:o=>K(o.target.value)})]})]})]})]}),e.jsxs("div",{className:"bg-slate-950 p-4 rounded-xl border border-slate-800 mt-4 border-l-4 border-l-purple-500",children:[e.jsxs("h4",{className:"text-white font-bold text-sm flex items-center gap-2 mb-3",children:[e.jsx(le,{className:"w-4 h-4 text-purple-500"})," Dynamic Feature Costs (Credits)"]}),e.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] text-slate-500 uppercase block mb-1",children:"Exam"}),e.jsx("input",{type:"number",className:"w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm text-center font-bold",value:u.exams,onChange:o=>S({...u,exams:parseInt(o.target.value)||0})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] text-slate-500 uppercase block mb-1",children:"Result"}),e.jsx("input",{type:"number",className:"w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm text-center font-bold",value:u.results,onChange:o=>S({...u,results:parseInt(o.target.value)||0})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] text-slate-500 uppercase block mb-1",children:"AI Gen"}),e.jsx("input",{type:"number",className:"w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm text-center font-bold",value:u.ai,onChange:o=>S({...u,ai:parseInt(o.target.value)||0})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] text-slate-500 uppercase block mb-1",children:"SMS"}),e.jsx("input",{type:"number",className:"w-full bg-slate-900 border border-slate-700 rounded p-2 text-white text-sm text-center font-bold",value:u.sms,onChange:o=>S({...u,sms:parseInt(o.target.value)||0})})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-6",children:[e.jsx(U,{label:"Mock Payment Mode",keyName:"ENABLE_MOCK_PAYMENTS",desc:"Allow fake payments for testing"}),e.jsx("button",{onClick:_e,disabled:I,className:"bg-yellow-600 hover:bg-yellow-700 text-white px-6 py-2.5 rounded-lg font-bold text-sm flex items-center gap-2",children:I?"Saving...":e.jsxs(e.Fragment,{children:[e.jsx(je,{className:"w-4 h-4"})," Update Configuration"]})})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-sm font-bold text-purple-400 uppercase tracking-wider flex items-center gap-2",children:[e.jsx(Es,{className:"w-4 h-4"})," Global Modules"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(U,{label:"Public Registration",keyName:"ENABLE_PUBLIC_REGISTRATION",desc:"Allow new students to register"}),e.jsx(U,{label:"Teacher Login",keyName:"ENABLE_TEACHER_LOGIN",desc:"Enable teacher access"}),e.jsx(U,{label:"Student Login",keyName:"ENABLE_STUDENT_LOGIN",desc:"Enable student portal"}),e.jsx(U,{label:"Fees Module",keyName:"MODULE_FEES",desc:"Show Fees tab"}),e.jsx(U,{label:"Assessments Module",keyName:"MODULE_ASSESSMENTS",desc:"Show Assessments tab"}),e.jsx(U,{label:"Storage Cost",keyName:"ENABLE_STORAGE_COSTS",desc:"Charge credits for uploads"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-wider flex items-center gap-2",children:[e.jsx(rs,{className:"w-4 h-4"})," Admin Credentials"]}),e.jsx(j,{className:"bg-slate-900 border-slate-800",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase block mb-1",children:"Super Admin Email"}),e.jsx("input",{className:"w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm",value:A,onChange:o=>B(o.target.value)})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase block mb-1",children:"New Password"}),e.jsx("input",{className:"w-full bg-slate-950 border border-slate-700 rounded p-2 text-white text-sm",type:"password",value:ee,onChange:o=>ie(o.target.value)})]}),e.jsx("button",{onClick:Re,disabled:Se,className:"mt-5 bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-lg font-bold text-sm",children:"Update"})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-sm font-bold text-red-400 uppercase tracking-wider flex items-center gap-2",children:[e.jsx($,{className:"w-4 h-4"})," Emergency"]}),e.jsxs("div",{className:"p-6 bg-red-900/10 border border-red-900/30 rounded-xl flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-white font-bold text-lg",children:"System Lockdown"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Block all access except Super Admin."})]}),e.jsx("button",{onClick:()=>oe("MAINTENANCE_MODE"),className:`px-6 py-3 rounded-lg font-bold flex items-center gap-2 ${s.MAINTENANCE_MODE==="TRUE"?"bg-red-500 text-white animate-pulse":"bg-slate-800 text-red-500 border border-red-900/50"}`,children:s.MAINTENANCE_MODE==="TRUE"?e.jsxs(e.Fragment,{children:[e.jsx(H,{className:"w-4 h-4"})," UNLOCK SYSTEM"]}):e.jsxs(e.Fragment,{children:[e.jsx(ns,{className:"w-4 h-4"})," LOCK SYSTEM"]})})]})]})]})},_s=()=>{const[s,n]=a.useState("OVERVIEW"),[f,N]=a.useState([]),[r,g]=a.useState(""),[i,m]=a.useState(!1),[l,x]=a.useState(""),[t,c]=a.useState(null),[v,b]=a.useState(!1),[h,E]=a.useState(null);a.useEffect(()=>{w()},[]);const w=async()=>{const d=await p.getStoragePoolStatus();N(d)},T=async()=>{b(!0),c(null),setTimeout(async()=>{const d=await p.getSystemHealthReport();c(d),b(!1)},1500)},I=async d=>{if(!confirm("Are you sure? This will delete corrupted/junk data."))return;E(d);const R=await p.runAutoFix(d);E(null),R.success?(alert(`Successfully cleaned ${R.fixed_count} records.`),T()):alert("Fix Failed: "+R.message)},D=async()=>{if(!r.trim())return;m(!0);const d=await p.runDatabaseMigration(r);m(!1),x(d.message||"Done"),setTimeout(()=>x(""),3e3)},C=async d=>{confirm("Are you sure? This will reset active connections.")&&(await p.triggerAutoHeal(d),alert("Healing sequence initiated."))},k=d=>{const R=d.target.value;g(R==="FIX_COLUMNS"?Ee:R==="RESET_DB"?we:R==="CLEAR_LOGS"?"DELETE FROM audit_logs;":"")};return s==="SYSTEM_DOCTOR"?e.jsxs("div",{className:"space-y-6 animate-fade-in-up",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("button",{onClick:()=>n("OVERVIEW"),className:"p-2 bg-slate-800 rounded-full hover:bg-slate-700 text-slate-400 hover:text-white transition-colors",children:e.jsx(q,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(ae,{className:"w-6 h-6 text-green-500"})," System Doctor"]}),e.jsx("p",{className:"text-xs text-slate-500",children:"AI-Powered Health Check & Repair"})]})]}),e.jsxs("div",{className:"flex justify-center mb-8",children:[!t&&!v&&e.jsxs("div",{className:"text-center py-20",children:[e.jsx("div",{className:"w-24 h-24 bg-slate-900 rounded-full flex items-center justify-center mx-auto mb-6 border-4 border-slate-800",children:e.jsx(V,{className:"w-10 h-10 text-slate-600"})}),e.jsx("h3",{className:"text-white text-lg font-bold mb-2",children:"System Ready for Scan"}),e.jsx("p",{className:"text-slate-500 text-sm mb-6 max-w-xs mx-auto",children:"Check for ghost accounts, orphaned class data, and database junk."}),e.jsx(L,{onClick:T,className:"bg-green-600 hover:bg-green-700 text-white px-8 py-3 text-sm font-bold shadow-lg shadow-green-500/20",children:"Start Smart Scan"})]}),v&&e.jsxs("div",{className:"text-center py-20",children:[e.jsxs("div",{className:"relative w-24 h-24 mx-auto mb-6",children:[e.jsx("div",{className:"absolute inset-0 border-4 border-slate-800 rounded-full"}),e.jsx("div",{className:"absolute inset-0 border-4 border-t-green-500 border-r-transparent border-b-transparent border-l-transparent rounded-full animate-spin"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(ae,{className:"w-8 h-8 text-green-500 animate-pulse"})})]}),e.jsx("h3",{className:"text-white text-lg font-bold animate-pulse",children:"Scanning System..."}),e.jsx("p",{className:"text-slate-500 text-xs",children:"Analyzing integrity constraints"})]}),t&&e.jsxs("div",{className:"w-full max-w-4xl grid md:grid-cols-2 gap-6",children:[e.jsxs(j,{className:`border-l-4 ${t.ghost_students>0?"border-red-500 bg-red-900/10":"border-green-500 bg-slate-900"}`,children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-white font-bold flex items-center gap-2",children:[e.jsx(ps,{className:`w-5 h-5 ${t.ghost_students>0?"text-red-500":"text-green-500"}`}),"Ghost Students"]}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Students linked to deleted schools."})]}),e.jsx("span",{className:`text-2xl font-black ${t.ghost_students>0?"text-red-500":"text-green-500"}`,children:t.ghost_students})]}),t.ghost_students>0?e.jsx("button",{onClick:()=>I("GHOST_STUDENTS"),disabled:!!h,className:"mt-4 w-full py-2 bg-red-600 hover:bg-red-700 text-white rounded text-xs font-bold transition-colors",children:h==="GHOST_STUDENTS"?"Fixing...":"Fix Now"}):e.jsx("div",{className:"mt-4 py-2 text-center text-xs text-green-500 font-bold bg-green-900/20 rounded border border-green-900/50",children:"System Healthy"})]}),e.jsxs(j,{className:`border-l-4 ${t.orphaned_classes>0?"border-orange-500 bg-orange-900/10":"border-green-500 bg-slate-900"}`,children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-white font-bold flex items-center gap-2",children:[e.jsx(F,{className:`w-5 h-5 ${t.orphaned_classes>0?"text-orange-500":"text-green-500"}`}),"Orphaned Classes"]}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Classes with missing school parent."})]}),e.jsx("span",{className:`text-2xl font-black ${t.orphaned_classes>0?"text-orange-500":"text-green-500"}`,children:t.orphaned_classes})]}),t.orphaned_classes>0?e.jsx("button",{onClick:()=>I("ORPHANED_CLASSES"),disabled:!!h,className:"mt-4 w-full py-2 bg-orange-600 hover:bg-orange-700 text-white rounded text-xs font-bold transition-colors",children:h==="ORPHANED_CLASSES"?"Fixing...":"Fix Now"}):e.jsx("div",{className:"mt-4 py-2 text-center text-xs text-green-500 font-bold bg-green-900/20 rounded border border-green-900/50",children:"System Healthy"})]}),e.jsxs(j,{className:`border-l-4 ${t.junk_logs>500?"border-yellow-500 bg-yellow-900/10":"border-green-500 bg-slate-900"}`,children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-white font-bold flex items-center gap-2",children:[e.jsx(ce,{className:`w-5 h-5 ${t.junk_logs>500?"text-yellow-500":"text-green-500"}`}),"Junk Logs"]}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Activity logs older than 1 year."})]}),e.jsx("span",{className:`text-2xl font-black ${t.junk_logs>500?"text-yellow-500":"text-green-500"}`,children:t.junk_logs})]}),t.junk_logs>0?e.jsx("button",{onClick:()=>I("JUNK_LOGS"),disabled:!!h,className:"mt-4 w-full py-2 bg-yellow-600 hover:bg-yellow-700 text-white rounded text-xs font-bold transition-colors",children:h==="JUNK_LOGS"?"Cleaning...":"Auto Clean"}):e.jsx("div",{className:"mt-4 py-2 text-center text-xs text-green-500 font-bold bg-green-900/20 rounded border border-green-900/50",children:"System Healthy"})]}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs("button",{onClick:T,className:"text-slate-500 hover:text-white flex items-center gap-2 text-sm font-bold bg-slate-800 px-4 py-2 rounded-lg transition-colors",children:[e.jsx(G,{className:"w-4 h-4"})," Re-Scan"]})})]})]})]}):s==="DB_DETAILS"?e.jsxs("div",{className:"space-y-6 animate-fade-in-up",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("button",{onClick:()=>n("OVERVIEW"),className:"p-2 bg-slate-800 rounded-full hover:bg-slate-700 text-slate-400 hover:text-white transition-colors",children:e.jsx(q,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Database Control"}),e.jsx("p",{className:"text-xs text-slate-500",children:"PostgreSQL 15.2 (Supabase)"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs(j,{className:"bg-slate-900 border-slate-800 h-full flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"font-bold text-white flex items-center gap-2",children:[e.jsx(P,{className:"w-4 h-4 text-orange-500"})," SQL Migrator"]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("select",{onChange:k,className:"bg-slate-800 text-xs text-white border border-slate-700 rounded px-2 py-1 outline-none",children:[e.jsx("option",{value:"",children:"-- Quick Fix Scripts --"}),e.jsx("option",{value:"FIX_COLUMNS",children:"Fix Missing Columns (Tables)"}),e.jsx("option",{value:"CLEAR_LOGS",children:"Clear Audit Logs"}),e.jsx("option",{value:"RESET_DB",children:"Reset Full DB (Dangerous)"})]})})]}),e.jsx("textarea",{className:"flex-1 bg-slate-950 font-mono text-xs text-green-400 p-3 rounded-lg border border-slate-800 outline-none resize-none mb-4",placeholder:"-- Enter SQL command to repair/migrate tables...",rows:8,value:r,onChange:d=>g(d.target.value)}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-green-500 font-mono",children:l}),e.jsx(L,{onClick:D,disabled:i||!r,className:"bg-orange-600 hover:bg-orange-700 text-xs py-2",children:i?"Running...":e.jsxs(e.Fragment,{children:[e.jsx(Ge,{className:"w-3 h-3 mr-1"})," Execute"]})})]})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs(j,{className:"bg-slate-900 border-slate-800",children:[e.jsxs("h3",{className:"font-bold text-white flex items-center gap-2 mb-6",children:[e.jsx(F,{className:"w-4 h-4 text-red-500"})," Emergency Operations"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-900/10 border border-red-900/30 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-slate-200 text-sm",children:"Purge Redis Cache"}),e.jsx("p",{className:"text-[10px] text-slate-500",children:"Clears session data & temp keys."})]}),e.jsx("button",{onClick:()=>C("CACHE"),className:"px-3 py-1.5 bg-red-600 hover:bg-red-700 text-white text-xs font-bold rounded",children:"Purge"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-800/30 border border-slate-700/50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-slate-200 text-sm",children:"Reset Connection Pool"}),e.jsx("p",{className:"text-[10px] text-slate-500",children:"Disconnects active clients."})]}),e.jsx("button",{onClick:()=>C("CONNECTION"),className:"px-3 py-1.5 bg-slate-700 hover:bg-slate-600 text-white text-xs font-bold rounded",children:"Reset"})]})]})]})})]})]}):e.jsxs("div",{className:"space-y-8 animate-fade-in-up",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{onClick:()=>n("SYSTEM_DOCTOR"),className:"bg-slate-900 border border-slate-800 p-6 rounded-2xl hover:border-green-500 cursor-pointer group transition-all relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity",children:e.jsx(ae,{className:"w-16 h-16 text-green-500"})}),e.jsx("div",{className:"flex justify-between items-start mb-4",children:e.jsx("div",{className:"p-3 bg-green-900/20 rounded-xl text-green-400 group-hover:scale-110 transition-transform",children:e.jsx(V,{className:"w-8 h-8"})})}),e.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:"System Doctor"}),e.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Auto-detect & fix ghost accounts."}),e.jsx("div",{className:"flex items-center gap-2 text-[10px] font-mono text-green-400",children:"Smart Healer Active"})]}),e.jsxs("div",{onClick:()=>n("DB_DETAILS"),className:"bg-slate-900 border border-slate-800 p-6 rounded-2xl hover:border-blue-500 cursor-pointer group transition-all",children:[e.jsx("div",{className:"flex justify-between items-start mb-4",children:e.jsx("div",{className:"p-3 bg-blue-900/20 rounded-xl text-blue-400 group-hover:scale-110 transition-transform",children:e.jsx(P,{className:"w-8 h-8"})})}),e.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:"Core Database"}),e.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Manage SQL, Migrations, and Auto-healing."}),e.jsx("div",{className:"flex items-center gap-2 text-[10px] font-mono text-slate-400",children:"Manual Mode"})]}),e.jsxs("div",{onClick:()=>n("STORAGE_DETAILS"),className:"bg-slate-900 border border-slate-800 p-6 rounded-2xl hover:border-purple-500 cursor-pointer group transition-all",children:[e.jsx("div",{className:"flex justify-between items-start mb-4",children:e.jsx("div",{className:"p-3 bg-purple-900/20 rounded-xl text-purple-400 group-hover:scale-110 transition-transform",children:e.jsx(us,{className:"w-8 h-8"})})}),e.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:"Storage Mesh"}),e.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Manage Cloudinary pools and CDN nodes."}),e.jsxs("div",{className:"flex items-center gap-2 text-[10px] font-mono text-slate-400",children:[e.jsx(re,{className:"w-3 h-3"})," 4 Active Nodes"]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider mb-4 px-2",children:"Live Node Status"}),e.jsx("div",{className:"grid md:grid-cols-4 gap-4",children:f.map(d=>e.jsxs("div",{className:"bg-slate-900 border border-slate-800 p-4 rounded-xl relative overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h4",{className:"font-bold text-white text-xs",children:d.name}),e.jsx("span",{className:`text-[9px] font-bold px-1.5 py-0.5 rounded ${d.status==="HEALTHY"?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:d.status})]}),e.jsx("div",{className:"w-full bg-slate-800 h-1 rounded-full overflow-hidden mt-2",children:e.jsx("div",{className:`h-full rounded-full ${d.used>90?"bg-red-500":"bg-blue-500"}`,style:{width:`${d.used/d.limit*100}%`}})})]},d.id))})]})]})},Rs=()=>{const[s,n]=a.useState("LIST"),[f,N]=a.useState([]),[r,g]=a.useState(null),[i,m]=a.useState(!1);a.useEffect(()=>{l()},[]);const l=async()=>{const t=await p.getStaffList();N(t)},x=t=>{g(t),n("DETAIL")};return s==="DETAIL"&&r?e.jsxs("div",{className:"animate-fade-in-up",children:[e.jsxs("button",{onClick:()=>n("LIST"),className:"mb-6 flex items-center gap-2 text-slate-400 hover:text-white transition-colors",children:[e.jsx(q,{className:"w-4 h-4"})," Back to Team"]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs(j,{className:"bg-slate-900 border-slate-800 flex flex-col items-center text-center py-8",children:[e.jsx("div",{className:"w-24 h-24 bg-slate-800 rounded-full flex items-center justify-center font-black text-3xl text-slate-500 mb-4 border-4 border-slate-800 shadow-xl",children:r.name.substring(0,2)}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-1",children:r.name}),e.jsx("span",{className:"bg-blue-900/30 text-blue-400 px-3 py-1 rounded-full text-xs font-bold mb-6 border border-blue-900/50",children:r.role}),e.jsxs("div",{className:"w-full border-t border-slate-800 pt-6 flex justify-around",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase font-bold mb-1",children:"Status"}),e.jsxs("div",{className:`flex items-center justify-center gap-1 text-sm font-bold ${r.status==="ONLINE"?"text-green-500":"text-slate-400"}`,children:[e.jsx(he,{className:"w-2 h-2 fill-current"})," ",r.status]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase font-bold mb-1",children:"Rating"}),e.jsxs("p",{className:"text-sm font-bold text-white",children:[r.performance,"%"]})]})]})]}),e.jsxs("div",{className:"md:col-span-2 space-y-6",children:[e.jsxs(j,{className:"bg-slate-900 border-slate-800",children:[e.jsx("h3",{className:"font-bold text-white mb-4",children:"Performance Metrics"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-xl border border-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-400 mb-2",children:[e.jsx(be,{className:"w-4 h-4"})," Tickets Closed"]}),e.jsx("p",{className:"text-2xl font-black text-white",children:"1,240"})]}),e.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-xl border border-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-400 mb-2",children:[e.jsx(J,{className:"w-4 h-4"})," Avg Response"]}),e.jsx("p",{className:"text-2xl font-black text-white",children:"4m 12s"})]})]}),e.jsx("h4",{className:"font-bold text-slate-400 text-xs uppercase mb-3",children:"Activity Log"}),e.jsx("div",{className:"space-y-2",children:[1,2,3].map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-800/30 rounded-lg text-sm",children:[e.jsxs("span",{className:"text-slate-300",children:["Resolved Ticket #884",t]}),e.jsx("span",{className:"text-slate-500 text-xs",children:"2h ago"})]},t))})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{className:"flex-1 py-3 bg-slate-800 hover:bg-slate-700 text-white rounded-xl font-bold transition-colors",children:"Edit Role"}),e.jsx("button",{className:"flex-1 py-3 bg-red-900/20 hover:bg-red-900/40 text-red-500 border border-red-900/50 rounded-xl font-bold transition-colors",children:"Deactivate"})]})]})]})]}):e.jsxs("div",{className:"space-y-6 animate-fade-in-up",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(Z,{className:"w-6 h-6 text-blue-500"})," Team Management"]}),e.jsxs(L,{onClick:()=>m(!0),className:"bg-blue-600 hover:bg-blue-700 text-xs flex items-center gap-2",children:[e.jsx(Be,{className:"w-4 h-4"})," Add Staff"]})]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:f.map(t=>e.jsxs(j,{className:"bg-slate-900 border-slate-800 relative group hover:border-blue-500/30 transition-all cursor-pointer",onClick:()=>x(t),children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-slate-800 rounded-full flex items-center justify-center font-bold text-slate-400 group-hover:bg-blue-900/30 group-hover:text-blue-400 transition-colors",children:t.name.substring(0,2)}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-white text-sm",children:t.name}),e.jsxs("p",{className:"text-xs text-blue-400 flex items-center gap-1",children:[e.jsx(pe,{className:"w-3 h-3"})," ",t.role]})]})]}),e.jsxs("div",{className:`flex items-center gap-1 text-[10px] font-bold ${t.status==="ONLINE"?"text-green-500":"text-slate-500"}`,children:[e.jsx(he,{className:"w-2 h-2 fill-current"})," ",t.status]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-800",children:[e.jsxs("div",{className:"flex justify-between items-end mb-1",children:[e.jsxs("span",{className:"text-[10px] text-slate-500 font-bold uppercase flex items-center gap-1",children:[e.jsx(ve,{className:"w-3 h-3"})," Performance"]}),e.jsxs("span",{className:"text-xs font-mono text-white",children:[t.performance,"%"]})]}),e.jsx("div",{className:"w-full bg-slate-800 h-1.5 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full ${t.performance>90?"bg-green-500":"bg-yellow-500"}`,style:{width:`${t.performance}%`}})})]})]},t.id))})]})},Is=()=>{const[s,n]=a.useState(null),[f,N]=a.useState(!0),[r,g]=a.useState(!1),i=["Unlimited Students","Smart Data Entry (Public Link)","Instant Result Publish","WhatsApp Viral Result Link","Data Backup & Export","Fee Management System","Fee Receipts & Reports","School Branding (Logo)","No Ads on Results","✨ AI Question Generator","📱 White-label Mobile App","Behavioral Reports","Priority Support","Multiple Admin Logins"];a.useEffect(()=>{m()},[]);const m=async()=>{const t=await p.getMarketingConfig();n(t),N(!1)},l=async()=>{s&&(g(!0),await p.updateMarketingConfig(s),g(!1),alert("Marketing & Plan settings updated!"))},x=(t,c)=>{if(!s||!s.planFeatures)return;const v=s.planFeatures[t];let b;v.includes(c)?b=v.filter(h=>h!==c):b=[...v,c],n({...s,planFeatures:{...s.planFeatures,[t]:b}})};return f||!s?e.jsx("div",{children:"Loading Command Center..."}):e.jsxs("div",{className:"max-w-6xl mx-auto space-y-8 animate-fade-in-up",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[e.jsx(ge,{className:"w-6 h-6 text-yellow-500"})," Marketing Command Center"]}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Control Pricing, Offers & Plan Features"})]}),e.jsx(L,{onClick:l,disabled:r,className:"bg-green-600 hover:bg-green-700",children:r?"Saving...":e.jsxs(e.Fragment,{children:[e.jsx(je,{className:"w-4 h-4 mr-2"})," Save Changes"]})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs(j,{className:"bg-slate-900 border-slate-800",children:[e.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx(ws,{className:"w-5 h-5 text-orange-500"})," Flash Sale Engine"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-800 rounded-lg",children:[e.jsx("span",{className:"text-sm text-white font-bold",children:"Activate Flash Sale"}),e.jsx("input",{type:"checkbox",className:"w-5 h-5 accent-orange-500",checked:s.flashSaleActive,onChange:t=>n({...s,flashSaleActive:t.target.checked})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase font-bold block mb-1",children:"Countdown End Time"}),e.jsx(O,{type:"datetime-local",value:s.flashSaleEndTime||"",onChange:t=>n({...s,flashSaleEndTime:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase font-bold block mb-1",children:"Banner Text"}),e.jsx(O,{placeholder:"Monsoon Offer: 50% OFF Ends Soon!",value:s.flashSaleText||"",onChange:t=>n({...s,flashSaleText:t.target.value})})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-800 rounded-lg mt-2",children:[e.jsx("span",{className:"text-sm text-white font-bold",children:"Global Urgency Banner"}),e.jsx("input",{type:"checkbox",className:"w-5 h-5 accent-red-500",checked:s.showUrgencyBanner,onChange:t=>n({...s,showUrgencyBanner:t.target.checked})})]})]})]}),e.jsxs(j,{className:"bg-slate-900 border-slate-800",children:[e.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx(le,{className:"w-5 h-5 text-green-500"})," Dynamic Pricing"]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"text-xs text-slate-500 uppercase font-bold block mb-1 flex items-center gap-1",children:[e.jsx(He,{className:"w-3 h-3"})," Billing Cycle Display"]}),e.jsx(O,{placeholder:"/year",value:s.billingCycle||"/year",onChange:t=>n({...s,billingCycle:t.target.value}),className:"font-mono text-center text-yellow-400"})]}),e.jsxs("div",{className:"mb-6 p-4 bg-slate-800/50 rounded-xl border border-slate-700",children:[e.jsx("h4",{className:"text-sm font-black text-blue-400 uppercase mb-3",children:"Plan B: Smart Campus"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] text-slate-500 uppercase font-bold",children:"Selling Price (₹)"}),e.jsx("input",{className:"w-full bg-slate-900 border border-slate-600 rounded p-2 text-white font-mono",type:"number",value:s.smartPlanPrice,onChange:t=>n({...s,smartPlanPrice:parseInt(t.target.value)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] text-slate-500 uppercase font-bold",children:"Fake Original (₹)"}),e.jsx("input",{className:"w-full bg-slate-900 border border-slate-600 rounded p-2 text-slate-400 font-mono",type:"number",value:s.smartPlanOriginal,onChange:t=>n({...s,smartPlanOriginal:parseInt(t.target.value)})})]})]}),e.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[e.jsx(z,{className:"w-4 h-4 text-red-500"}),e.jsx("label",{className:"text-xs text-slate-400",children:"Seats Left Display:"}),e.jsx("input",{className:"w-16 bg-slate-900 border border-slate-600 rounded p-1 text-white text-center font-bold",type:"number",value:s.smartPlanSeatsLeft,onChange:t=>n({...s,smartPlanSeatsLeft:parseInt(t.target.value)})})]})]}),e.jsxs("div",{className:"p-4 bg-slate-800/50 rounded-xl border border-slate-700",children:[e.jsx("h4",{className:"text-sm font-black text-purple-400 uppercase mb-3",children:"Plan C: Institute Pro"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] text-slate-500 uppercase font-bold",children:"Selling Price (₹)"}),e.jsx("input",{className:"w-full bg-slate-900 border border-slate-600 rounded p-2 text-white font-mono",type:"number",value:s.proPlanPrice,onChange:t=>n({...s,proPlanPrice:parseInt(t.target.value)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] text-slate-500 uppercase font-bold",children:"Fake Original (₹)"}),e.jsx("input",{className:"w-full bg-slate-900 border border-slate-600 rounded p-2 text-slate-400 font-mono",type:"number",value:s.proPlanOriginal,onChange:t=>n({...s,proPlanOriginal:parseInt(t.target.value)})})]})]}),e.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[e.jsx(z,{className:"w-4 h-4 text-red-500"}),e.jsx("label",{className:"text-xs text-slate-400",children:"Seats Left Display:"}),e.jsx("input",{className:"w-16 bg-slate-900 border border-slate-600 rounded p-1 text-white text-center font-bold",type:"number",value:s.proPlanSeatsLeft,onChange:t=>n({...s,proPlanSeatsLeft:parseInt(t.target.value)})})]})]})]})]}),e.jsxs(j,{className:"bg-slate-900 border-slate-800",children:[e.jsxs("h3",{className:"font-bold text-white mb-6 flex items-center gap-2",children:[e.jsx(Ns,{className:"w-5 h-5 text-blue-400"})," Feature Assignment Matrix"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-800 text-xs uppercase text-slate-400",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4",children:"Feature Name"}),e.jsx("th",{className:"p-4 text-center text-slate-300",children:"Starter (Free)"}),e.jsx("th",{className:"p-4 text-center text-blue-400",children:"Smart"}),e.jsx("th",{className:"p-4 text-center text-purple-400",children:"Pro"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-800",children:i.map(t=>{var c,v,b;return e.jsxs("tr",{className:"hover:bg-slate-800/50",children:[e.jsx("td",{className:"p-3 text-slate-300",children:t}),e.jsx("td",{className:"p-3 text-center",children:e.jsx("input",{type:"checkbox",checked:(c=s.planFeatures)==null?void 0:c.starter.includes(t),onChange:()=>x("starter",t),className:"w-4 h-4 accent-slate-500"})}),e.jsx("td",{className:"p-3 text-center",children:e.jsx("input",{type:"checkbox",checked:(v=s.planFeatures)==null?void 0:v.smart.includes(t),onChange:()=>x("smart",t),className:"w-4 h-4 accent-blue-500"})}),e.jsx("td",{className:"p-3 text-center",children:e.jsx("input",{type:"checkbox",checked:(b=s.planFeatures)==null?void 0:b.pro.includes(t),onChange:()=>x("pro",t),className:"w-4 h-4 accent-purple-500"})})]},t)})})]})})]}),e.jsx(j,{className:"bg-gradient-to-r from-yellow-900/30 to-orange-900/30 border border-yellow-500/30",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-white text-lg flex items-center gap-2",children:[e.jsx(M,{className:"w-5 h-5 text-yellow-400"})," Golden Hour Strategy (Feature Tasting)"]}),e.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"Unlock 'Pro' features for ALL free users temporarily to increase upgrade desire."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`text-xs font-bold uppercase ${s.globalTrialMode?"text-green-400 animate-pulse":"text-slate-500"}`,children:s.globalTrialMode?"ACTIVE NOW":"INACTIVE"}),e.jsx("button",{onClick:()=>n({...s,globalTrialMode:!s.globalTrialMode}),className:`w-14 h-8 rounded-full transition-colors relative ${s.globalTrialMode?"bg-green-500":"bg-slate-700"}`,children:e.jsx("div",{className:`absolute top-1 left-1 w-6 h-6 bg-white rounded-full transition-transform ${s.globalTrialMode?"translate-x-6":"translate-x-0"}`})})]})]})})]})},Ds=()=>{const[s,n]=a.useState([]),[f,N]=a.useState([]),[r,g]=a.useState(""),[i,m]=a.useState(!0),[l,x]=a.useState(null),[t,c]=a.useState(365),[v,b]=a.useState(!1),[h,E]=a.useState(!1),[w,T]=a.useState(null),[I,D]=a.useState(!1);a.useEffect(()=>{C()},[]),a.useEffect(()=>{let u=s;if(v){const S=new Date;S.setDate(S.getDate()-30),u=u.filter(A=>A.lastActive?new Date(A.lastActive)<S:!0)}if(r){const S=r.toLowerCase();u=u.filter(A=>{var B;return A.name.toLowerCase().includes(S)||A.adminEmail.toLowerCase().includes(S)||((B=A.place)==null?void 0:B.toLowerCase().includes(S))})}N(u)},[r,s,v]);const C=async()=>{m(!0);const u=await p.getAllSchools();n(u),N(u),m(!1)},k=async()=>{if(!l||!confirm(`Upgrade ${l.name} to PRO for ${t} days?`))return;(await p.manuallyUpgradeSchool(l.id,!0,t)).success?(alert("Upgrade Successful! School now has Pro access."),x(null),C()):alert("Upgrade Failed")},d=async()=>{if(!l||!confirm(`Revoke PRO access from ${l.name}?`))return;(await p.manuallyUpgradeSchool(l.id,!1,0)).success?(alert("Access Revoked."),x(null),C()):alert("Failed")},R=async()=>{if(!l)return;D(!0);const u=await p.getSchoolDeepAnalytics(l.id);T(u),D(!1),E(!0)},X=async()=>{if(!l)return;const u=`CRITICAL WARNING: This will permanently DELETE ${l.name} and ALL its data.

Type 'DELETE' to confirm.`;if(prompt(u)!=="DELETE")return;const A=await p.deleteSchool(l.id);A.success?(alert("School Deleted Successfully."),x(null),C()):alert("Delete Failed: "+A.message)},K=async()=>{if(!l||!confirm(`This will wipe all STUDENTS, CLASSES, and MARKS for ${l.name}.
The school account itself will remain.

Continue?`))return;const u=await p.resetSchoolData(l.id);u.success?(alert("Academic data wiped successfully."),C()):alert("Reset Failed: "+u.message)};return e.jsxs("div",{className:"h-full flex flex-col space-y-6 animate-fade-in-up",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center bg-slate-900 p-4 rounded-xl border border-slate-800 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Y,{className:"w-6 h-6 text-blue-500"}),e.jsx("h2",{className:"text-xl font-bold text-white",children:"School Manager"}),e.jsxs("span",{className:"bg-slate-800 text-slate-400 px-2 py-0.5 rounded text-xs",children:[f.length," / ",s.length]})]}),e.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[e.jsxs("button",{onClick:()=>b(!v),className:`px-3 py-2 rounded-lg text-xs font-bold border transition-colors flex items-center gap-2 whitespace-nowrap ${v?"bg-red-900/20 border-red-500 text-red-400":"bg-slate-800 border-slate-700 text-slate-400 hover:text-white"}`,children:[e.jsx(J,{className:"w-3 h-3"})," Inactive ",v&&"(>30d)"]}),e.jsxs("div",{className:"relative w-full md:w-64",children:[e.jsx(W,{className:"absolute left-3 top-2.5 w-4 h-4 text-slate-500"}),e.jsx("input",{type:"text",placeholder:"Search schools...",value:r,onChange:u=>g(u.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-lg pl-9 pr-4 py-2 text-sm text-white focus:outline-none focus:ring-2 focus:ring-blue-600"})]})]})]}),e.jsx(j,{className:"flex-1 p-0 bg-slate-900 border-slate-800 overflow-hidden",children:e.jsx("div",{className:"overflow-y-auto h-[600px] custom-scrollbar",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-800 text-slate-400 text-xs uppercase sticky top-0 z-10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4",children:"School Name"}),e.jsx("th",{className:"p-4",children:"Admin Email"}),e.jsx("th",{className:"p-4 text-center",children:"Status"}),e.jsx("th",{className:"p-4 text-center",children:"Students"}),e.jsx("th",{className:"p-4 text-center",children:"Expiry"}),e.jsx("th",{className:"p-4 text-center",children:"Last Active"}),e.jsx("th",{className:"p-4 text-center",children:"Actions"})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-800 text-slate-300",children:[f.map(u=>{const S=!u.lastActive||new Date().getTime()-new Date(u.lastActive).getTime()>2592e6;return e.jsxs("tr",{className:"hover:bg-slate-800/50 transition-colors",children:[e.jsxs("td",{className:"p-4 font-bold text-white",children:[u.name,e.jsx("p",{className:"text-[10px] text-slate-500 font-normal",children:u.place})]}),e.jsx("td",{className:"p-4",children:u.adminEmail}),e.jsx("td",{className:"p-4 text-center",children:e.jsx("span",{className:`px-2 py-1 rounded text-[10px] font-bold ${u.isPro?"bg-green-500/20 text-green-400":"bg-slate-700 text-slate-400"}`,children:u.isPro?"PRO":"FREE"})}),e.jsx("td",{className:"p-4 text-center",children:u.studentCount}),e.jsx("td",{className:"p-4 text-center font-mono text-xs",children:u.expiryDate?new Date(u.expiryDate).toLocaleDateString():"-"}),e.jsx("td",{className:`p-4 text-center font-mono text-xs ${S?"text-red-400 font-bold":"text-slate-500"}`,children:u.lastActive?new Date(u.lastActive).toLocaleDateString():"Never"}),e.jsx("td",{className:"p-4 text-center",children:e.jsx("button",{onClick:()=>x(u),className:"p-2 hover:bg-slate-700 rounded-full transition-colors text-slate-400 hover:text-white",children:e.jsx(js,{className:"w-4 h-4"})})})]},u.id)}),f.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"p-8 text-center text-slate-500",children:"No schools found matching your criteria."})})]})]})})}),l&&!h&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-4",children:e.jsxs(j,{className:"w-full max-w-md border-t-4 border-t-blue-500 bg-slate-900",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:l.name}),e.jsx("p",{className:"text-sm text-slate-400",children:l.isPro?"Currently Pro Plan":"Currently Free Plan"}),e.jsxs("p",{className:"text-[10px] text-slate-500 mt-1 flex items-center gap-1",children:[e.jsx(J,{className:"w-3 h-3"})," Last Active: ",l.lastActive?new Date(l.lastActive).toDateString():"Never"]})]}),e.jsx("button",{onClick:()=>x(null),className:"text-slate-500 hover:text-white",children:"✕"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("button",{onClick:R,className:"w-full py-3 bg-slate-800 hover:bg-slate-700 text-white rounded-xl font-bold flex items-center justify-center gap-2 border border-slate-700",children:I?"Scanning...":e.jsxs(e.Fragment,{children:[e.jsx(V,{className:"w-4 h-4 text-blue-400"})," View Deep Intelligence"]})}),e.jsx("div",{className:"h-px bg-slate-800 my-2"}),l.isPro?e.jsxs("div",{className:"bg-red-900/20 p-4 rounded-xl border border-red-900/50",children:[e.jsxs("h4",{className:"text-red-400 font-bold mb-2 flex items-center gap-2",children:[e.jsx($,{className:"w-4 h-4"})," Revoke Access"]}),e.jsx("p",{className:"text-xs text-red-200 mb-3",children:"Downgrade this school back to Free Plan."}),e.jsx("button",{onClick:d,className:"w-full bg-red-600 hover:bg-red-700 text-white font-bold rounded py-2 text-xs",children:"Revoke Pro Status"})]}):e.jsxs("div",{className:"bg-green-900/20 p-4 rounded-xl border border-green-900/50",children:[e.jsxs("h4",{className:"text-green-400 font-bold mb-2 flex items-center gap-2",children:[e.jsx($e,{className:"w-4 h-4"})," Grant Special Upgrade"]}),e.jsx("p",{className:"text-xs text-green-200 mb-3",children:"Give this school free PRO access."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",value:t,onChange:u=>c(parseInt(u.target.value)),className:"w-20 bg-slate-800 border border-slate-700 rounded p-2 text-white text-sm"}),e.jsxs("button",{onClick:k,className:"flex-1 bg-green-600 hover:bg-green-700 text-white font-bold rounded py-2 text-xs",children:["Grant ",t," Days"]})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-800",children:[e.jsxs("p",{className:"text-[10px] font-bold text-red-500 uppercase mb-2 flex items-center gap-1",children:[e.jsx(F,{className:"w-3 h-3"})," Danger Zone"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:K,className:"flex-1 py-2 bg-slate-800 border border-red-900/30 text-red-400 hover:bg-red-900/20 rounded-lg text-xs font-bold flex items-center justify-center gap-1",children:[e.jsx(bs,{className:"w-3 h-3"})," Wipe Data"]}),e.jsxs("button",{onClick:X,className:"flex-1 py-2 bg-red-900/20 hover:bg-red-900/40 text-red-500 border border-red-900/50 rounded-lg text-xs font-bold flex items-center justify-center gap-1",children:[e.jsx(ce,{className:"w-3 h-3"})," Delete School"]})]})]})]})]})}),h&&w&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/90 p-4 animate-fade-in-up",children:e.jsxs(j,{className:"w-full max-w-4xl h-[90vh] bg-slate-950 border border-slate-800 flex flex-col p-0 overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-slate-800 flex justify-between items-center bg-slate-900",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-slate-800 rounded-lg flex items-center justify-center border border-slate-700",children:e.jsx(ve,{className:"w-5 h-5 text-blue-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:l==null?void 0:l.name}),e.jsx("p",{className:"text-xs text-slate-400",children:"Data Intelligence Report"})]})]}),e.jsx("button",{onClick:()=>E(!1),className:"p-2 hover:bg-slate-800 rounded-full text-slate-400 hover:text-white",children:e.jsx(ne,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:`p-4 rounded-xl border ${w.health.riskLevel==="HIGH"?"bg-red-900/20 border-red-900/50":w.health.riskLevel==="MEDIUM"?"bg-orange-900/20 border-orange-900/50":"bg-green-900/20 border-green-900/50"}`,children:[e.jsx("p",{className:"text-xs font-bold uppercase opacity-70 mb-1 text-white",children:"Churn Risk"}),e.jsx("h3",{className:`text-2xl font-black ${w.health.riskLevel==="HIGH"?"text-red-500":w.health.riskLevel==="MEDIUM"?"text-orange-500":"text-green-500"}`,children:w.health.riskLevel}),e.jsxs("p",{className:"text-[10px] text-slate-400 mt-2",children:["Inactive for ",w.health.daysInactive," days"]})]}),e.jsxs("div",{className:"p-4 bg-slate-900 rounded-xl border border-slate-800",children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase mb-1",children:"Database Footprint"}),e.jsxs("h3",{className:"text-2xl font-black text-white",children:[w.storage.usedMB," MB"]}),e.jsx("div",{className:"w-full bg-slate-800 h-1.5 rounded-full mt-3 overflow-hidden",children:e.jsx("div",{className:"bg-blue-500 h-full rounded-full",style:{width:`${w.storage.loadPercent}%`}})}),e.jsxs("p",{className:"text-[10px] text-slate-400 mt-1",children:[w.storage.loadPercent,"% of Free Tier Limit"]})]}),e.jsxs("div",{className:"p-4 bg-slate-900 rounded-xl border border-slate-800",children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase mb-1",children:"User Base"}),e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-black text-white",children:w.counts.students}),e.jsx("p",{className:"text-[10px] text-slate-400",children:"Students"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-300",children:w.counts.teachers}),e.jsx("p",{className:"text-[10px] text-slate-400",children:"Teachers"})]})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx(V,{className:"w-4 h-4 text-purple-500"})," Feature Usage Heatmap"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-slate-900 p-4 rounded-xl border border-slate-800",children:[e.jsx("p",{className:"text-xs text-slate-500 font-bold uppercase",children:"Results"}),e.jsx("p",{className:"text-xl font-bold text-white mt-1",children:w.features.results}),e.jsx("p",{className:"text-[10px] text-slate-600",children:"Marks Entries"})]}),e.jsxs("div",{className:"bg-slate-900 p-4 rounded-xl border border-slate-800",children:[e.jsx("p",{className:"text-xs text-slate-500 font-bold uppercase",children:"Fees"}),e.jsx("p",{className:"text-xl font-bold text-white mt-1",children:w.features.fees}),e.jsx("p",{className:"text-[10px] text-slate-600",children:"Transactions"})]}),e.jsxs("div",{className:"bg-slate-900 p-4 rounded-xl border border-slate-800",children:[e.jsx("p",{className:"text-xs text-slate-500 font-bold uppercase",children:"Exams"}),e.jsx("p",{className:"text-xl font-bold text-white mt-1",children:w.features.exams}),e.jsx("p",{className:"text-[10px] text-slate-600",children:"Created"})]}),e.jsxs("div",{className:"bg-slate-900 p-4 rounded-xl border border-slate-800",children:[e.jsx("p",{className:"text-xs text-slate-500 font-bold uppercase",children:"Notices"}),e.jsx("p",{className:"text-xl font-bold text-white mt-1",children:w.features.communication}),e.jsx("p",{className:"text-[10px] text-slate-600",children:"Sent"})]})]})]}),e.jsxs("div",{className:"bg-slate-900 p-4 rounded-xl border border-slate-800",children:[e.jsxs("h4",{className:"text-sm font-bold text-white mb-3 flex items-center gap-2",children:[e.jsx(P,{className:"w-4 h-4 text-slate-500"})," Technical Metadata"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[e.jsxs("div",{className:"flex justify-between p-2 bg-slate-950 rounded border border-slate-800",children:[e.jsx("span",{className:"text-slate-500",children:"School ID"}),e.jsx("span",{className:"font-mono text-slate-300",children:l==null?void 0:l.id})]}),e.jsxs("div",{className:"flex justify-between p-2 bg-slate-950 rounded border border-slate-800",children:[e.jsx("span",{className:"text-slate-500",children:"Joined On"}),e.jsx("span",{className:"font-mono text-slate-300",children:new Date(w.health.joinedAt).toLocaleDateString()})]}),e.jsxs("div",{className:"flex justify-between p-2 bg-slate-950 rounded border border-slate-800",children:[e.jsx("span",{className:"text-slate-500",children:"Admin Email"}),e.jsx("span",{className:"font-mono text-slate-300",children:l==null?void 0:l.adminEmail})]}),e.jsxs("div",{className:"flex justify-between p-2 bg-slate-950 rounded border border-slate-800",children:[e.jsx("span",{className:"text-slate-500",children:"Plan Type"}),e.jsx("span",{className:`font-bold ${l!=null&&l.isPro?"text-green-400":"text-slate-400"}`,children:l!=null&&l.isPro?"PRO":"FREE"})]})]})]})]})]})})]})},Ls=()=>{var m,l,x;const[s,n]=a.useState(null),[f,N]=a.useState(!0);a.useEffect(()=>{r()},[]);const r=async()=>{const t=await p.getAttributionStats();n(t),N(!1)};if(f)return e.jsx("div",{children:"Loading Growth Metrics..."});const g=(s==null?void 0:s.sources)||[],i=g.reduce((t,c)=>t+c.count,0);return e.jsxs("div",{className:"space-y-6 animate-fade-in-up",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[e.jsx(M,{className:"w-6 h-6 text-yellow-400 fill-yellow-400"})," Viral Loop Analytics"]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs(j,{className:"bg-slate-900 border-slate-800",children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase",children:"Total Referrals"}),e.jsx("h3",{className:"text-4xl font-black text-white mt-1",children:i}),e.jsxs("p",{className:"text-xs text-green-400 mt-2 flex items-center gap-1",children:[e.jsx(z,{className:"w-3 h-3"})," +12% this week"]})]}),e.jsxs(j,{className:"bg-slate-900 border-slate-800",children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase",children:"Top Source"}),e.jsx("h3",{className:"text-2xl font-black text-white mt-1",children:((m=g[0])==null?void 0:m.source)||"None"}),e.jsxs("p",{className:"text-xs text-slate-400 mt-2",children:[((l=g[0])==null?void 0:l.count)||0," Signups"]})]}),e.jsxs(j,{className:"bg-slate-900 border-slate-800",children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase",children:"Attributed Revenue"}),e.jsxs("h3",{className:"text-4xl font-black text-white mt-1",children:["₹",s==null?void 0:s.revenue.toLocaleString()]}),e.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"From viral channels"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs(j,{className:"bg-slate-900 border-slate-800",children:[e.jsx("h3",{className:"font-bold text-white mb-6",children:"Acquisition Channels"}),e.jsxs("div",{className:"space-y-4",children:[g.map((t,c)=>{const v=t.count/i*100;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1 text-slate-300",children:[e.jsx("span",{className:"font-bold",children:t.source.replace("_"," ")}),e.jsxs("span",{children:[t.count," (",v.toFixed(1),"%)"]})]}),e.jsx("div",{className:"w-full bg-slate-800 h-2 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full ${c===0?"bg-blue-500":c===1?"bg-purple-500":"bg-slate-600"}`,style:{width:`${v}%`}})})]},c)}),g.length===0&&e.jsx("p",{className:"text-slate-500 text-sm text-center",children:"No referral data yet."})]})]}),e.jsxs(j,{className:"bg-slate-900 border-slate-800",children:[e.jsx("h3",{className:"font-bold text-white mb-6",children:"Top Viral Schools"}),e.jsxs("div",{className:"space-y-4",children:[(x=s==null?void 0:s.topReferrers)==null?void 0:x.map((t,c)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-800/50 rounded-xl border border-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-slate-700 rounded-full flex items-center justify-center font-bold text-slate-400 text-xs",children:c+1}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-white",children:t.name}),e.jsxs("p",{className:"text-[10px] text-slate-500",children:["ID: ",t.id.substring(0,8),"..."]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-lg font-bold text-green-400",children:t.count}),e.jsx("p",{className:"text-[10px] text-slate-500",children:"Refers"})]})]},c)),(!(s!=null&&s.topReferrers)||s.topReferrers.length===0)&&e.jsx("p",{className:"text-slate-500 text-sm text-center",children:"No top referrers."})]})]})]})]})},ks=()=>{const[s,n]=a.useState([]),[f,N]=a.useState(!0),[r,g]=a.useState(""),[i,m]=a.useState(""),[l,x]=a.useState(!1);a.useEffect(()=>{t()},[]);const t=async()=>{N(!0);const b=await p.getPendingQuestions();n(b),N(!1)},c=async(b,h)=>{await p.moderateQuestion(b,h),t()},v=async()=>{if(!r||!i)return alert("Name and Classes required");const b=i.split(",").map(E=>E.trim()).filter(E=>E);x(!0);const h=await p.createCustomSyllabus(r,b,!0);x(!1),h.success?(alert("Global Syllabus Created! Schools can now select this template."),g(""),m("")):alert("Failed: "+h.message)};return f?e.jsx("div",{children:"Loading Moderation Queue..."}):e.jsxs("div",{className:"space-y-6 animate-fade-in-up",children:[e.jsxs(j,{className:"bg-slate-900 border-slate-800",children:[e.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx(We,{className:"w-5 h-5 text-green-500"})," Global Syllabus Manager"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(O,{placeholder:"Syllabus Name (e.g. Kerala State 2025)",value:r,onChange:b=>g(b.target.value),className:"bg-slate-950 border-slate-700 text-white"}),e.jsx(O,{placeholder:"Classes (e.g. 1, 2, ... 10, +1, +2)",value:i,onChange:b=>m(b.target.value),className:"bg-slate-950 border-slate-700 text-white"})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx(L,{onClick:v,disabled:l,className:"bg-green-600 hover:bg-green-700 text-white flex items-center gap-2",children:l?"Creating...":e.jsxs(e.Fragment,{children:[e.jsx(cs,{className:"w-4 h-4"})," Create Global Template"]})})}),e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"Note: After creating, login as a School Admin (Ghost Login) to populate default subjects if needed."})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-slate-800",children:[e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(Ve,{className:"w-5 h-5 text-purple-400"})," Content Moderation"]}),e.jsx("button",{onClick:t,className:"p-2 bg-slate-800 rounded-full hover:bg-slate-700",children:e.jsx(G,{className:"w-4 h-4 text-white"})})]}),e.jsxs(j,{className:"bg-slate-900 border-slate-800 p-0 overflow-hidden",children:[e.jsx("div",{className:"p-4 bg-slate-800 border-b border-slate-700 flex justify-between",children:e.jsxs("span",{className:"text-sm font-bold text-white",children:["Pending Questions (",s.length,")"]})}),e.jsxs("div",{className:"overflow-y-auto max-h-[500px] custom-scrollbar",children:[s.length===0&&e.jsx("p",{className:"text-center text-slate-500 py-10",children:"No pending contributions."}),s.map(b=>e.jsx("div",{className:"p-4 border-b border-slate-800 hover:bg-slate-800/30 transition-colors",children:e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex gap-2 mb-1",children:[e.jsx("span",{className:"text-[10px] bg-blue-900/30 text-blue-400 px-2 py-0.5 rounded border border-blue-900/50",children:b.subject}),e.jsx("span",{className:"text-[10px] bg-slate-800 text-slate-400 px-2 py-0.5 rounded",children:b.topic})]}),e.jsx("p",{className:"font-bold text-white text-sm mb-2",children:b.text}),e.jsx("div",{className:"grid grid-cols-2 gap-2 text-xs text-slate-400 mb-2",children:b.options.map((h,E)=>e.jsxs("span",{className:E===b.correctOptionIndex?"text-green-400 font-bold":"",children:[E+1,". ",h]},E))}),e.jsxs("p",{className:"text-[10px] text-slate-600 flex items-center gap-1",children:[e.jsx(Y,{className:"w-3 h-3"})," Contributed by: ",b.contributedBy]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>c(b.id,"APPROVE"),className:"p-2 bg-green-900/20 text-green-500 hover:bg-green-900/40 rounded-lg transition-colors",children:e.jsx(Ne,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>c(b.id,"REJECT"),className:"p-2 bg-red-900/20 text-red-500 hover:bg-red-900/40 rounded-lg transition-colors",children:e.jsx(Ye,{className:"w-5 h-5"})})]})]})},b.id))]})]})]})},Us=({school:s})=>e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 animate-fade-in-up",children:[e.jsxs(j,{className:"bg-slate-900 border-slate-800",children:[e.jsxs("h3",{className:"text-white font-bold mb-4 flex items-center gap-2",children:[e.jsx(pe,{className:"w-5 h-5 text-blue-500"})," Basic Information"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between border-b border-slate-800 pb-2",children:[e.jsx("span",{className:"text-slate-500 text-sm",children:"School Name"}),e.jsx("span",{className:"text-white font-bold",children:s.name})]}),e.jsxs("div",{className:"flex justify-between border-b border-slate-800 pb-2",children:[e.jsxs("span",{className:"text-slate-500 text-sm flex items-center gap-2",children:[e.jsx(Xe,{className:"w-3 h-3"})," Location"]}),e.jsx("span",{className:"text-white",children:s.place||"N/A"})]}),e.jsxs("div",{className:"flex justify-between border-b border-slate-800 pb-2",children:[e.jsxs("span",{className:"text-slate-500 text-sm flex items-center gap-2",children:[e.jsx(Ke,{className:"w-3 h-3"})," Phone"]}),e.jsx("span",{className:"text-white",children:s.phone||"N/A"})]}),e.jsxs("div",{className:"flex justify-between border-b border-slate-800 pb-2",children:[e.jsxs("span",{className:"text-slate-500 text-sm flex items-center gap-2",children:[e.jsx(Qe,{className:"w-3 h-3"})," Admin Email"]}),e.jsx("span",{className:"text-white",children:s.admin_email})]}),e.jsxs("div",{className:"flex justify-between border-b border-slate-800 pb-2",children:[e.jsx("span",{className:"text-slate-500 text-sm",children:"Created At"}),e.jsx("span",{className:"text-white font-mono text-xs",children:new Date(s.created_at).toLocaleString()})]})]})]}),e.jsxs(j,{className:"bg-slate-900 border-slate-800",children:[e.jsxs("h3",{className:"text-white font-bold mb-4 flex items-center gap-2",children:[e.jsx(re,{className:"w-5 h-5 text-purple-500"})," Web Configuration"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between border-b border-slate-800 pb-2",children:[e.jsx("span",{className:"text-slate-500 text-sm",children:"Slug / URL"}),e.jsx("span",{className:"text-white font-mono",children:s.slug||"-"})]}),e.jsxs("div",{className:"flex justify-between border-b border-slate-800 pb-2",children:[e.jsx("span",{className:"text-slate-500 text-sm",children:"Theme Color"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-4 h-4 rounded-full bg-${s.theme_color||"blue"}-500`}),e.jsx("span",{className:"text-white capitalize",children:s.theme_color||"Default"})]})]}),e.jsxs("div",{className:"flex justify-between border-b border-slate-800 pb-2",children:[e.jsx("span",{className:"text-slate-500 text-sm",children:"Public Admission"}),e.jsx("span",{className:`font-bold ${s.allow_public_admission?"text-green-500":"text-red-500"}`,children:s.allow_public_admission?"ENABLED":"DISABLED"})]}),e.jsxs("div",{className:"flex justify-between border-b border-slate-800 pb-2",children:[e.jsx("span",{className:"text-slate-500 text-sm",children:"Plan Expiry"}),e.jsx("span",{className:`font-bold ${new Date(s.expiry_date)>new Date?"text-green-500":"text-red-500"}`,children:s.expiry_date?new Date(s.expiry_date).toLocaleDateString():"N/A"})]})]})]})]}),Os=({school:s})=>{const[n,f]=a.useState(!1),N=r=>{navigator.clipboard.writeText(r),alert("Copied to clipboard!")};return e.jsx("div",{className:"animate-fade-in-up space-y-6",children:e.jsxs(j,{className:"bg-red-900/10 border-red-900/50 border",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-red-400 font-bold flex items-center gap-2",children:[e.jsx(H,{className:"w-5 h-5"})," Sensitive Configuration"]}),e.jsx("button",{onClick:()=>f(!n),className:"text-xs bg-slate-800 hover:bg-slate-700 text-white px-3 py-1.5 rounded flex items-center gap-2 transition-colors",children:n?e.jsxs(e.Fragment,{children:[e.jsx(ze,{className:"w-3 h-3"})," Hide Secrets"]}):e.jsxs(e.Fragment,{children:[e.jsx(qe,{className:"w-3 h-3"})," Reveal Secrets"]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-slate-950 p-4 rounded-xl border border-slate-800",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:"Master Recovery Key"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("code",{className:"flex-1 bg-slate-900 p-2 rounded text-sm font-mono text-yellow-500 tracking-widest",children:n?s.recovery_code||"NOT_SET":"••••-••••-••••-••••"}),e.jsx("button",{onClick:()=>N(s.recovery_code),className:"p-2 bg-slate-800 hover:bg-slate-700 text-slate-400 hover:text-white rounded transition-colors",children:e.jsx(xe,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"bg-slate-950 p-4 rounded-xl border border-slate-800",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("label",{className:"text-xs font-bold text-slate-500 uppercase flex items-center gap-2",children:[e.jsx(Je,{className:"w-3 h-3"})," Principal Access"]}),s.has_principal_login?e.jsx("span",{className:"text-[10px] text-green-500 font-bold",children:"ACTIVE"}):e.jsx("span",{className:"text-[10px] text-red-500 font-bold",children:"INACTIVE"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-slate-600 mb-1",children:"Email"}),e.jsx("div",{className:"bg-slate-900 p-2 rounded text-sm text-slate-300 font-mono",children:s.principal_email||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-slate-600 mb-1",children:"Password"}),e.jsxs("div",{className:"bg-slate-900 p-2 rounded text-sm text-slate-300 font-mono flex justify-between",children:[e.jsx("span",{children:n?s.principal_password||"N/A":"••••••••"}),n&&e.jsx(xe,{onClick:()=>N(s.principal_password),className:"w-4 h-4 cursor-pointer text-slate-500 hover:text-white"})]})]})]})]}),e.jsxs("div",{className:"bg-slate-950 p-4 rounded-xl border border-slate-800",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:"Admission Token (System Internal)"}),e.jsx("div",{className:"flex gap-2",children:e.jsx("code",{className:"flex-1 bg-slate-900 p-2 rounded text-sm font-mono text-purple-400",children:n?s.admission_token||"NULL":"••••••••••••••••"})})]})]})]})})},ye=({school:s,onRefresh:n})=>{const[f,N]=a.useState(""),[r,g]=a.useState(""),[i,m]=a.useState(!1),[l,x]=a.useState("GRANT"),t=async()=>{const c=parseInt(f);if(isNaN(c)||c<=0)return alert("Invalid amount");if(l==="DEDUCT"&&!r)return alert("Please provide a reason for deduction.");const v=l==="GRANT"?`Grant ${c} credits to ${s.name}?`:`DEDUCT ${c} credits from ${s.name}?
Reason: ${r}`;if(!confirm(v))return;m(!0);let b;l==="GRANT"?b=await p.superAdminGrantCredits(s.id,c):b=await p.superAdminDeductCredits(s.id,c,r),m(!1),b.success?(alert(`Success! New Balance: ${b.newBalance}`),N(""),g(""),n()):alert("Failed: "+b.message)};return e.jsxs("div",{className:"animate-fade-in-up space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs(j,{className:"bg-gradient-to-br from-yellow-900/40 to-orange-900/40 border-yellow-500/30 flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-yellow-500 font-bold mb-1 flex items-center gap-2",children:[e.jsx(M,{className:"w-5 h-5 fill-current"})," Wallet Balance"]}),e.jsx("p",{className:"text-xs text-yellow-200/60",children:"Available for AI & SMS"})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("span",{className:"text-5xl font-black text-white",children:s.wallet_balance||0}),e.jsx("span",{className:"text-xl text-yellow-500 font-bold ml-1",children:"CR"})]})]}),e.jsxs(j,{className:`border-t-4 ${l==="GRANT"?"border-t-green-500 bg-slate-900":"border-t-red-500 bg-red-900/10"}`,children:[e.jsxs("div",{className:"flex bg-slate-800 p-1 rounded-lg mb-4",children:[e.jsx("button",{onClick:()=>x("GRANT"),className:`flex-1 py-1.5 text-xs font-bold rounded transition-all ${l==="GRANT"?"bg-green-600 text-white":"text-slate-400 hover:text-white"}`,children:"Grant Credits"}),e.jsx("button",{onClick:()=>x("DEDUCT"),className:`flex-1 py-1.5 text-xs font-bold rounded transition-all ${l==="DEDUCT"?"bg-red-600 text-white":"text-slate-400 hover:text-white"}`,children:"Deduct / Penalty"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:"Amount"}),e.jsx(O,{type:"number",placeholder:"e.g. 500",value:f,onChange:c=>N(c.target.value),className:"bg-slate-950 border-slate-700 text-white font-mono font-bold text-lg"})]}),l==="DEDUCT"&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-1",children:"Reason (Required)"}),e.jsx(O,{placeholder:"e.g. Refund reversal / Fraud adjustment",value:r,onChange:c=>g(c.target.value),className:"bg-slate-950 border-slate-700 text-white text-sm"})]}),e.jsx(L,{onClick:t,disabled:i,className:`w-full text-white shadow-lg ${l==="GRANT"?"bg-green-600 hover:bg-green-700 shadow-green-900/20":"bg-red-600 hover:bg-red-700 shadow-red-900/20"}`,children:i?"Processing...":l==="GRANT"?e.jsxs(e.Fragment,{children:[e.jsx(is,{className:"w-4 h-4 mr-2"})," Add Credits"]}):e.jsxs(e.Fragment,{children:[e.jsx(fs,{className:"w-4 h-4 mr-2"})," Deduct Credits"]})}),l==="DEDUCT"&&e.jsxs("p",{className:"text-[10px] text-red-400 text-center flex items-center justify-center gap-1",children:[e.jsx(F,{className:"w-3 h-3"})," Caution: This will reduce the school's balance."]})]})]})]}),e.jsxs(j,{className:"bg-slate-900 border-slate-800",children:[e.jsxs("h3",{className:"text-white font-bold mb-4 flex items-center gap-2",children:[e.jsx(ds,{className:"w-5 h-5 text-blue-500"})," Recent Activity"]}),e.jsx("div",{className:"bg-slate-950 rounded-xl p-4 text-center text-slate-500 text-sm italic",children:"Use 'Infrastructure > SQL Migrator' to view raw transaction logs if needed."})]})]})},Ps=({school:s})=>{var n,f;return e.jsxs("div",{className:"animate-fade-in-up",children:[e.jsxs("h3",{className:"text-white font-bold mb-6 text-xl flex items-center gap-2",children:[e.jsx(Fs,{className:"w-6 h-6 text-indigo-500"})," Academic Database"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsx(j,{className:"bg-slate-900 border-slate-800",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-900/30 rounded-2xl flex items-center justify-center text-blue-400",children:e.jsx(Z,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-500 font-bold uppercase text-xs",children:"Total Students"}),e.jsx("h2",{className:"text-4xl font-black text-white",children:((n=s.stats)==null?void 0:n.students)||0})]})]})}),e.jsx(j,{className:"bg-slate-900 border-slate-800",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-purple-900/30 rounded-2xl flex items-center justify-center text-purple-400",children:e.jsx(Y,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-500 font-bold uppercase text-xs",children:"Active Classes"}),e.jsx("h2",{className:"text-4xl font-black text-white",children:((f=s.stats)==null?void 0:f.classes)||0})]})]})})]}),e.jsxs("div",{className:"mt-8 bg-slate-900 border border-slate-800 rounded-xl p-8 text-center",children:[e.jsx(Ze,{className:"w-16 h-16 text-slate-700 mx-auto mb-4"}),e.jsx("h3",{className:"text-white font-bold text-lg",children:"Detailed Academic View"}),e.jsx("p",{className:"text-slate-500 text-sm max-w-sm mx-auto mt-2",children:"To view individual student marks and class-level details, please login as School Admin (Ghost Login) or use the Support Desk tools."})]})]})},Fs=({className:s})=>e.jsxs("svg",{className:s,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M3 5V19C3 20.1046 7.02944 21 12 21C16.9706 21 21 20.1046 21 19V5M3 5C3 6.10457 7.02944 7 12 7C16.9706 7 21 6.10457 21 5M3 5C3 3.89543 7.02944 3 12 3C16.9706 3 21 3.89543 21 5"}),e.jsx("path",{d:"M3 12C3 13.1046 7.02944 14 12 14C16.9706 14 21 13.1046 21 12"})]}),Ms=()=>{const[s,n]=a.useState(""),[f,N]=a.useState([]),[r,g]=a.useState(!1),[i,m]=a.useState(null),[l,x]=a.useState(!1),[t,c]=a.useState("PROFILE");a.useEffect(()=>{const h=setTimeout(async()=>{if(s.length>2){g(!0);const w=(await p.getAllSchools()).filter(T=>T.name.toLowerCase().includes(s.toLowerCase())||T.adminEmail.toLowerCase().includes(s.toLowerCase())||T.id.includes(s));N(w),g(!1)}else N([])},500);return()=>clearTimeout(h)},[s]);const v=async h=>{x(!0);const E=await p.getSchoolFullDetails(h);m(E),x(!1),n(""),N([]),c("PROFILE")},b=async()=>{i&&v(i.id)};return i?e.jsxs("div",{className:"h-full flex flex-col animate-fade-in-up",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6 bg-slate-900 p-4 rounded-xl border border-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>m(null),className:"p-2 hover:bg-slate-800 rounded-full text-slate-400 hover:text-white transition-colors",children:e.jsx(q,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[i.name,i.is_pro&&e.jsx("span",{className:"text-[10px] bg-green-600 text-white px-2 py-0.5 rounded",children:"PRO"})]}),e.jsxs("p",{className:"text-xs font-mono text-slate-500",children:["ID: ",i.id]})]})]}),e.jsx("div",{className:"flex gap-2",children:["PROFILE","SECRETS","WALLET","DATA"].map(h=>e.jsxs("button",{onClick:()=>c(h),className:`px-4 py-2 rounded-lg text-xs font-bold transition-all flex items-center gap-2 ${t===h?"bg-blue-600 text-white shadow-lg":"bg-slate-800 text-slate-400 hover:text-white"}`,children:[h==="PROFILE"&&e.jsx(Y,{className:"w-4 h-4"}),h==="SECRETS"&&e.jsx(H,{className:"w-4 h-4"}),h==="WALLET"&&e.jsx(fe,{className:"w-4 h-4"}),h==="DATA"&&e.jsx(P,{className:"w-4 h-4"}),h]},h))})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:[t==="PROFILE"&&e.jsx(Us,{school:i}),t==="SECRETS"&&e.jsx(Os,{school:i}),t==="WALLET"&&e.jsx(ye,{school:i,onRefresh:b}),t==="DATA"&&e.jsx(Ps,{school:i})]})]}):e.jsxs("div",{className:"max-w-2xl mx-auto pt-10 animate-fade-in-up",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-20 h-20 bg-blue-900/30 rounded-full flex items-center justify-center mx-auto mb-4 border border-blue-500/30",children:e.jsx(W,{className:"w-10 h-10 text-blue-400"})}),e.jsx("h2",{className:"text-3xl font-black text-white",children:"School Inspector"}),e.jsx("p",{className:"text-slate-400 mt-2",children:"Access 100% data, secrets, and wallet control for any campus."})]}),e.jsxs(j,{className:"bg-slate-900 border-slate-800 p-6 relative",children:[e.jsxs("div",{className:"relative",children:[e.jsx(W,{className:"absolute left-4 top-3.5 w-5 h-5 text-slate-500"}),e.jsx("input",{className:"w-full bg-slate-950 border border-slate-700 rounded-xl pl-12 pr-4 py-3 text-white focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-all",placeholder:"Search by Name, Email, or ID...",value:s,onChange:h=>n(h.target.value),autoFocus:!0}),r&&e.jsx(me,{className:"absolute right-4 top-3.5 w-5 h-5 text-blue-500 animate-spin"})]}),f.length>0&&e.jsx("div",{className:"mt-4 space-y-2 max-h-60 overflow-y-auto custom-scrollbar",children:f.map(h=>e.jsxs("div",{onClick:()=>v(h.id),className:"p-3 bg-slate-800 hover:bg-slate-700 rounded-lg cursor-pointer flex justify-between items-center transition-colors border border-transparent hover:border-slate-600",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-white text-sm",children:h.name}),e.jsx("p",{className:"text-xs text-slate-400",children:h.adminEmail})]}),e.jsx("span",{className:`text-[10px] font-bold px-2 py-1 rounded ${h.isPro?"bg-green-900/30 text-green-400":"bg-slate-900 text-slate-500"}`,children:h.isPro?"PRO":"FREE"})]},h.id))}),s.length>2&&!r&&f.length===0&&e.jsx("p",{className:"text-center text-slate-500 mt-4 text-sm",children:"No schools found."})]}),l&&e.jsxs("div",{className:"text-center mt-8",children:[e.jsx(me,{className:"w-8 h-8 text-blue-500 animate-spin mx-auto mb-2"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Decrypting Secure Data..."})]})]})},Gs=()=>{const[s,n]=a.useState([]),[f,N]=a.useState(!1),[r,g]=a.useState(null);a.useEffect(()=>{i()},[]);const i=async()=>{N(!0),g(null);const x=await p.getFraudRiskReport();n(x),N(!1)},m=async x=>{const t=await p.getSchoolFullDetails(x);g(t)},l=async x=>{if(!confirm("Are you sure you want to delete/ban this school? This is destructive."))return;const t=await p.deleteSchool(x);t.success?(alert("School Banned/Deleted."),i()):alert("Failed: "+t.message)};return e.jsxs("div",{className:"h-full flex flex-col animate-fade-in-up",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[e.jsx($,{className:"w-6 h-6 text-red-500"})," Fraud & Risk Scanner"]}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Detect suspicious wallet activity and fake accounts."})]}),e.jsxs(L,{onClick:i,disabled:f,className:"bg-slate-800 text-white hover:bg-slate-700 flex items-center gap-2",children:[e.jsx(G,{className:`w-4 h-4 ${f?"animate-spin":""}`})," Run Scan"]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6 h-full",children:[e.jsxs("div",{className:"md:col-span-1 bg-slate-900 border border-slate-800 rounded-xl overflow-hidden flex flex-col",children:[e.jsx("div",{className:"p-4 border-b border-slate-800 bg-red-900/10",children:e.jsxs("h3",{className:"font-bold text-red-400 text-sm flex items-center gap-2",children:[e.jsx(F,{className:"w-4 h-4"})," High Risk Accounts (",s.length,")"]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-2 space-y-2",children:[f&&e.jsx("p",{className:"text-center text-slate-500 py-10",children:"Scanning Database..."}),!f&&s.length===0&&e.jsxs("div",{className:"text-center py-10 text-green-500",children:[e.jsx($,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No threats detected."})]}),s.map(x=>e.jsxs("div",{onClick:()=>m(x.id),className:`p-3 rounded-lg border cursor-pointer transition-all ${(r==null?void 0:r.id)===x.id?"bg-slate-800 border-red-500":"bg-slate-900 border-slate-800 hover:border-slate-600"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsx("h4",{className:"font-bold text-white text-sm truncate w-2/3",children:x.name}),e.jsxs("span",{className:"text-xs font-mono text-red-400 font-bold",children:[x.riskScore,"% Risk"]})]}),e.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:x.flags.map((t,c)=>e.jsx("span",{className:"text-[9px] bg-red-500/20 text-red-300 px-1.5 py-0.5 rounded",children:t},c))}),e.jsxs("p",{className:"text-[10px] text-slate-500 font-mono",children:["Bal: ",x.balance," CR"]})]},x.id))]})]}),e.jsx("div",{className:"md:col-span-2",children:r?e.jsx("div",{className:"space-y-6",children:e.jsxs(j,{className:"bg-slate-900 border-slate-800",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:r.name}),e.jsx("p",{className:"text-sm text-slate-400",children:r.admin_email}),e.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["ID: ",r.id]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("button",{onClick:()=>l(r.id),className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white text-xs font-bold rounded-lg flex items-center gap-2",children:[e.jsx(hs,{className:"w-4 h-4"})," Ban / Delete"]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs text-slate-300 mb-6",children:[e.jsxs("div",{className:"p-3 bg-slate-950 rounded border border-slate-800",children:[e.jsx("span",{className:"text-slate-500 block mb-1",children:"Phone"}),r.phone]}),e.jsxs("div",{className:"p-3 bg-slate-950 rounded border border-slate-800",children:[e.jsx("span",{className:"text-slate-500 block mb-1",children:"Place"}),r.place]})]}),e.jsx("h4",{className:"text-sm font-bold text-white mb-3",children:"Corrective Action (Wallet)"}),e.jsx(ye,{school:r,onRefresh:()=>m(r.id)})]})}):e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-600 border-2 border-dashed border-slate-800 rounded-xl bg-slate-900/50",children:[e.jsx(W,{className:"w-16 h-16 mb-4 opacity-20"}),e.jsx("p",{children:"Select a suspicious account to investigate."})]})})]})]})},Bs=()=>{const[s,n]=a.useState([]),[f,N]=a.useState(!0),[r,g]=a.useState(null),[i,m]=a.useState(null);a.useEffect(()=>{l()},[]);const l=async()=>{N(!0);const c=await p.getPendingPaymentProofs();n(c),N(!1)},x=async c=>{if(!confirm("Approve payment? This will update balance/fees."))return;m(c);const v=await p.approvePaymentProof(c);m(null),v.success?l():alert("Error: "+v.message)},t=async c=>{confirm("Reject payment?")&&(m(c),await p.rejectPaymentProof(c),m(null),l())};return e.jsxs("div",{className:"h-full flex flex-col animate-fade-in-up",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:"Finance & Approvals"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Validate Manual GPay Transactions"})]}),e.jsx(L,{onClick:l,className:"bg-slate-800 text-white hover:bg-slate-700",children:e.jsx(G,{className:`w-4 h-4 ${f?"animate-spin":""}`})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:[s.length===0&&!f&&e.jsxs("div",{className:"text-center py-20 text-slate-500 border-2 border-dashed border-slate-800 rounded-xl",children:[e.jsx(Ne,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"All caught up! No pending payments."})]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:s.map(c=>e.jsxs(j,{className:"bg-slate-900 border-slate-800 flex gap-4",children:[e.jsxs("div",{className:"w-24 h-24 bg-slate-950 rounded-lg relative group cursor-pointer border border-slate-800",onClick:()=>g(c.screenshotUrl),children:[e.jsx("img",{src:c.screenshotUrl,className:"w-full h-full object-cover rounded-lg opacity-80 group-hover:opacity-100 transition-opacity"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 opacity-0 group-hover:opacity-100 rounded-lg transition-opacity",children:e.jsx(ys,{className:"w-6 h-6 text-white"})})]}),e.jsxs("div",{className:"flex-1 flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsx("span",{className:`text-[10px] font-bold px-2 py-0.5 rounded ${c.type==="CREDIT_PURCHASE"?"bg-blue-900 text-blue-300":"bg-purple-900 text-purple-300"}`,children:c.type==="CREDIT_PURCHASE"?"CREDIT TOPUP":"STUDENT FEE"}),e.jsxs("span",{className:"text-[10px] text-slate-500 flex items-center gap-1",children:[e.jsx(J,{className:"w-3 h-3"})," ",new Date(c.createdAt).toLocaleDateString()]})]}),e.jsxs("h4",{className:"font-bold text-white text-lg",children:["₹",c.amount]}),e.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:["From: ",e.jsx("span",{className:"text-white font-bold",children:c.schoolName||c.studentName})]}),e.jsxs("p",{className:"text-xs text-slate-500 font-mono mt-1",children:["Ref: ",c.transactionRef]})]}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsx("button",{onClick:()=>x(c.id),disabled:i===c.id,className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-1.5 rounded-lg text-xs font-bold transition-colors",children:i===c.id?"...":"Approve"}),e.jsx("button",{onClick:()=>t(c.id),disabled:i===c.id,className:"flex-1 bg-red-900/30 hover:bg-red-900/50 text-red-400 border border-red-900/50 py-1.5 rounded-lg text-xs font-bold transition-colors",children:"Reject"})]})]})]},c.id))})]}),r&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/95 p-4",onClick:()=>g(null),children:[e.jsx("button",{className:"absolute top-4 right-4 text-white p-2",children:e.jsx(ne,{className:"w-8 h-8"})}),e.jsx("img",{src:r,className:"max-w-full max-h-[90vh] rounded-xl shadow-2xl"})]})]})},et=()=>{const s=es(),[n,f]=a.useState("overview"),[N,r]=a.useState(!1),g=()=>{const m=localStorage.getItem("sb_url"),l=localStorage.getItem("sb_key");localStorage.clear(),m&&localStorage.setItem("sb_url",m),l&&localStorage.setItem("sb_key",l),s("/login")},i=({id:m,label:l,icon:x})=>e.jsxs("button",{onClick:()=>{f(m),r(!1)},className:`p-3 rounded-xl flex items-center gap-3 text-sm font-bold transition-all w-full text-left ${n===m?"bg-blue-600/20 text-blue-400 border border-blue-600/50 shadow-[0_0_10px_rgba(37,99,235,0.2)]":"text-slate-400 hover:bg-slate-800 hover:text-slate-200"}`,children:[e.jsx(x,{className:"w-5 h-5"})," ",l]});return e.jsxs("div",{className:"min-h-screen bg-slate-950 text-slate-100 font-sans pb-20 overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-slate-900 border-b border-slate-800 p-4 flex justify-between items-center sticky top-0 z-50 shadow-2xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>r(!N),className:"md:hidden text-slate-400 hover:text-white",children:N?e.jsx(ne,{className:"w-6 h-6"}):e.jsx(ss,{className:"w-6 h-6"})}),e.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center shadow-[0_0_15px_rgba(37,99,235,0.5)]",children:e.jsx(V,{className:"w-6 h-6 text-white animate-pulse"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"font-black text-lg md:text-xl text-white tracking-widest uppercase",children:["Result",e.jsx("span",{className:"text-blue-500",children:"Mate"})]}),e.jsx("p",{className:"text-[10px] md:text-xs font-mono text-slate-400",children:"SUPER ADMIN CONSOLE"})]})]}),e.jsxs("button",{onClick:g,className:"text-xs font-bold text-red-500 hover:text-red-400 flex items-center gap-2 border border-red-900/50 px-3 py-1.5 rounded-full hover:bg-red-900/20 transition-all",children:[e.jsx(vs,{className:"w-3 h-3"})," ",e.jsx("span",{className:"hidden md:inline",children:"DISCONNECT"})]})]}),e.jsxs("div",{className:"flex flex-1 overflow-hidden relative",children:[e.jsxs("div",{className:`absolute inset-y-0 left-0 z-40 w-64 bg-slate-900/95 backdrop-blur border-r border-slate-800 p-4 flex flex-col gap-2 overflow-y-auto transform transition-transform duration-300 md:relative md:translate-x-0 ${N?"translate-x-0":"-translate-x-full"}`,children:[e.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-wider mb-1 mt-2 pl-2",children:"Operations"}),e.jsx(i,{id:"overview",label:"Mission Control",icon:os}),e.jsx(i,{id:"finance",label:"Finance & Approvals",icon:fe}),e.jsx(i,{id:"inspector",label:"School Inspector",icon:W}),e.jsx(i,{id:"security",label:"Fraud & Risk",icon:$}),e.jsx(i,{id:"growth",label:"Growth & Viral",icon:M}),e.jsx(i,{id:"schools",label:"School Manager",icon:Y}),e.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-wider mb-1 mt-4 pl-2",children:"Technical"}),e.jsx(i,{id:"infra",label:"Infrastructure",icon:xs}),e.jsx(i,{id:"control",label:"System Control",icon:as}),e.jsx(i,{id:"marketing",label:"Marketing",icon:ge}),e.jsx(i,{id:"staff",label:"Staff & Roles",icon:Z}),e.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-wider mb-1 mt-4 pl-2",children:"Support"}),e.jsx(i,{id:"support",label:"Support Desk",icon:gs})]}),N&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-30 md:hidden",onClick:()=>r(!1)}),e.jsxs("div",{className:"flex-1 p-4 md:p-6 overflow-y-auto custom-scrollbar relative bg-slate-950 w-full",children:[e.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-5 pointer-events-none fixed"}),n==="overview"&&e.jsx(Ss,{}),n==="finance"&&e.jsx(Bs,{}),n==="inspector"&&e.jsx(Ms,{}),n==="security"&&e.jsx(Gs,{}),n==="growth"&&e.jsx(Ls,{}),n==="schools"&&e.jsx(Ds,{}),n==="content"&&e.jsx(ks,{}),n==="marketing"&&e.jsx(Is,{}),n==="support"&&e.jsx(Cs,{}),n==="control"&&e.jsx(As,{}),n==="infra"&&e.jsx(_s,{}),n==="staff"&&e.jsx(Rs,{})]})]})]})};export{et as default};
