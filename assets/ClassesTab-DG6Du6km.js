import{c as Ie,r as l,h as d,j as e,G as f,N as me,B as F,C as w,x as De,d as $,ae as ue,b as o,Y as O,L as Ee,U as Re,aq as Ue,E as W,X as M,t as be,ak as Ke}from"./index-Cxmp2eWs.js";import{L as qe}from"./layout-grid-CQHTFAXN.js";import{P as he}from"./plus-circle-CmrGWSLr.js";import{T as pe}from"./trash-2-BqpMS_RT.js";import{A as Fe}from"./arrow-right-left-CdvaLylO.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=Ie("KeyRound",[["path",{d:"M2 18v3c0 .6.4 1 1 1h4v-3h3v-3h2l1.4-1.4a6.5 6.5 0 1 0-4-4Z",key:"167ctg"}],["circle",{cx:"16.5",cy:"7.5",r:".5",key:"1kog09"}]]),Je=({classes:j,onRefresh:N,onShowShare:We})=>{const[P,z]=l.useState("BATCH"),[u,H]=l.useState(""),[T,A]=l.useState(""),[B,Q]=l.useState(""),[V,G]=l.useState(""),[_,J]=l.useState(!1),[b,p]=l.useState([]),[X,Y]=l.useState([]),[c,L]=l.useState(null),[k,Z]=l.useState({}),[ee,se]=l.useState(!1),[I,D]=l.useState(null),[ge,v]=l.useState(!1),[y,te]=l.useState(""),[ae,le]=l.useState(""),[re,ne]=l.useState(!1),[E,R]=l.useState(null),[g,de]=l.useState([]),[i,U]=l.useState([]),[C,ce]=l.useState(""),[ie,oe]=l.useState(!1),[h,fe]=l.useState(null),[je,xe]=l.useState(!1),[x,Ne]=l.useState(null);l.useEffect(()=>{we()},[]);const we=async()=>{const s=await d.getSchoolConfig();fe(s);const t=await d.getGlobalSyllabi();if(Y(t),s!=null&&s.syllabusProviderId){const a=t.find(r=>r.id===s.syllabusProviderId);a&&L(a)}p([])};l.useEffect(()=>{if(!(!u||!h)&&h.syllabusProviderId){const s=d.getSubjectsFromSyllabus(h.syllabusProviderId,u);s.length>0&&p(s)}},[u,h]);const ke=async s=>{if(s.preventDefault(),!u){alert("Please enter Class/Course Name.");return}const t=T?T.trim():"",a=t?`${u} ${t}`:u;if(j.some(n=>n.name===a)){alert(`Class "${a}" already exists!`);return}let r=V;r||(r=Math.random().toString(36).slice(-6)),J(!0);const m=await d.createClass(a,r,B,b);if(J(!1),m.success){const n=`${window.location.origin}${window.location.pathname}#/login?invite=${m.id}`;Ne({className:a,teacher:B||"Class Teacher",password:r,link:n}),xe(!0),H(""),A(""),Q(""),G(""),p([]),N()}else{const n=m.message;alert("Failed: "+(typeof n=="string"?n:JSON.stringify(n)))}},ve=async()=>{if(!y)return alert("Syllabus name required");const s=ae.split(",").map(a=>a.trim()).filter(a=>a);if(s.length===0)return alert("Enter class names (e.g. 1, 2, 10)");ne(!0);const t=await d.createCustomSyllabus(y,s);if(ne(!1),t.success&&t.id){const a={id:t.id,name:y,description:"Custom Syllabus",classRanges:s,subjects:{}};Y(r=>[...r,a]),L(a),v(!1),te(""),le(""),await d.updateSchoolSettings({syllabusProviderId:t.id})}else alert("Failed: "+t.message)},ye=(s,t)=>{Z(a=>{const r=a[s]||[];if(r.includes(t)){const m=r.filter(n=>n!==t);if(m.length===0){const n={...a};return delete n[s],n}return{...a,[s]:m}}else return{...a,[s]:[...r,t].sort()}})},Ce=async()=>{if(!c)return;const s=[];if(Object.entries(k).forEach(([a,r])=>{const m=d.getSubjectsFromSyllabus(c.id,a);r.forEach(n=>{const q=`${a} ${n}`;j.some(Le=>Le.name===q)||s.push({className:q,subjects:m})})}),s.length===0)return alert("No new classes selected or all selected classes already exist.");se(!0);const t=await d.createBulkClasses(s);se(!1),t.success&&t.created?(D(t.created.map(a=>({name:a.name,id:a.id,link:`${window.location.origin}${window.location.pathname}#/login?invite=${a.id}`}))),Z({}),N()):alert("Batch creation failed: "+t.message)},Se=async s=>{if(!window.confirm("Delete this class? All students and marks will be lost."))return;(await d.deleteClass(s)).success?N():alert("Could not delete class.")},$e=s=>{const t=`${window.location.origin}${window.location.pathname}#/login?invite=${s}`;navigator.clipboard.writeText(t),alert("Invite Link Copied!")},S=s=>{const t=s.password?`ðŸ”‘ *Password:* ${s.password}`:"ðŸ”‘ *Password:* (Not Set - Set your own)",a=`*Teacher Login Details*

Class: *${s.className}*

ðŸ‘‡ *Login Link:*
${s.link}

${t}

_Manage your classes with ResultMate_`;window.open(`https://wa.me/?text=${encodeURIComponent(a)}`,"_blank")},Me=async s=>{const t=Math.random().toString(36).slice(-6);if(!confirm(`Reset password for ${s.name}? 

New Password will be: ${t}`))return;(await d.changeClassPassword(s.id,t)).success?(N(),setTimeout(()=>{confirm(`Password Reset Successful! 

Share new details via WhatsApp now?`)&&S({className:s.name,password:t,link:`${window.location.origin}${window.location.pathname}#/login?invite=${s.id}`})},500)):alert("Failed to reset password.")},Pe=async s=>{R(s),de([]),U([]),ce("");const t=await d.getStudentsByClass(s.id);de(t)},Te=s=>{U(t=>t.includes(s)?t.filter(a=>a!==s):[...t,s])},Ae=async()=>{if(!C)return alert("Select a target class");if(i.length===0)return alert("Select students to move");oe(!0);const s=await d.bulkTransferStudents(i,C);oe(!1),s.success?(alert(`Moved ${i.length} students successfully.`),R(null),N()):alert("Transfer failed: "+s.message)},K=(s,t,a)=>{const r=[...b];r[s]={...r[s],[t]:a},p(r)},Be=()=>{p([...b,{name:"",maxMarks:50,passMarks:18}])},Ge=s=>{const t=[...b];t.splice(s,1),p(t)};return e.jsxs("div",{className:"animate-fade-in-up",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsxs("div",{className:"bg-slate-100 dark:bg-slate-800 p-1 rounded-xl flex gap-1 border border-slate-200 dark:border-slate-700",children:[e.jsxs("button",{onClick:()=>z("BATCH"),className:`px-6 py-2 rounded-lg text-sm font-bold flex items-center gap-2 transition-all ${P==="BATCH"?"bg-white dark:bg-slate-700 shadow text-blue-600 dark:text-white":"text-slate-500"}`,children:[e.jsx(qe,{className:"w-4 h-4"})," Smart Batch Generator"]}),e.jsxs("button",{onClick:()=>z("SINGLE"),className:`px-6 py-2 rounded-lg text-sm font-bold flex items-center gap-2 transition-all ${P==="SINGLE"?"bg-white dark:bg-slate-700 shadow text-blue-600 dark:text-white":"text-slate-500"}`,children:[e.jsx(he,{className:"w-4 h-4"})," Manual Create"]})]})}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"md:col-span-1",children:P==="BATCH"?e.jsxs(f,{className:"border-t-4 border-t-purple-500 sticky top-24 max-h-[85vh] overflow-y-auto custom-scrollbar",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4 pb-4 border-b border-slate-100 dark:border-slate-700",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-50 dark:bg-purple-900/20 rounded-full flex items-center justify-center shrink-0",children:e.jsx(me,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-white leading-tight",children:"Batch Wizard"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Generate multiple classes"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("label",{className:"text-xs font-bold text-slate-500 uppercase flex items-center gap-1",children:[e.jsx(F,{className:"w-3 h-3"})," Syllabus & Curriculum"]}),e.jsx("button",{onClick:()=>v(!0),className:"text-[10px] bg-purple-100 text-purple-700 px-2 py-0.5 rounded font-bold hover:bg-purple-200",children:"+ New"})]}),X.length>0?e.jsx("div",{className:"grid grid-cols-2 gap-2",children:X.map(s=>e.jsxs("div",{onClick:()=>L(s),className:`p-3 rounded-xl border-2 cursor-pointer transition-all ${(c==null?void 0:c.id)===s.id?"bg-purple-50 dark:bg-purple-900/20 border-purple-500":"bg-white dark:bg-slate-900 border-slate-200 dark:border-slate-700 hover:border-purple-300"}`,children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("span",{className:"text-xs font-bold text-slate-800 dark:text-white truncate block max-w-[80px]",children:s.name}),(c==null?void 0:c.id)===s.id&&e.jsx(w,{className:"w-3 h-3 text-purple-600"})]}),e.jsxs("span",{className:"text-[10px] text-slate-500 mt-1 block",children:[s.classRanges.length," Grades"]})]},s.id))}):e.jsxs("div",{onClick:()=>v(!0),className:"border-2 border-dashed border-slate-300 dark:border-slate-700 rounded-xl p-4 text-center cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-800",children:[e.jsx(De,{className:"w-6 h-6 text-slate-400 mx-auto mb-1"}),e.jsx("p",{className:"text-xs font-bold text-slate-500",children:"No Curriculum Found"}),e.jsx("p",{className:"text-[10px] text-blue-600 font-bold mt-1",children:"Tap to Create"})]})]}),c&&e.jsxs("div",{className:"space-y-3 animate-fade-in-up",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 p-3 rounded-xl border border-slate-100 dark:border-slate-800",children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase mb-2",children:"Select Grades to Generate"}),e.jsx("div",{className:"space-y-2 max-h-[300px] overflow-y-auto pr-2 custom-scrollbar",children:c.classRanges.map(s=>e.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-slate-950 p-2 rounded-lg border border-slate-100 dark:border-slate-800",children:[e.jsxs("span",{className:"font-bold text-sm text-slate-700 dark:text-slate-300 w-12",children:["Cls ",s]}),e.jsx("div",{className:"flex gap-1",children:["A","B","C","D"].map(t=>{var r;const a=(r=k[s])==null?void 0:r.includes(t);return e.jsx("button",{onClick:()=>ye(s,t),className:`w-8 h-8 rounded-md text-xs font-bold transition-all ${a?"bg-purple-600 text-white shadow-md":"bg-slate-100 dark:bg-slate-800 text-slate-400 border border-slate-200 dark:border-slate-700 hover:bg-slate-200"}`,children:t},t)})})]},s))})]}),e.jsx($,{onClick:Ce,disabled:ee||Object.keys(k).length===0,className:"w-full bg-purple-600 hover:bg-purple-700 shadow-lg shadow-purple-500/20",children:ee?"Generating...":`Create ${Object.values(k).flat().length} Classes`})]})]})]}):e.jsxs(f,{className:"border-t-4 border-t-blue-500 sticky top-24 max-h-[85vh] overflow-y-auto custom-scrollbar",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6 pb-4 border-b border-slate-100 dark:border-slate-700",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-50 dark:bg-blue-900/20 rounded-full flex items-center justify-center shrink-0",children:e.jsx(ue,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-white leading-tight",children:"New Class"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Add a single batch"})]})]}),e.jsxs("form",{onSubmit:ke,className:"space-y-5",children:[e.jsxs("div",{className:"grid grid-cols-5 gap-2",children:[e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 block mb-1 uppercase",children:"Class / Course"}),e.jsx(o,{placeholder:"e.g. 10 / BCA",value:u,onChange:s=>H(s.target.value),required:!0,list:"grade-suggestions",className:"font-bold"}),e.jsx("datalist",{id:"grade-suggestions",children:["Pre-KG","LKG","UKG","1","2","3","4","5","6","7","8","9","10","+1","+2"].map(s=>e.jsx("option",{value:s},s))})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 block mb-1 uppercase",children:"Batch"}),e.jsx(o,{placeholder:"A",value:T,className:"text-center font-bold",onChange:s=>{const t=s.target.value;t.length===1?A(t.toUpperCase()):A(t)}})]})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 p-3 rounded-xl border border-slate-200 dark:border-slate-800",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("label",{className:"text-[10px] font-bold text-slate-500 uppercase flex items-center gap-1",children:[e.jsx(F,{className:"w-3 h-3"})," Subjects (",b.length,")"]}),e.jsx("button",{type:"button",onClick:Be,className:"text-[10px] font-bold text-blue-600 hover:underline",children:"+ Add"})]}),e.jsxs("div",{className:"space-y-2 max-h-40 overflow-y-auto custom-scrollbar",children:[b.map((s,t)=>e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(o,{className:"h-8 text-xs px-3 flex-[3]",placeholder:"Subject Name",value:s.name,onChange:a=>K(t,"name",a.target.value),list:"master-subjects"}),e.jsxs("div",{className:"flex gap-1 flex-1",children:[e.jsx(o,{type:"number",className:"h-8 text-xs px-1 text-center w-full",placeholder:"Max",value:s.maxMarks,onChange:a=>K(t,"maxMarks",a.target.value)}),e.jsx(o,{type:"number",className:"h-8 text-xs px-1 text-center w-full",placeholder:"Pass",value:s.passMarks,onChange:a=>K(t,"passMarks",a.target.value)})]}),e.jsx("button",{type:"button",onClick:()=>Ge(t),className:"text-slate-400 hover:text-red-500",children:e.jsx(pe,{className:"w-3 h-3"})})]},t)),b.length===0&&e.jsx("p",{className:"text-[10px] text-slate-400 text-center py-2",children:"No subjects. Click + Add."}),e.jsx("datalist",{id:"master-subjects",children:((h==null?void 0:h.masterSubjects)||[]).map(s=>e.jsx("option",{value:s},s))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 block mb-1",children:"Teacher Name (Optional)"}),e.jsxs("div",{className:"relative",children:[e.jsx(O,{className:"absolute left-3 top-3 w-4 h-4 text-slate-400"}),e.jsx(o,{className:"pl-9",placeholder:"e.g. Mrs. Smith",value:B,onChange:s=>Q(s.target.value)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 block mb-1",children:"Access Password"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ee,{className:"absolute left-3 top-3 w-4 h-4 text-slate-400"}),e.jsx(o,{className:"pl-9",placeholder:"Set Password",value:V,onChange:s=>G(s.target.value)})]}),e.jsx("button",{type:"button",onClick:()=>G(Math.random().toString(36).slice(-6)),className:"bg-purple-50 dark:bg-purple-900/20 px-3 rounded-lg text-xs font-bold hover:bg-purple-100 text-purple-600 border border-purple-200",children:e.jsx(me,{className:"w-4 h-4"})})]}),e.jsxs("p",{className:"text-[10px] text-slate-400 mt-1.5 flex items-center gap-1",children:[e.jsx(w,{className:"w-3 h-3 text-green-500"})," Leave blank to auto-generate link."]})]}),e.jsx($,{type:"submit",disabled:_,className:"w-full flex items-center justify-center gap-2 bg-blue-600 hover:bg-blue-700 shadow-lg shadow-blue-500/20",children:_?"Creating...":e.jsxs(e.Fragment,{children:[e.jsx(he,{className:"w-4 h-4"})," Create Class"]})})]})]})}),e.jsxs("div",{className:"md:col-span-2 space-y-4",children:[j.map(s=>e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-slate-100 dark:bg-slate-700 rounded-lg flex items-center justify-center font-black text-slate-500 dark:text-slate-400 text-sm",children:s.name.substring(0,2)}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-bold text-lg text-slate-800 dark:text-white flex items-center gap-2",children:[s.name,s.submissionStatus==="SUBMITTED"&&e.jsx("span",{className:"bg-orange-100 text-orange-700 text-[10px] px-2 py-0.5 rounded-full flex items-center gap-1 animate-pulse",children:"Waiting Approval"}),s.submissionStatus==="APPROVED"&&e.jsx("span",{className:"bg-green-100 text-green-700 text-[10px] px-2 py-0.5 rounded-full flex items-center gap-1",children:"Published"})]}),e.jsxs("div",{className:"text-xs text-slate-500 mt-1 flex flex-wrap gap-2 items-center",children:[e.jsxs("span",{className:"flex items-center gap-1 font-bold bg-slate-100 dark:bg-slate-700 px-2 py-0.5 rounded",children:[e.jsx(Re,{className:"w-3 h-3"})," ",s.studentCount||0," Total"]}),e.jsxs("span",{className:"flex items-center gap-1 text-blue-600 bg-blue-50 px-2 py-0.5 rounded",children:[e.jsx(O,{className:"w-3 h-3"})," ",s.boysCount||0," Boys"]}),e.jsxs("span",{className:"flex items-center gap-1 text-pink-600 bg-pink-50 px-2 py-0.5 rounded",children:[e.jsx(O,{className:"w-3 h-3"})," ",s.girlsCount||0," Girls"]})]}),e.jsxs("div",{className:"text-[10px] text-slate-400 mt-1.5 flex items-center gap-2",children:[e.jsxs("span",{children:["Teacher: ",s.teacherName||"Not Assigned"]}),e.jsx("span",{className:"w-1 h-1 bg-slate-300 rounded-full"}),e.jsxs("span",{className:"font-mono flex items-center gap-1",children:["Pass: ",s.password?s.password:e.jsx("span",{className:"text-orange-500 italic",children:"Not Set"}),e.jsx("button",{onClick:()=>Me(s),className:"bg-slate-100 dark:bg-slate-700 hover:bg-yellow-100 text-slate-500 hover:text-yellow-600 p-1 rounded transition-colors ml-1",title:"Reset Password",children:e.jsx(Oe,{className:"w-3 h-3"})})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[e.jsxs("button",{onClick:()=>Pe(s),className:"px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-lg text-xs font-bold hover:bg-slate-200 dark:hover:bg-slate-600 flex items-center gap-1",children:[e.jsx(Fe,{className:"w-3 h-3"})," Manage"]}),e.jsx("button",{onClick:()=>$e(s.id),className:"p-2 bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 rounded-lg hover:bg-indigo-100 transition-colors",title:"Copy Link",children:e.jsx(Ue,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>S({className:s.name,link:`${window.location.origin}${window.location.pathname}#/login?invite=${s.id}`,password:s.password}),className:"p-2 bg-[#25D366] hover:bg-[#20bd5a] text-white rounded-lg transition-colors shadow-sm",title:"Share on WhatsApp",children:e.jsx(W,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>Se(s.id),className:"p-2 text-slate-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:e.jsx(pe,{className:"w-4 h-4"})})]})]},s.id)),j.length===0&&e.jsxs("div",{className:"h-full flex flex-col items-center justify-center py-12 text-center border-2 border-dashed border-slate-200 dark:border-slate-700 rounded-2xl bg-slate-50/50 dark:bg-slate-800/50",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center mb-4",children:e.jsx(ue,{className:"w-8 h-8 text-blue-500"})}),e.jsx("h3",{className:"font-bold text-slate-700 dark:text-slate-300",children:"No classes yet"}),e.jsx("p",{className:"text-slate-500 text-sm max-w-xs mx-auto mt-1",children:"Create classes using the manual form or batch wizard."})]})]})]}),ge&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-4 animate-fade-in-up",children:e.jsxs(f,{className:"w-full max-w-sm relative border-t-4 border-t-purple-600 bg-white dark:bg-slate-900",children:[e.jsx("button",{onClick:()=>v(!1),className:"absolute top-4 right-4 text-slate-400 hover:text-slate-600",children:e.jsx(M,{className:"w-5 h-5"})}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 dark:bg-purple-900/30 rounded-full flex items-center justify-center mx-auto mb-4 border border-purple-200",children:e.jsx(F,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"New Syllabus"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Define curriculum structure"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase block mb-1",children:"Syllabus Name"}),e.jsx(o,{placeholder:"e.g. Kerala State 2024",value:y,onChange:s=>te(s.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase block mb-1",children:"Classes Included (Comma Separated)"}),e.jsx(o,{placeholder:"1, 2, 3, 4, 5, 6, 7, 8, 9, 10",value:ae,onChange:s=>le(s.target.value),required:!0}),e.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"Example: LKG, UKG, 1, 2, +1, +2"})]}),e.jsx($,{onClick:ve,disabled:re,className:"w-full bg-purple-600 hover:bg-purple-700 text-white shadow-lg",children:re?"Creating...":"Create & Select"})]})]})}),E&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-4 animate-fade-in-up",children:e.jsxs(f,{className:"w-full max-w-2xl bg-white dark:bg-slate-900 border-t-4 border-t-blue-500 max-h-[90vh] flex flex-col p-0",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center bg-slate-50 dark:bg-slate-950",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:["Manage ",E.name]}),e.jsx("p",{className:"text-xs text-slate-500",children:"Move students to another division."})]}),e.jsx("button",{onClick:()=>R(null),className:"text-slate-400 hover:text-slate-600",children:e.jsx(M,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col md:flex-row",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar bg-white dark:bg-slate-900",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("span",{className:"text-xs font-bold text-slate-500 uppercase",children:["Students (",g.length,")"]}),e.jsx("button",{onClick:()=>U(i.length===g.length?[]:g.map(s=>s.id)),className:"text-[10px] text-blue-600 font-bold hover:underline",children:i.length===g.length?"Deselect All":"Select All"})]}),e.jsxs("div",{className:"space-y-2",children:[g.map(s=>e.jsxs("div",{onClick:()=>Te(s.id),className:`p-2 rounded-lg border cursor-pointer flex items-center justify-between transition-colors ${i.includes(s.id)?"bg-blue-50 border-blue-500 dark:bg-blue-900/30":"bg-slate-50 border-slate-100 dark:bg-slate-800 dark:border-slate-700"}`,children:[e.jsx("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:s.name}),i.includes(s.id)&&e.jsx(w,{className:"w-4 h-4 text-blue-600"})]},s.id)),g.length===0&&e.jsx("p",{className:"text-center text-slate-400 text-xs py-4",children:"No students in this class."})]})]}),e.jsxs("div",{className:"w-full md:w-64 bg-slate-50 dark:bg-slate-950 p-4 border-l border-slate-100 dark:border-slate-800",children:[e.jsx("h4",{className:"text-sm font-bold text-slate-700 dark:text-white mb-4",children:"Bulk Actions"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase block mb-2",children:"Move Selected To"}),e.jsxs("select",{className:"w-full bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg px-3 py-2 text-sm font-bold outline-none",value:C,onChange:s=>ce(s.target.value),children:[e.jsx("option",{value:"",children:"Select Target Class"}),j.filter(s=>s.id!==E.id).map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsx($,{onClick:Ae,disabled:ie||i.length===0||!C,className:"w-full bg-blue-600 hover:bg-blue-700 text-white shadow-lg",children:ie?"Moving...":`Transfer ${i.length} Students`}),e.jsx("p",{className:"text-[10px] text-slate-400 text-center",children:"Use this to split classes or regroup students after promotion."})]})]})]})]})}),I&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-4 animate-fade-in-up",children:e.jsxs(f,{className:"w-full max-w-2xl bg-white dark:bg-slate-900 border-t-4 border-t-green-500 max-h-[90vh] flex flex-col p-0",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center",children:e.jsx(w,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Batch Created!"}),e.jsxs("p",{className:"text-sm text-slate-500",children:[I.length," classes generated successfully."]})]})]}),e.jsx("button",{onClick:()=>D(null),className:"text-slate-400 hover:text-slate-600",children:e.jsx(M,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-slate-50 dark:bg-slate-950/50",children:[e.jsxs("p",{className:"text-xs font-bold text-slate-500 uppercase mb-3 flex items-center gap-2",children:[e.jsx(be,{className:"w-3 h-3"})," Invite Links"]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-3",children:I.map((s,t)=>e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-3 rounded-xl border border-slate-200 dark:border-slate-800 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-sm text-slate-800 dark:text-white",children:s.name}),e.jsx("p",{className:"text-[10px] text-slate-400",children:"Invite teacher to claim"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>navigator.clipboard.writeText(s.link),className:"p-2 bg-slate-100 hover:bg-slate-200 rounded-lg text-slate-600",title:"Copy Link",children:e.jsx(Ke,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>S({className:s.name,link:s.link}),className:"p-2 bg-[#25D366] hover:bg-[#20bd5a] text-white rounded-lg",title:"WhatsApp",children:e.jsx(W,{className:"w-4 h-4"})})]})]},t))})]}),e.jsx("div",{className:"p-4 border-t border-slate-100 dark:border-slate-700 text-center",children:e.jsx("button",{onClick:()=>D(null),className:"text-sm text-blue-600 font-bold hover:underline",children:"Done"})})]})}),je&&x&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-4 animate-fade-in-up",children:e.jsxs(f,{className:"w-full max-w-md bg-white dark:bg-slate-900 text-center relative border-t-4 border-t-green-500",children:[e.jsx("button",{onClick:()=>xe(!1),className:"absolute top-3 right-3 text-slate-400 hover:text-slate-600",children:e.jsx(M,{className:"w-5 h-5"})}),e.jsx("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(w,{className:"w-10 h-10 text-green-600 dark:text-green-400 animate-bounce"})}),e.jsx("h3",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:"Class Created!"}),e.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-sm mb-6",children:[e.jsx("span",{className:"font-bold text-slate-800 dark:text-white",children:x.className})," is ready."]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 mb-6 text-left",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase",children:"Class Password"}),e.jsx("span",{className:"font-mono font-black text-lg text-blue-600 dark:text-blue-400",children:x.password})]}),e.jsx("div",{className:"h-px bg-slate-200 dark:bg-slate-700 my-2"}),e.jsx("p",{className:"text-xs text-slate-400 mb-1",children:"Invite Link:"}),e.jsx("div",{className:"bg-white dark:bg-slate-900 p-2 rounded border border-slate-200 dark:border-slate-700 text-[10px] text-slate-500 font-mono break-all",children:x.link})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>S(x),className:"flex-1 bg-[#25D366] hover:bg-[#20bd5a] text-white py-3 rounded-xl font-bold flex items-center justify-center gap-2 shadow-lg shadow-green-500/20",children:[e.jsx(W,{className:"w-5 h-5"})," WhatsApp"]}),e.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(`Class: ${x.className}
Link: ${x.link}
Password: ${x.password}`),alert("Copied details!")},className:"flex-1 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 py-3 rounded-xl font-bold flex items-center justify-center gap-2 hover:bg-slate-200",children:[e.jsx(be,{className:"w-5 h-5"})," Share"]})]})]})})]})};export{Je as default};
