import{c as q,u as ee,r as a,j as e,K as de,N as ce,L as G,o as oe,O as te,i as O,G as A,l as R,C as B,A as se,T as xe,h as N,P as ae,B as me,e as K,Q as he,V as z,Y as _,b as X,$ as J,a0 as be,d as V,a1 as ue,p as F,y as pe,a2 as fe,a3 as ge,k as le,v as je,a4 as Ne,W as re,X as we,a5 as ve}from"./index-Cxmp2eWs.js";import{C as ye}from"./clipboard-list-B39n2P9h.js";import{F as ke,T as Se}from"./target-B8sX8OIH.js";import{Q as Z}from"./qr-code-Br7Ofnzm.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=q("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=q("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=q("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=q("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),Ae=({targetDate:t})=>{const[l,h]=a.useState("");return a.useEffect(()=>{const o=setInterval(()=>{const w=new Date().getTime(),d=new Date(t).getTime()-w;if(d<=0)h("LIVE NOW"),clearInterval(o);else{const u=Math.floor(d/864e5),p=Math.floor(d%(1e3*60*60*24)/(1e3*60*60)),n=Math.floor(d%(1e3*60*60)/(1e3*60));u>0?h(`in ${u} days`):h(`in ${p}h ${n}m`)}},1e3);return()=>clearInterval(o)},[t]),e.jsx("span",{className:`text-[9px] font-bold px-2 py-0.5 rounded ${l==="LIVE NOW"?"bg-red-500 text-white animate-pulse":"bg-blue-100 text-blue-700"}`,children:l||"..."})},De=({user:t,marks:l,assessments:h,schoolConfig:o})=>{const w=ee(),[r,d]=a.useState([]);a.useEffect(()=>{(async()=>{const x=(await N.getExamsForClass(t.classId)).filter(g=>new Date(g.endTime)>new Date);d(x)})()},[t.classId]);const u=a.useMemo(()=>{if(!l||!l.subjects)return null;let n=-1,v=101,x="",g="",S=0,k=0;Object.entries(l.subjects).forEach(([D,P])=>{const s=typeof P=="number"?P:0;s>n&&(n=s,x=D),s<v&&s>0&&(v=s,g=D),S+=s,k++});const T=k>0?S/k:0;let C="Consistency is key! Keep practicing daily.",f="NEUTRAL";return v<35?(C=`You're struggling with ${g}. Try spending 30 mins extra daily on it!`,f="URGENT"):T>90?(C=`You are a champion in ${x}! ðŸŒŸ Maintain this momentum.`,f="EXCELLENT"):T>75?(C=`Great job! To reach the top, focus on converting your ${g} marks to A grade.`,f="GOOD"):C=`You have potential. A little more focus on ${g} can boost your total rank.`,{strong:x||"None",weak:g||"None",tip:C,mood:f}},[l]),p=()=>{w("/setup")};return e.jsxs("div",{className:"space-y-6 animate-fade-in-up",children:[u&&e.jsxs("div",{className:`rounded-3xl p-6 relative overflow-hidden shadow-lg border border-white/10 ${t.isPremium?u.mood==="EXCELLENT"?"bg-gradient-to-br from-green-500 to-emerald-700":u.mood==="URGENT"?"bg-gradient-to-br from-orange-500 to-red-600":"bg-gradient-to-br from-indigo-500 to-purple-700":"bg-slate-900"}`,children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-20 text-white",children:e.jsx(de,{className:"w-32 h-32 rotate-12"})}),t.isPremium?e.jsxs("div",{className:"relative z-10 text-white animate-fade-in-up",children:[e.jsx("div",{className:"flex items-center gap-2 mb-3",children:e.jsxs("span",{className:"bg-white/20 px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider flex items-center gap-1 backdrop-blur-md",children:[e.jsx(ce,{className:"w-3 h-3"})," AI Smart Analyst"]})}),e.jsxs("p",{className:"text-lg md:text-xl font-bold leading-relaxed mb-6",children:['"',u.tip,'"']}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-black/20 backdrop-blur-md rounded-xl p-3 border border-white/10",children:[e.jsx("p",{className:"text-[10px] uppercase font-bold opacity-70 mb-1",children:"Strongest"}),e.jsx("p",{className:"font-black text-lg truncate",children:u.strong})]}),e.jsxs("div",{className:"bg-black/20 backdrop-blur-md rounded-xl p-3 border border-white/10",children:[e.jsx("p",{className:"text-[10px] uppercase font-bold opacity-70 mb-1",children:"Improve"}),e.jsx("p",{className:"font-black text-lg truncate",children:u.weak})]})]})]}):e.jsxs("div",{className:"relative z-10 text-white text-center py-6",children:[e.jsxs("div",{className:"blur-sm select-none opacity-50 mb-4",children:[e.jsx("p",{className:"text-xl font-bold",children:"Your performance requires attention in specific areas."}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-4",children:[e.jsx("div",{className:"bg-white/10 h-16 rounded-xl"}),e.jsx("div",{className:"bg-white/10 h-16 rounded-xl"})]})]}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white/10 rounded-full flex items-center justify-center mb-2 backdrop-blur-sm border border-white/20",children:e.jsx(G,{className:"w-6 h-6 text-white"})}),e.jsx("h3",{className:"font-bold text-lg mb-1",children:"Unlock AI Insights"}),e.jsx("p",{className:"text-xs text-slate-300 max-w-xs mx-auto",children:"Get personalized study tips and strength analysis."})]})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-blue-700 to-indigo-800 rounded-3xl p-1 shadow-lg transform transition-transform hover:scale-[1.02] cursor-pointer",onClick:p,children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-[22px] p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center text-blue-600",children:e.jsx(oe,{className:"w-5 h-5 fill-current"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-slate-800 dark:text-white text-sm",children:"Want this System?"}),e.jsx("p",{className:"text-[10px] text-slate-500",children:"Implement ResultMate in your School."})]})]}),e.jsxs("button",{className:"bg-slate-900 dark:bg-white dark:text-slate-900 text-white px-4 py-2 rounded-xl text-xs font-bold flex items-center gap-2 shadow-lg transition-all",children:["Get Started ",e.jsx(te,{className:"w-3 h-3"})]})]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 px-1",children:[e.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white flex items-center gap-2 text-lg",children:[e.jsx(O,{className:"w-5 h-5 text-blue-500"})," Upcoming"]}),e.jsx("span",{className:"text-xs font-bold bg-blue-100 text-blue-700 px-2 py-1 rounded-full",children:h.length+r.length})]}),r.length>0&&e.jsx("div",{className:"space-y-3 mb-4",children:r.map(n=>e.jsxs(A,{className:"flex items-center gap-4 p-4 border-l-4 border-l-purple-500 hover:shadow-md transition-all",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 dark:bg-purple-900/30 rounded-xl flex items-center justify-center shrink-0",children:e.jsx(R,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-slate-800 dark:text-white text-sm",children:n.title}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(Ae,{targetDate:n.startTime}),e.jsxs("span",{className:"text-[10px] text-slate-500",children:[n.durationMinutes," mins"]})]})]})]},n.id))}),h.length>0?e.jsx("div",{className:"space-y-3",children:h.map(n=>{const x=n.schedules&&n.schedules.length>0?"Scheduled":"Ongoing";return e.jsxs(A,{className:"flex items-center gap-4 p-4 hover:border-blue-300 transition-colors cursor-pointer group",children:[e.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center shrink-0 shadow-sm group-hover:scale-110 transition-transform ${n.type==="STAR"?"bg-yellow-100 text-yellow-600":"bg-blue-100 text-blue-600"}`,children:e.jsx(ye,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-bold text-slate-800 dark:text-white text-sm mb-1 truncate",children:n.name}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-slate-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(R,{className:"w-3 h-3"})," ",n.frequency]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(B,{className:"w-3 h-3"})," ",n.questions.length," Items"]})]})]}),e.jsx("div",{className:"text-right",children:e.jsx("span",{className:`text-[10px] font-bold px-2 py-1 rounded ${x==="Ongoing"?"bg-green-100 text-green-700":"bg-slate-100 text-slate-600"}`,children:x})})]},n.id)})}):r.length===0&&e.jsxs("div",{className:"text-center py-10 bg-slate-50 dark:bg-slate-800/50 rounded-3xl border-2 border-dashed border-slate-200 dark:border-slate-700",children:[e.jsx(se,{className:"w-10 h-10 text-slate-300 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-slate-400 font-medium",children:"No tasks scheduled yet."}),e.jsx("p",{className:"text-xs text-slate-300 mt-1",children:"Enjoy your free time!"})]})]}),o&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:()=>window.open(`https://wa.me/?text=Check%20out%20my%20school%20${encodeURIComponent(o.schoolName)}%20on%20ResultMate!`,"_blank"),className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 flex flex-col items-center justify-center gap-2 hover:bg-slate-50 transition-colors",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center text-green-600",children:e.jsx(xe,{className:"w-5 h-5"})}),e.jsx("span",{className:"text-xs font-bold text-slate-700 dark:text-slate-300",children:"Share School"})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 flex flex-col items-center justify-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center text-blue-600",children:e.jsx(O,{className:"w-5 h-5"})}),e.jsx("span",{className:"text-xs font-bold text-slate-700 dark:text-slate-300",children:"Timetable (Soon)"})]})]})]})},Te=({marks:t,user:l})=>{if(!t)return e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[50vh] text-center p-6 animate-fade-in-up",children:[e.jsx("div",{className:"w-20 h-20 bg-slate-100 dark:bg-slate-800 rounded-full flex items-center justify-center mb-4",children:e.jsx(ke,{className:"w-10 h-10 text-slate-400"})}),e.jsx("h3",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"No Data Available"}),e.jsx("p",{className:"text-sm text-slate-500 mt-2",children:"Marks for the current term haven't been published yet."})]});const h=Object.entries(t.subjects),o=h.length*100,w=o>0?t.total/o*100:0;return e.jsxs("div",{className:"space-y-6 animate-fade-in-up",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs(A,{className:"bg-gradient-to-br from-blue-600 to-indigo-700 text-white border-none",children:[e.jsx("p",{className:"text-xs font-bold opacity-70 uppercase mb-1",children:"Total Score"}),e.jsx("h2",{className:"text-3xl font-black",children:t.total}),e.jsxs("div",{className:"mt-2 text-[10px] bg-white/20 inline-block px-2 py-0.5 rounded",children:[w.toFixed(1),"% Secured"]})]}),e.jsxs(A,{className:"bg-white dark:bg-slate-800 flex flex-col justify-center items-center text-center",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 dark:bg-purple-900/30 rounded-full flex items-center justify-center mb-2",children:e.jsx(ae,{className:"w-6 h-6 text-purple-600"})}),e.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase",children:"Grade"}),e.jsx("h2",{className:"text-2xl font-black text-slate-800 dark:text-white",children:t.grade})]})]}),e.jsxs(A,{children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx(ne,{className:"w-5 h-5 text-blue-500"})," Subject Analysis"]})}),e.jsx("div",{className:"flex items-end justify-between gap-2 h-40 mb-2 border-b border-slate-100 dark:border-slate-700 pb-2 px-1",children:h.map(([r,d],u)=>{const p=typeof d=="number"?d:0,n=Math.min(100,Math.max(10,p)),v=p>=90?"bg-green-500":p>=75?"bg-blue-500":p>=40?"bg-yellow-500":"bg-red-500";return e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1 group relative",children:[e.jsxs("div",{className:"opacity-0 group-hover:opacity-100 absolute -top-8 bg-slate-800 text-white text-[10px] py-1 px-2 rounded transition-opacity pointer-events-none z-10 whitespace-nowrap",children:[r,": ",p]}),e.jsx("div",{className:`text-[9px] font-bold ${p>=90?"text-green-600":"text-slate-400"}`,children:p}),e.jsx("div",{className:`w-full rounded-t-md transition-all duration-1000 ease-out hover:opacity-80 ${v}`,style:{height:`${n}%`}})]},u)})}),e.jsx("div",{className:"flex justify-between text-[8px] text-slate-400 font-bold uppercase px-1",children:h.map(([r],d)=>e.jsx("div",{className:"flex-1 text-center truncate px-0.5",children:r.substring(0,3)},d))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white text-sm ml-1 flex items-center gap-2",children:[e.jsx(me,{className:"w-4 h-4 text-slate-500"})," Report Card"]}),h.map(([r,d],u)=>{const p=typeof d=="number"?d:0;return e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl flex items-center justify-between border border-slate-100 dark:border-slate-700 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-1 h-8 rounded-full ${p>=40?"bg-blue-500":"bg-red-500"}`}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-800 dark:text-white text-sm",children:r}),e.jsx("p",{className:"text-[10px] text-slate-500",children:"Maximum: 100"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xl font-black text-slate-800 dark:text-white",children:p}),e.jsx("p",{className:`text-[10px] font-bold ${p>=40?"text-green-500":"text-red-500"}`,children:p>=40?"PASS":"FAIL"})]})]},u)})]})]})},Ie=({user:t,schoolConfig:l,onUpdateUser:h})=>{const[o,w]=a.useState(!1),[r,d]=a.useState(""),[u,p]=a.useState(!1),[n,v]=a.useState(""),[x,g]=a.useState(!1),[S,k]=a.useState(!1),T=async s=>{if(!s.target.files||!s.target.files[0])return;p(!0);const b=await N.uploadImage(s.target.files[0],"students");p(!1),b.success&&b.publicUrl?d(b.publicUrl):alert("Upload failed.")},C=async()=>{if(!r)return;const s=await N.createProfileRequest(t.id,"photoUrl",r);s.success?(alert("Photo update requested. Teacher will approve."),w(!1),d("")):alert("Failed: "+s.message)},f=async()=>{if(!n||n.length<4){alert("Password too short");return}const s=await N.changePassword(t.id,n);s.success?(alert("Password updated!"),v("")):alert("Failed: "+s.message)},D=async()=>{k(!0),setTimeout(async()=>{const s="UPI"+Date.now(),b=await N.activateStudentPremium(t.id,s);k(!1),g(!1),b.success?(h({isPremium:!0}),alert("ðŸŽ‰ Premium Activated!")):alert("Failed")},1500)},P=async s=>{var I;const b=((I=t.socialLinks)==null?void 0:I._preferences)||{};h({socialLinks:{...t.socialLinks||{},_preferences:{...b,theme:s}}}),await N.updateStudentPreferences(t.id,{...b,theme:s})};return e.jsxs("div",{className:"space-y-6 animate-fade-in-up",children:[e.jsx("div",{className:"relative group",children:e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-3xl p-1 shadow-2xl border border-slate-200 dark:border-slate-700 overflow-hidden",children:e.jsxs("div",{className:`p-6 rounded-[20px] text-white relative overflow-hidden ${t.isPremium?"bg-gradient-to-br from-slate-900 to-black":"bg-gradient-to-br from-blue-600 to-indigo-700"}`,children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-20",children:e.jsx(Z,{className:"w-24 h-24"})}),e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg opacity-90",children:"Digital Identity"}),e.jsx("p",{className:"text-xs opacity-70",children:"Official Student ID"})]}),(l==null?void 0:l.logoUrl)&&e.jsx("img",{src:l.logoUrl,className:"w-10 h-10 object-contain bg-white rounded-lg p-1"})]}),e.jsxs("div",{className:"flex gap-4 items-center relative z-10",children:[e.jsx("img",{src:t.photoUrl||`https://api.dicebear.com/7.x/avataaars/svg?seed=${t.name}`,className:"w-20 h-20 rounded-xl object-cover border-2 border-white/30 bg-white"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black leading-tight mb-1",children:t.name}),e.jsx("p",{className:"text-sm font-mono opacity-80",children:t.regNo}),e.jsxs("div",{className:`mt-2 inline-flex items-center gap-1 px-2 py-0.5 rounded text-[10px] font-bold uppercase tracking-wider ${t.isPremium?"bg-yellow-500 text-black":"bg-white/20"}`,children:[t.isPremium?e.jsx(K,{className:"w-3 h-3"}):e.jsx(he,{className:"w-3 h-3"}),t.isPremium?"Elite Student":"Verified"]})]})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t border-white/10 flex justify-between items-end",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[9px] uppercase opacity-60",children:"School"}),e.jsx("p",{className:"text-xs font-bold",children:l==null?void 0:l.schoolName})]}),e.jsx("div",{className:"h-8 w-8 bg-white rounded flex items-center justify-center",children:e.jsx(Z,{className:"w-6 h-6 text-black"})})]}),!t.isPremium&&e.jsxs("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-[2px] flex flex-col items-center justify-center text-center p-6 z-20",children:[e.jsx(G,{className:"w-10 h-10 text-white/50 mb-2"}),e.jsx("h4",{className:"font-bold text-white text-lg",children:"Unlock ID Card"}),e.jsx("button",{onClick:()=>g(!0),className:"mt-3 bg-yellow-500 hover:bg-yellow-400 text-black text-xs font-bold px-6 py-2.5 rounded-full shadow-lg transition-transform hover:scale-105",children:"Get Verified (â‚¹20)"})]})]})})}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-3xl shadow-sm border border-slate-100 dark:border-slate-700 relative overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx(Pe,{className:"w-5 h-5 text-purple-500"})," Personalize"]}),!t.isPremium&&e.jsx(G,{className:"w-4 h-4 text-slate-400"})]}),!t.isPremium&&e.jsx("div",{className:"absolute inset-0 bg-white/50 dark:bg-slate-900/50 backdrop-blur-[1px] z-10 flex flex-col items-center justify-center",children:e.jsxs("button",{onClick:()=>g(!0),className:"bg-purple-600 hover:bg-purple-700 text-white text-xs font-bold px-6 py-2.5 rounded-full shadow-lg flex items-center gap-2",children:[e.jsx(z,{className:"w-3 h-3 fill-white"})," Unlock Themes"]})}),e.jsx("p",{className:"text-xs text-slate-500 mb-4",children:"Choose your dashboard style:"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsx("button",{onClick:()=>P("DEFAULT"),className:"h-16 rounded-xl bg-blue-600 shadow-lg flex items-center justify-center text-white text-[10px] font-bold",children:"Standard"}),e.jsx("button",{onClick:()=>P("NEON"),className:"h-16 rounded-xl bg-gradient-to-r from-purple-600 to-pink-600 shadow-lg flex items-center justify-center text-white text-[10px] font-bold",children:"Neon"}),e.jsx("button",{onClick:()=>P("GOLD"),className:"h-16 rounded-xl bg-gradient-to-r from-yellow-600 to-amber-700 shadow-lg flex items-center justify-center text-white text-[10px] font-bold",children:"Gold"}),e.jsx("button",{onClick:()=>P("DARK_ROYAL"),className:"h-16 rounded-xl bg-slate-900 shadow-lg flex items-center justify-center text-white text-[10px] font-bold",children:"Dark Royal"}),e.jsx("button",{onClick:()=>P("MINIMAL"),className:"h-16 rounded-xl bg-white border-2 border-slate-200 shadow-sm flex items-center justify-center text-slate-800 text-[10px] font-bold",children:"Minimal"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-3xl shadow-sm border border-slate-100 dark:border-slate-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"font-bold text-lg text-slate-800 dark:text-white flex items-center gap-2",children:[e.jsx(_,{className:"w-5 h-5 text-blue-500"})," Profile Photo"]}),t.isPremium?!o&&e.jsx("button",{onClick:()=>w(!0),className:"text-xs font-bold text-blue-600 underline",children:"Change"}):e.jsx(G,{className:"w-4 h-4 text-slate-400"})]}),o?e.jsxs("div",{className:"space-y-3 bg-slate-50 dark:bg-slate-900 p-4 rounded-xl",children:[e.jsx(X,{className:"h-9 text-xs",placeholder:"Paste Image URL...",value:r,onChange:s=>d(s.target.value)}),e.jsx("p",{className:"text-center text-[10px] text-slate-400 font-bold",children:"OR"}),e.jsxs("label",{className:"cursor-pointer bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 hover:bg-slate-50 p-2 rounded-lg text-xs font-bold text-center flex items-center justify-center gap-2",children:[u?e.jsx(J,{className:"w-3 h-3 animate-spin"}):e.jsx(be,{className:"w-3 h-3"})," Upload Photo",e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:T,disabled:u})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{onClick:C,className:"flex-1 bg-blue-600 text-white text-xs font-bold py-2 rounded-lg",children:"Update"}),e.jsx("button",{onClick:()=>w(!1),className:"flex-1 bg-slate-200 text-slate-600 text-xs font-bold py-2 rounded-lg",children:"Cancel"})]})]}):e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center text-slate-400",children:t.photoUrl?e.jsx("img",{src:t.photoUrl,className:"w-full h-full rounded-full object-cover"}):e.jsx(_,{className:"w-5 h-5"})}),e.jsx("p",{className:"text-xs text-slate-500",children:"Update photo to personalize ID Card."})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-3xl shadow-sm border border-slate-100 dark:border-slate-700",children:[e.jsx("h3",{className:"font-bold text-lg mb-4 text-slate-800 dark:text-white",children:"Security"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(X,{type:"password",placeholder:"New Password",value:n,onChange:s=>v(s.target.value)}),e.jsx(V,{onClick:f,className:"whitespace-nowrap",children:"Update"})]})]}),e.jsxs("button",{onClick:()=>{localStorage.removeItem("school_id"),window.location.reload()},className:"w-full py-4 text-red-500 font-bold text-sm bg-red-50 dark:bg-red-900/10 rounded-2xl hover:bg-red-100 transition-colors flex items-center justify-center gap-2",children:[e.jsx(ue,{className:"w-4 h-4"})," Sign Out"]}),x&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-4 animate-fade-in-up",children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-sm rounded-3xl p-6 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-yellow-400 to-orange-500"}),e.jsx("button",{onClick:()=>g(!1),className:"absolute top-4 right-4 text-slate-400 font-bold",children:"âœ•"}),e.jsxs("div",{className:"text-center mb-6 mt-2",children:[e.jsx("div",{className:"w-16 h-16 bg-yellow-100 dark:bg-yellow-900/30 rounded-full flex items-center justify-center mx-auto mb-4 animate-bounce",children:e.jsx(K,{className:"w-8 h-8 text-yellow-600 dark:text-yellow-400"})}),e.jsx("h3",{className:"text-2xl font-black text-slate-900 dark:text-white",children:"Unlock Premium"}),e.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"One-time payment for full access"})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-xl mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-bold text-slate-600 dark:text-slate-300",children:"Annual Fee"}),e.jsx("span",{className:"text-lg font-black text-slate-900 dark:text-white",children:"â‚¹20"})]}),e.jsx("div",{className:"h-px bg-slate-200 dark:border-slate-700 my-2"}),e.jsxs("ul",{className:"space-y-3 text-xs text-slate-500 dark:text-slate-400 mt-3",children:[e.jsxs("li",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-green-100 p-1 rounded-full text-green-600",children:e.jsx(F,{className:"w-3 h-3"})}),e.jsxs("span",{children:[e.jsx("b",{children:"Verified Badge"})," on Profile"]})]}),e.jsxs("li",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-green-100 p-1 rounded-full text-green-600",children:e.jsx(F,{className:"w-3 h-3"})}),e.jsxs("span",{children:[e.jsx("b",{children:"Download"})," Digital ID Card"]})]}),e.jsxs("li",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-green-100 p-1 rounded-full text-green-600",children:e.jsx(F,{className:"w-3 h-3"})}),e.jsxs("span",{children:[e.jsx("b",{children:"AI Analytics"})," & Study Tips"]})]}),e.jsxs("li",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-green-100 p-1 rounded-full text-green-600",children:e.jsx(F,{className:"w-3 h-3"})}),e.jsxs("span",{children:[e.jsx("b",{children:"Customize"})," Dashboard Themes"]})]})]})]}),e.jsx("button",{onClick:D,disabled:S,className:"w-full bg-gradient-to-r from-yellow-500 to-orange-600 text-white font-bold py-4 rounded-xl shadow-lg shadow-orange-500/30 flex items-center justify-center gap-2 transition-transform active:scale-95",children:S?e.jsx(J,{className:"w-5 h-5 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(pe,{className:"w-5 h-5"})," Pay â‚¹20 Now"]})})]})})]})},Le=({targetDate:t})=>{const[l,h]=a.useState("");return a.useEffect(()=>{const o=setInterval(()=>{const w=new Date().getTime(),d=new Date(t).getTime()-w;if(d<=0)h("READY"),clearInterval(o);else{const u=Math.floor(d%864e5/36e5),p=Math.floor(d%(1e3*60*60)/(1e3*60)),n=Math.floor(d%(1e3*60)/1e3);h(`Starts in: ${u}h ${p}m ${n}s`)}},1e3);return()=>clearInterval(o)},[t]),e.jsxs("span",{className:`text-[10px] font-bold px-2 py-1 rounded flex items-center gap-1 ${l==="READY"?"bg-green-100 text-green-700 animate-pulse":"bg-blue-50 text-blue-600"}`,children:[e.jsx(R,{className:"w-3 h-3"})," ",l||"Loading..."]})},Me=({user:t})=>{const[l,h]=a.useState([]),[o,w]=a.useState(!0),[r,d]=a.useState(null),[u,p]=a.useState([]),[n,v]=a.useState({}),[x,g]=a.useState(0),[S,k]=a.useState(0),[T,C]=a.useState(!1),[f,D]=a.useState(null),[P,s]=a.useState(!1);a.useEffect(()=>{b()},[]),a.useEffect(()=>{if(!r)return;const i=setInterval(()=>{g(c=>c<=1?(clearInterval(i),M(),0):c-1)},1e3);return()=>clearInterval(i)},[r]);const b=async()=>{w(!0);const i=await N.getExamsForClass(t.classId);h(i),w(!1)},I=async i=>{var W;const c=await N.getExamSubmission(i.id,t.id);if(c&&c.submittedAt){D(c);return}const m=new Date,y=new Date(i.endTime),j=new Date(i.startTime);if(m<j)return alert("Exam has not started yet.");if(m>y)return alert("Exam expired.");const E=await N.startExamAttempt(i.id,t.id);if(!E.success)return alert("Failed to start exam: "+E.message);const L=new Date(E.startedAt),$=Math.floor((new Date().getTime()-L.getTime())/1e3),ie=i.durationMinutes*60,H=Math.max(0,ie-$);if(H<=0){alert("Time Limit Exceeded!"),await N.submitExam(i.id,t.id,{},0,0);return}let Y=[...i.questions];(W=i.settings)!=null&&W.shuffleQuestions&&(Y=Y.sort(()=>Math.random()-.5)),p(Y),d(i),g(H),v((c==null?void 0:c.answers)||{}),k(0)},U=(i,c)=>{v(m=>({...m,[i]:c}))},M=async()=>{var j;if(!r||T)return;C(!0);let i=0,c=0;r.questions.forEach(E=>{c+=E.marks,n[E.id]===E.correctOptionIndex&&(i+=E.marks)});const m=await N.submitExam(r.id,t.id,n,i,c);C(!1);const y=r;if(d(null),m.success)if((j=y.settings)!=null&&j.showResultImmediately){const E=await N.getExamSubmission(y.id,t.id);D(E)}else alert("Exam Submitted! Result will be published by teacher."),b();else alert("Submission failed. Please contact teacher.")},Q=i=>{const c=Math.floor(i/60),m=i%60;return`${c}:${m.toString().padStart(2,"0")}`};if(r){const i=u[S];return e.jsxs("div",{className:"fixed inset-0 z-50 bg-white dark:bg-slate-900 flex flex-col animate-fade-in-up",children:[e.jsxs("div",{className:"p-4 bg-slate-900 text-white flex justify-between items-center shadow-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-sm opacity-80",children:r.title}),e.jsxs("p",{className:"text-xs",children:["Q ",S+1," / ",u.length]})]}),e.jsx("div",{className:`font-mono text-xl font-bold px-3 py-1 rounded-lg ${x<60?"bg-red-500 animate-pulse":"bg-white/20"}`,children:Q(x)})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white mb-6 leading-relaxed",children:i.text}),e.jsx("div",{className:"space-y-3",children:i.options.map((c,m)=>e.jsx("div",{onClick:()=>U(i.id,m),className:`p-4 rounded-xl border-2 cursor-pointer transition-all ${n[i.id]===m?"border-blue-500 bg-blue-50 dark:bg-blue-900/30":"border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${n[i.id]===m?"border-blue-500 bg-blue-500 text-white":"border-slate-300"}`,children:n[i.id]===m&&e.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),e.jsx("span",{className:"text-slate-700 dark:text-slate-200 font-medium",children:c})]})},m))})]}),e.jsxs("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700 flex justify-between gap-4",children:[e.jsx("button",{disabled:S===0,onClick:()=>k(c=>c-1),className:"px-6 py-3 rounded-xl bg-slate-100 dark:bg-slate-800 font-bold text-slate-500 disabled:opacity-50",children:e.jsx(fe,{className:"w-5 h-5"})}),S===u.length-1?e.jsx("button",{onClick:M,className:"flex-1 bg-green-600 hover:bg-green-700 text-white font-bold rounded-xl py-3 shadow-lg shadow-green-500/30",children:"Submit Exam"}):e.jsxs("button",{onClick:()=>k(c=>c+1),className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-xl py-3 flex items-center justify-center gap-2",children:["Next Question ",e.jsx(te,{className:"w-5 h-5"})]})]})]})}if(f){const i=l.find(c=>c.id===f.examId);return e.jsxs("div",{className:"animate-fade-in-up space-y-6",children:[e.jsxs(A,{className:"text-center py-10 bg-gradient-to-b from-blue-50 to-white dark:from-slate-800 dark:to-slate-900",children:[e.jsx("div",{className:"w-24 h-24 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(B,{className:"w-12 h-12 text-blue-600"})}),e.jsx("h2",{className:"text-2xl font-black text-slate-800 dark:text-white mb-2",children:"Exam Completed!"}),e.jsx("p",{className:"text-slate-500 mb-6",children:"You scored"}),e.jsx("div",{className:"text-6xl font-black text-blue-600 mb-2",children:f.score}),e.jsxs("p",{className:"text-sm font-bold text-slate-400 uppercase tracking-widest",children:["Out of ",f.totalMarks]}),e.jsxs("div",{className:"mt-8 flex gap-3 justify-center",children:[e.jsx(V,{onClick:()=>D(null),variant:"secondary",children:"Back to Exams"}),e.jsx(V,{onClick:()=>s(!0),className:"bg-blue-600 text-white",children:"View Solution"})]})]}),P&&i&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-bold text-lg dark:text-white",children:"Answer Key"}),i.questions.map((c,m)=>{const y=f.answers[c.id],j=y===c.correctOptionIndex;return e.jsxs(A,{className:`border-l-4 ${j?"border-green-500":"border-red-500"}`,children:[e.jsxs("div",{className:"mb-2 font-bold text-slate-800 dark:text-white text-sm",children:[e.jsxs("span",{className:"text-slate-400 mr-2",children:[m+1,"."]})," ",c.text]}),e.jsx("div",{className:"space-y-1",children:c.options.map((E,L)=>{let $="p-2 rounded text-xs border border-transparent";return L===c.correctOptionIndex?$+=" bg-green-50 dark:bg-green-900/20 text-green-700 border-green-200 font-bold":L===y&&!j?$+=" bg-red-50 dark:bg-red-900/20 text-red-700 border-red-200":$+=" text-slate-500 opacity-70",e.jsxs("div",{className:$,children:[E,L===c.correctOptionIndex&&e.jsx(ge,{className:"w-3 h-3 inline ml-2"}),L===y&&!j&&e.jsx(le,{className:"w-3 h-3 inline ml-2"})]},L)})})]},c.id)})]})]})}return e.jsxs("div",{className:"space-y-4 animate-fade-in-up",children:[e.jsx("h3",{className:"font-bold text-lg dark:text-white mb-4",children:"Scheduled Exams"}),l.map(i=>{const c=new Date,m=new Date(i.startTime),y=new Date(i.endTime);let j="UPCOMING";return c>y?j="EXPIRED":c>=m&&(j="LIVE"),e.jsxs(A,{className:"relative overflow-hidden",children:[e.jsx("div",{className:`absolute left-0 top-0 bottom-0 w-1.5 ${j==="LIVE"?"bg-green-500":j==="UPCOMING"?"bg-yellow-500":"bg-slate-300"}`}),e.jsxs("div",{className:"pl-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h4",{className:"font-bold text-slate-800 dark:text-white text-lg",children:i.title}),e.jsx("span",{className:`text-[10px] font-black px-2 py-1 rounded uppercase ${j==="LIVE"?"bg-green-100 text-green-700 animate-pulse":"bg-slate-100 text-slate-500"}`,children:j})]}),e.jsx("p",{className:"text-xs text-slate-500 mb-4 line-clamp-2",children:i.description||"No instructions provided."}),e.jsxs("div",{className:"flex items-center gap-4 text-xs font-bold text-slate-600 dark:text-slate-400 mb-4",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(R,{className:"w-3 h-3"})," ",i.durationMinutes," Mins"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(je,{className:"w-3 h-3"})," ",i.questions.length," Qs"]})]}),e.jsx("div",{className:"flex gap-2 items-center",children:j==="UPCOMING"?e.jsx("div",{className:"flex-1 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 p-2 rounded-lg text-center",children:e.jsx(Le,{targetDate:i.startTime})}):e.jsx("button",{onClick:()=>I(i),className:`flex-1 py-3 rounded-xl font-bold flex items-center justify-center gap-2 transition-all ${j==="LIVE"?"bg-blue-600 text-white hover:bg-blue-700 shadow-lg shadow-blue-500/30":"bg-slate-100 text-slate-400"}`,children:j==="LIVE"?e.jsxs(e.Fragment,{children:[e.jsx(Ne,{className:"w-4 h-4 fill-white"})," Start Exam"]}):"View Result"})})]})]},i.id)}),l.length===0&&e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-slate-400 text-sm",children:"No exams scheduled for your class."})})]})},Ue=({user:t})=>{const[l,h]=a.useState([]),[o,w]=a.useState([]),[r,d]=a.useState(!0),[u,p]=a.useState(null),[n,v]=a.useState(null),[x,g]=a.useState(""),[S,k]=a.useState(!1);a.useEffect(()=>{T()},[t]);const T=async()=>{d(!0);const s=await N.getFeeStructures(t.classId),b=await N.getStudentPayments(t.id);h(s),w(b),d(!1)},C=s=>{const b=o.find(U=>U.feeId===s.id);return b&&b.status==="PAID"?{label:"PAID",color:"text-green-600 bg-green-50 border-green-200",icon:B,paidAmount:b.amountPaid}:s.dueDate&&new Date(s.dueDate)<new Date?{label:"OVERDUE",color:"text-red-600 bg-red-50 border-red-200",icon:se,paidAmount:0}:{label:"PENDING",color:"text-slate-500 bg-slate-50 border-slate-200",icon:R,paidAmount:0}},f=async()=>{if(!n||!x||!u)return alert("All fields required");k(!0);const s=await N.submitPaymentProof(u.amount,x,n,"STUDENT_FEE",{studentId:t.id,feeId:u.id});k(!1),s.success?(alert("Proof uploaded! Status will update after verification."),p(null)):alert("Failed: "+s.message)};if(r)return e.jsx("div",{className:"text-center py-10 text-slate-400",children:"Loading Fees..."});const D=l.reduce((s,b)=>s+b.amount,0),P=o.reduce((s,b)=>s+(b.amountPaid||0),0);return e.jsxs("div",{className:"space-y-6 animate-fade-in-up",children:[e.jsxs(A,{className:"bg-gradient-to-r from-emerald-600 to-teal-600 text-white border-none",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:e.jsx(re,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg",children:"Fee Summary"}),e.jsx("p",{className:"text-xs text-emerald-100",children:"Academic Year 2024-25"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-emerald-200 uppercase mb-1",children:"Total Payable"}),e.jsxs("p",{className:"text-2xl font-black",children:["â‚¹",D]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-emerald-200 uppercase mb-1",children:"Paid So Far"}),e.jsxs("p",{className:"text-2xl font-black",children:["â‚¹",P]})]})]})]}),e.jsx("div",{className:"space-y-3",children:l.map(s=>{const b=C(s),I=b.icon;return e.jsxs("div",{className:`p-4 rounded-xl border flex justify-between items-center bg-white dark:bg-slate-800 ${b.label==="OVERDUE"?"border-red-200":"border-slate-100 dark:border-slate-700"}`,children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-full ${b.color.split(" ")[1]} ${b.color.split(" ")[0]}`,children:e.jsx(I,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-slate-800 dark:text-white text-sm",children:s.name}),e.jsxs("p",{className:"text-xs text-slate-500",children:["Due: ",s.dueDate?new Date(s.dueDate).toLocaleDateString():"N/A"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-black text-slate-800 dark:text-white",children:["â‚¹",s.amount]}),b.label==="PAID"?e.jsx("div",{className:"text-[10px] text-green-600 font-bold mt-1 uppercase",children:"PAID"}):e.jsx("button",{onClick:()=>p(s),className:"text-[10px] bg-blue-600 text-white px-2 py-1 rounded font-bold mt-1",children:"Pay / Upload Proof"})]})]},s.id)})}),u&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-4 animate-fade-in-up",children:e.jsxs(A,{className:"w-full max-w-sm relative",children:[e.jsx("button",{onClick:()=>p(null),className:"absolute top-4 right-4 text-slate-400",children:e.jsx(we,{className:"w-5 h-5"})}),e.jsxs("h3",{className:"font-bold text-lg text-slate-800 dark:text-white mb-2",children:["Pay: ",u.name]}),e.jsxs("p",{className:"text-sm text-slate-500 mb-4",children:["Please pay ",e.jsxs("b",{children:["â‚¹",u.amount]})," to the school account and upload screenshot."]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{className:"w-full border rounded p-2 text-sm",placeholder:"UTR / Ref Number",value:x,onChange:s=>g(s.target.value)}),e.jsxs("label",{className:"block w-full border-2 border-dashed border-slate-300 rounded p-4 text-center cursor-pointer hover:bg-slate-50",children:[n?n.name:e.jsxs(e.Fragment,{children:[e.jsx(ve,{className:"w-6 h-6 mx-auto text-slate-400 mb-1"}),e.jsx("span",{className:"text-xs text-slate-500",children:"Tap to Upload Screenshot"})]}),e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:s=>{var b;return v(((b=s.target.files)==null?void 0:b[0])||null)}})]}),e.jsx(V,{onClick:f,disabled:S,className:"w-full bg-blue-600 text-white",children:S?"Uploading...":"Submit Payment Proof"})]})]})})]})},$e=({user:t})=>{const[l,h]=a.useState(null),[o,w]=a.useState(!0);return a.useEffect(()=>{(async()=>{const d=await N.getStudentAssessmentStats(t.id);h(d),w(!1)})()},[t]),o?e.jsx("div",{className:"text-center py-10 text-slate-400",children:"Loading Reports..."}):e.jsxs("div",{className:"space-y-6 animate-fade-in-up",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs(A,{className:"bg-gradient-to-br from-purple-600 to-indigo-600 text-white border-none",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1 opacity-80",children:[e.jsx(z,{className:"w-4 h-4 text-yellow-300 fill-yellow-300"}),e.jsx("span",{className:"text-xs font-bold uppercase",children:"Total Stars"})]}),e.jsx("h3",{className:"text-3xl font-black",children:l.history.reduce((r,d)=>r+(d.type==="STAR"?d.score:0),0)})]}),e.jsxs(A,{className:"bg-white dark:bg-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1 text-slate-500",children:[e.jsx(Se,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-bold uppercase",children:"Activities"})]}),e.jsx("h3",{className:"text-3xl font-black text-slate-800 dark:text-white",children:l.history.length})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white text-sm mb-3 flex items-center gap-2",children:[e.jsx(Ce,{className:"w-4 h-4 text-orange-500"})," Performance by Category"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-3",children:[l.programs.map((r,d)=>e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-100 dark:border-slate-700 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h4",{className:"font-bold text-sm text-slate-800 dark:text-white truncate",children:r.name}),e.jsx("span",{className:"text-[10px] font-bold bg-slate-100 dark:bg-slate-700 px-2 py-0.5 rounded text-slate-500",children:r.type})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx("span",{className:"text-2xl font-black text-blue-600",children:r.totalScore}),e.jsxs("span",{className:"text-xs text-slate-400 mb-1",children:["points in ",r.entries," sessions"]})]})]},d)),l.programs.length===0&&e.jsx("p",{className:"col-span-full text-center text-xs text-slate-400",children:"No active assessments."})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white text-sm mb-3 flex items-center gap-2",children:[e.jsx(O,{className:"w-4 h-4 text-blue-500"})," Recent Logs"]}),e.jsx("div",{className:"space-y-2",children:l.history.slice(0,10).map((r,d)=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-white dark:bg-slate-800 rounded-lg border border-slate-50 dark:border-slate-700",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-xs text-slate-700 dark:text-slate-300",children:r.program}),e.jsx("p",{className:"text-[10px] text-slate-400",children:new Date(r.date).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[r.type==="STAR"&&e.jsx(z,{className:"w-3 h-3 text-yellow-400 fill-yellow-400"}),e.jsx("span",{className:"font-black text-sm text-slate-800 dark:text-white",children:r.score}),e.jsxs("span",{className:"text-[10px] text-slate-400",children:["/ ",r.max]})]})]},d))})]})]})},Re=({user:t})=>{const[l,h]=a.useState([]),[o,w]=a.useState([]),[r,d]=a.useState(!0);a.useEffect(()=>{u()},[t]);const u=async()=>{d(!0);const x=await N.getStudentAttendanceStats(t.id);h(x.dailyStats),w(x.summaryStats),d(!1)};if(r)return e.jsx("div",{className:"text-center py-10 text-slate-400",children:"Loading Attendance..."});const p=l.filter(x=>x.status==="PRESENT").length,n=l.length,v=n>0?Math.round(p/n*100):0;return e.jsxs("div",{className:"space-y-6 animate-fade-in-up",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs(A,{className:"bg-gradient-to-br from-green-600 to-emerald-700 text-white border-none",children:[e.jsx("p",{className:"text-xs font-bold opacity-80 uppercase mb-1",children:"Attendance"}),e.jsxs("h3",{className:"text-4xl font-black",children:[o.length>0?o[0].percentage:v,"%"]}),e.jsx("p",{className:"text-[10px] mt-2 bg-white/20 inline-block px-2 py-0.5 rounded",children:o.length>0?o[0].term:"Overall"})]}),e.jsxs(A,{className:"bg-white dark:bg-slate-800",children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase mb-1",children:"Days Present"}),e.jsx("h3",{className:"text-3xl font-black text-slate-800 dark:text-white",children:o.length>0?o[0].presentDays:p}),e.jsxs("p",{className:"text-[10px] text-slate-400 mt-1",children:["Out of ",o.length>0?o[0].workingDays:n," working days"]})]})]}),l.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white text-sm mb-3 flex items-center gap-2",children:[e.jsx(O,{className:"w-4 h-4 text-blue-500"})," Recent Activity"]}),e.jsx("div",{className:"space-y-2",children:l.slice(0,10).map((x,g)=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-white dark:bg-slate-800 rounded-lg border border-slate-100 dark:border-slate-700 shadow-sm",children:[e.jsx("span",{className:"text-xs font-bold text-slate-700 dark:text-slate-300",children:new Date(x.date).toLocaleDateString()}),e.jsxs("span",{className:`text-[10px] font-bold px-2 py-1 rounded flex items-center gap-1 ${x.status==="PRESENT"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[x.status==="PRESENT"?e.jsx(B,{className:"w-3 h-3"}):e.jsx(le,{className:"w-3 h-3"}),x.status]})]},g))})]}),o.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-800 dark:text-white text-sm mb-3 mt-6",children:"Term History"}),e.jsx("div",{className:"space-y-2",children:o.map((x,g)=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-white dark:bg-slate-800 rounded-lg border border-slate-100 dark:border-slate-700",children:[e.jsx("span",{className:"text-xs font-bold text-slate-700 dark:text-slate-300",children:x.term}),e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:"block text-sm font-black text-purple-600",children:[x.percentage,"%"]}),e.jsxs("span",{className:"text-[10px] text-slate-400",children:[x.presentDays,"/",x.workingDays," Days"]})]})]},g))})]}),l.length===0&&o.length===0&&e.jsx("div",{className:"text-center py-12 border-2 border-dashed border-slate-200 dark:border-slate-700 rounded-2xl",children:e.jsx("p",{className:"text-slate-400 text-sm",children:"No attendance records found."})})]})},Ve=({user:t})=>{ee();const[l,h]=a.useState("home"),[o,w]=a.useState(null),[r,d]=a.useState([]),[u,p]=a.useState([]),[n,v]=a.useState(null),[x,g]=a.useState([]),[S,k]=a.useState(!1),[T,C]=a.useState(0),[f,D]=a.useState(t),[P,s]=a.useState("Welcome"),[b,I]=a.useState({fees:!0,assessments:!0}),[U,M]=a.useState("bg-blue-600 shadow-blue-600/20");a.useEffect(()=>{D(t),Q();const m=new Date().getHours();m<12?s("Good Morning"):m<18?s("Good Afternoon"):s("Good Evening")},[t]),a.useEffect(()=>{var j;switch(((j=(f.socialLinks||{})._preferences)==null?void 0:j.theme)||"DEFAULT"){case"NEON":M("bg-gradient-to-r from-purple-600 to-pink-600 shadow-purple-500/30");break;case"GOLD":M("bg-gradient-to-r from-yellow-600 to-amber-700 shadow-amber-500/30");break;case"DARK_ROYAL":M("bg-slate-900 shadow-slate-900/50");break;case"MINIMAL":M("bg-white border-b border-slate-200 !text-slate-900 shadow-sm");break;default:M(f.isPremium?"bg-slate-900 shadow-2xl shadow-yellow-900/20":"bg-blue-600 shadow-xl shadow-blue-600/20")}},[f]);const Q=async()=>{const m=await N.getMarks(t.id,"Term 1");w(m);const y=await N.getStudentRequests(t.id);p(y);const j=await N.getSchoolConfig();v(j);const E=await N.getGlobalSettings();I({fees:E.MODULE_FEES!=="FALSE",assessments:E.MODULE_ASSESSMENTS!=="FALSE"});const L=await N.getAssessmentPrograms(void 0,t.classId);d(L),i()},i=async()=>{const m=localStorage.getItem("school_id");if(!m)return;const y=await N.getCampusPosts(m,"NOTICE");g(y),C(y.length)},c=m=>{D(y=>({...y,...m}))};return e.jsxs("div",{className:`min-h-screen pb-20 transition-colors duration-300 ${U.includes("bg-slate-900")?"text-white bg-slate-950":"text-slate-900 bg-slate-50"}`,children:[e.jsxs("div",{className:`p-6 pb-12 rounded-b-[2.5rem] relative overflow-hidden ${U}`,children:[e.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-20"}),e.jsxs("div",{className:"relative z-10 flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:f.photoUrl||`https://api.dicebear.com/7.x/avataaars/svg?seed=${f.name}`,className:"w-12 h-12 rounded-full border-2 border-white/30 bg-white/10 backdrop-blur-sm object-cover",alt:"Profile"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white/80 text-xs font-bold uppercase tracking-wider mb-0.5",children:P}),e.jsx("h2",{className:"text-white text-xl font-black leading-none",children:f.name.split(" ")[0]})]})]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs("button",{onClick:()=>k(!0),className:"relative p-2 bg-white/10 hover:bg-white/20 rounded-full backdrop-blur-sm transition-all",children:[e.jsx(Ee,{className:"w-5 h-5 text-white"}),T>0&&e.jsx("span",{className:"absolute top-0 right-0 w-2.5 h-2.5 bg-red-500 rounded-full border-2 border-blue-600"})]})})]})]}),e.jsxs("div",{className:"px-4 -mt-8 relative z-20",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-xl p-2 mb-6 flex justify-between items-center overflow-x-auto custom-scrollbar border border-slate-100 dark:border-slate-800",children:[e.jsxs("button",{onClick:()=>h("home"),className:`p-3 rounded-xl flex flex-col items-center gap-1 min-w-[60px] transition-all ${l==="home"?"bg-blue-50 dark:bg-slate-800 text-blue-600":"text-slate-400"}`,children:[e.jsx(ae,{className:"w-5 h-5"}),e.jsx("span",{className:"text-[9px] font-bold",children:"Home"})]}),e.jsxs("button",{onClick:()=>h("analytics"),className:`p-3 rounded-xl flex flex-col items-center gap-1 min-w-[60px] transition-all ${l==="analytics"?"bg-blue-50 dark:bg-slate-800 text-blue-600":"text-slate-400"}`,children:[e.jsx(ne,{className:"w-5 h-5"}),e.jsx("span",{className:"text-[9px] font-bold",children:"Marks"})]}),b.assessments&&e.jsxs("button",{onClick:()=>h("behavior"),className:`p-3 rounded-xl flex flex-col items-center gap-1 min-w-[60px] transition-all ${l==="behavior"?"bg-blue-50 dark:bg-slate-800 text-blue-600":"text-slate-400"}`,children:[e.jsx(z,{className:"w-5 h-5"}),e.jsx("span",{className:"text-[9px] font-bold",children:"Skills"})]}),b.fees&&e.jsxs("button",{onClick:()=>h("fees"),className:`p-3 rounded-xl flex flex-col items-center gap-1 min-w-[60px] transition-all ${l==="fees"?"bg-blue-50 dark:bg-slate-800 text-blue-600":"text-slate-400"}`,children:[e.jsx(re,{className:"w-5 h-5"}),e.jsx("span",{className:"text-[9px] font-bold",children:"Fees"})]}),e.jsxs("button",{onClick:()=>h("exams"),className:`p-3 rounded-xl flex flex-col items-center gap-1 min-w-[60px] transition-all ${l==="exams"?"bg-blue-50 dark:bg-slate-800 text-blue-600":"text-slate-400"}`,children:[e.jsx(R,{className:"w-5 h-5"}),e.jsx("span",{className:"text-[9px] font-bold",children:"Exams"})]}),e.jsxs("button",{onClick:()=>h("attendance"),className:`p-3 rounded-xl flex flex-col items-center gap-1 min-w-[60px] transition-all ${l==="attendance"?"bg-blue-50 dark:bg-slate-800 text-blue-600":"text-slate-400"}`,children:[e.jsx(O,{className:"w-5 h-5"}),e.jsx("span",{className:"text-[9px] font-bold",children:"Attend"})]}),e.jsxs("button",{onClick:()=>h("profile"),className:`p-3 rounded-xl flex flex-col items-center gap-1 min-w-[60px] transition-all ${l==="profile"?"bg-blue-50 dark:bg-slate-800 text-blue-600":"text-slate-400"}`,children:[e.jsx(_,{className:"w-5 h-5"}),e.jsx("span",{className:"text-[9px] font-bold",children:"Profile"})]})]}),e.jsxs("div",{className:"pb-10",children:[l==="home"&&e.jsx(De,{user:f,marks:o,assessments:r,schoolConfig:n}),l==="analytics"&&e.jsx(Te,{marks:o,user:f}),l==="profile"&&e.jsx(Ie,{user:f,schoolConfig:n,onUpdateUser:c}),l==="exams"&&e.jsx(Me,{user:f}),l==="fees"&&e.jsx(Ue,{user:f}),l==="behavior"&&e.jsx($e,{user:f}),l==="attendance"&&e.jsx(Re,{user:f})]})]}),S&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-fade-in-up",onClick:()=>k(!1),children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-sm rounded-3xl p-6 shadow-2xl relative",onClick:m=>m.stopPropagation(),children:[e.jsx("h3",{className:"font-bold text-lg mb-4 dark:text-white",children:"Notifications"}),e.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:x.length>0?x.map(m=>e.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-800 rounded-xl border border-slate-100 dark:border-slate-700",children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 mb-1",children:new Date(m.createdAt).toLocaleDateString()}),e.jsx("p",{className:"text-sm font-medium text-slate-800 dark:text-white",children:m.message})]},m.id)):e.jsx("p",{className:"text-center text-slate-400 text-sm py-8",children:"No new notifications."})}),e.jsx("button",{onClick:()=>k(!1),className:"w-full mt-4 py-3 bg-slate-100 dark:bg-slate-800 rounded-xl font-bold text-sm text-slate-600 dark:text-slate-300",children:"Close"})]})})]})};export{Ve as default};
