function eh(t,e){for(var r=0;r<e.length;r++){const s=e[r];if(typeof s!="string"&&!Array.isArray(s)){for(const n in s)if(n!=="default"&&!(n in t)){const a=Object.getOwnPropertyDescriptor(s,n);a&&Object.defineProperty(t,n,a.get?a:{enumerable:!0,get:()=>s[n]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function r(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(n){if(n.ep)return;n.ep=!0;const a=r(n);fetch(n.href,a)}})();function qp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Vp(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var n=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(r,s,n.get?n:{enumerable:!0,get:function(){return t[s]}})}),r}var th={exports:{}},yi={},rh={exports:{}},Y={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hn=Symbol.for("react.element"),Wp=Symbol.for("react.portal"),Hp=Symbol.for("react.fragment"),Kp=Symbol.for("react.strict_mode"),Gp=Symbol.for("react.profiler"),Jp=Symbol.for("react.provider"),Yp=Symbol.for("react.context"),Qp=Symbol.for("react.forward_ref"),Xp=Symbol.for("react.suspense"),Zp=Symbol.for("react.memo"),e0=Symbol.for("react.lazy"),su=Symbol.iterator;function t0(t){return t===null||typeof t!="object"?null:(t=su&&t[su]||t["@@iterator"],typeof t=="function"?t:null)}var sh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},nh=Object.assign,ah={};function qs(t,e,r){this.props=t,this.context=e,this.refs=ah,this.updater=r||sh}qs.prototype.isReactComponent={};qs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};qs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ih(){}ih.prototype=qs.prototype;function Vo(t,e,r){this.props=t,this.context=e,this.refs=ah,this.updater=r||sh}var Wo=Vo.prototype=new ih;Wo.constructor=Vo;nh(Wo,qs.prototype);Wo.isPureReactComponent=!0;var nu=Array.isArray,lh=Object.prototype.hasOwnProperty,Ho={current:null},oh={key:!0,ref:!0,__self:!0,__source:!0};function ch(t,e,r){var s,n={},a=null,l=null;if(e!=null)for(s in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(a=""+e.key),e)lh.call(e,s)&&!oh.hasOwnProperty(s)&&(n[s]=e[s]);var o=arguments.length-2;if(o===1)n.children=r;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];n.children=c}if(t&&t.defaultProps)for(s in o=t.defaultProps,o)n[s]===void 0&&(n[s]=o[s]);return{$$typeof:Hn,type:t,key:a,ref:l,props:n,_owner:Ho.current}}function r0(t,e){return{$$typeof:Hn,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ko(t){return typeof t=="object"&&t!==null&&t.$$typeof===Hn}function s0(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var au=/\/+/g;function qi(t,e){return typeof t=="object"&&t!==null&&t.key!=null?s0(""+t.key):e.toString(36)}function Ca(t,e,r,s,n){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case Hn:case Wp:l=!0}}if(l)return l=t,n=n(l),t=s===""?"."+qi(l,0):s,nu(n)?(r="",t!=null&&(r=t.replace(au,"$&/")+"/"),Ca(n,e,r,"",function(u){return u})):n!=null&&(Ko(n)&&(n=r0(n,r+(!n.key||l&&l.key===n.key?"":(""+n.key).replace(au,"$&/")+"/")+t)),e.push(n)),1;if(l=0,s=s===""?".":s+":",nu(t))for(var o=0;o<t.length;o++){a=t[o];var c=s+qi(a,o);l+=Ca(a,e,r,c,n)}else if(c=t0(t),typeof c=="function")for(t=c.call(t),o=0;!(a=t.next()).done;)a=a.value,c=s+qi(a,o++),l+=Ca(a,e,r,c,n);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function ea(t,e,r){if(t==null)return t;var s=[],n=0;return Ca(t,s,"","",function(a){return e.call(r,a,n++)}),s}function n0(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var We={current:null},Pa={transition:null},a0={ReactCurrentDispatcher:We,ReactCurrentBatchConfig:Pa,ReactCurrentOwner:Ho};function uh(){throw Error("act(...) is not supported in production builds of React.")}Y.Children={map:ea,forEach:function(t,e,r){ea(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return ea(t,function(){e++}),e},toArray:function(t){return ea(t,function(e){return e})||[]},only:function(t){if(!Ko(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Y.Component=qs;Y.Fragment=Hp;Y.Profiler=Gp;Y.PureComponent=Vo;Y.StrictMode=Kp;Y.Suspense=Xp;Y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=a0;Y.act=uh;Y.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=nh({},t.props),n=t.key,a=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,l=Ho.current),e.key!==void 0&&(n=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(c in e)lh.call(e,c)&&!oh.hasOwnProperty(c)&&(s[c]=e[c]===void 0&&o!==void 0?o[c]:e[c])}var c=arguments.length-2;if(c===1)s.children=r;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];s.children=o}return{$$typeof:Hn,type:t.type,key:n,ref:a,props:s,_owner:l}};Y.createContext=function(t){return t={$$typeof:Yp,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Jp,_context:t},t.Consumer=t};Y.createElement=ch;Y.createFactory=function(t){var e=ch.bind(null,t);return e.type=t,e};Y.createRef=function(){return{current:null}};Y.forwardRef=function(t){return{$$typeof:Qp,render:t}};Y.isValidElement=Ko;Y.lazy=function(t){return{$$typeof:e0,_payload:{_status:-1,_result:t},_init:n0}};Y.memo=function(t,e){return{$$typeof:Zp,type:t,compare:e===void 0?null:e}};Y.startTransition=function(t){var e=Pa.transition;Pa.transition={};try{t()}finally{Pa.transition=e}};Y.unstable_act=uh;Y.useCallback=function(t,e){return We.current.useCallback(t,e)};Y.useContext=function(t){return We.current.useContext(t)};Y.useDebugValue=function(){};Y.useDeferredValue=function(t){return We.current.useDeferredValue(t)};Y.useEffect=function(t,e){return We.current.useEffect(t,e)};Y.useId=function(){return We.current.useId()};Y.useImperativeHandle=function(t,e,r){return We.current.useImperativeHandle(t,e,r)};Y.useInsertionEffect=function(t,e){return We.current.useInsertionEffect(t,e)};Y.useLayoutEffect=function(t,e){return We.current.useLayoutEffect(t,e)};Y.useMemo=function(t,e){return We.current.useMemo(t,e)};Y.useReducer=function(t,e,r){return We.current.useReducer(t,e,r)};Y.useRef=function(t){return We.current.useRef(t)};Y.useState=function(t){return We.current.useState(t)};Y.useSyncExternalStore=function(t,e,r){return We.current.useSyncExternalStore(t,e,r)};Y.useTransition=function(){return We.current.useTransition()};Y.version="18.3.1";rh.exports=Y;var b=rh.exports;const dh=qp(b),i0=eh({__proto__:null,default:dh},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l0=b,o0=Symbol.for("react.element"),c0=Symbol.for("react.fragment"),u0=Object.prototype.hasOwnProperty,d0=l0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,h0={key:!0,ref:!0,__self:!0,__source:!0};function hh(t,e,r){var s,n={},a=null,l=null;r!==void 0&&(a=""+r),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(l=e.ref);for(s in e)u0.call(e,s)&&!h0.hasOwnProperty(s)&&(n[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)n[s]===void 0&&(n[s]=e[s]);return{$$typeof:o0,type:t,key:a,ref:l,props:n,_owner:d0.current}}yi.Fragment=c0;yi.jsx=hh;yi.jsxs=hh;th.exports=yi;var i=th.exports,Cl={},fh={exports:{}},ut={},mh={exports:{}},ph={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(R,M){var V=R.length;R.push(M);e:for(;0<V;){var te=V-1>>>1,ne=R[te];if(0<n(ne,M))R[te]=M,R[V]=ne,V=te;else break e}}function r(R){return R.length===0?null:R[0]}function s(R){if(R.length===0)return null;var M=R[0],V=R.pop();if(V!==M){R[0]=V;e:for(var te=0,ne=R.length,Ke=ne>>>1;te<Ke;){var we=2*(te+1)-1,fe=R[we],Re=we+1,Rt=R[Re];if(0>n(fe,V))Re<ne&&0>n(Rt,fe)?(R[te]=Rt,R[Re]=V,te=Re):(R[te]=fe,R[we]=V,te=we);else if(Re<ne&&0>n(Rt,V))R[te]=Rt,R[Re]=V,te=Re;else break e}}return M}function n(R,M){var V=R.sortIndex-M.sortIndex;return V!==0?V:R.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,o=l.now();t.unstable_now=function(){return l.now()-o}}var c=[],u=[],h=1,d=null,m=3,g=!1,v=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(R){for(var M=r(u);M!==null;){if(M.callback===null)s(u);else if(M.startTime<=R)s(u),M.sortIndex=M.expirationTime,e(c,M);else break;M=r(u)}}function k(R){if(y=!1,x(R),!v)if(r(c)!==null)v=!0,Ce(N);else{var M=r(u);M!==null&&et(k,M.startTime-R)}}function N(R,M){v=!1,y&&(y=!1,f(T),T=-1),g=!0;var V=m;try{for(x(M),d=r(c);d!==null&&(!(d.expirationTime>M)||R&&!X());){var te=d.callback;if(typeof te=="function"){d.callback=null,m=d.priorityLevel;var ne=te(d.expirationTime<=M);M=t.unstable_now(),typeof ne=="function"?d.callback=ne:d===r(c)&&s(c),x(M)}else s(c);d=r(c)}if(d!==null)var Ke=!0;else{var we=r(u);we!==null&&et(k,we.startTime-M),Ke=!1}return Ke}finally{d=null,m=V,g=!1}}var j=!1,S=null,T=-1,W=5,P=-1;function X(){return!(t.unstable_now()-P<W)}function ue(){if(S!==null){var R=t.unstable_now();P=R;var M=!0;try{M=S(!0,R)}finally{M?he():(j=!1,S=null)}}else j=!1}var he;if(typeof p=="function")he=function(){p(ue)};else if(typeof MessageChannel<"u"){var vt=new MessageChannel,Q=vt.port2;vt.port1.onmessage=ue,he=function(){Q.postMessage(null)}}else he=function(){w(ue,0)};function Ce(R){S=R,j||(j=!0,he())}function et(R,M){T=w(function(){R(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(R){R.callback=null},t.unstable_continueExecution=function(){v||g||(v=!0,Ce(N))},t.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<R?Math.floor(1e3/R):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(R){switch(m){case 1:case 2:case 3:var M=3;break;default:M=m}var V=m;m=M;try{return R()}finally{m=V}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(R,M){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var V=m;m=R;try{return M()}finally{m=V}},t.unstable_scheduleCallback=function(R,M,V){var te=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?te+V:te):V=te,R){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=V+ne,R={id:h++,callback:M,priorityLevel:R,startTime:V,expirationTime:ne,sortIndex:-1},V>te?(R.sortIndex=V,e(u,R),r(c)===null&&R===r(u)&&(y?(f(T),T=-1):y=!0,et(k,V-te))):(R.sortIndex=ne,e(c,R),v||g||(v=!0,Ce(N))),R},t.unstable_shouldYield=X,t.unstable_wrapCallback=function(R){var M=m;return function(){var V=m;m=M;try{return R.apply(this,arguments)}finally{m=V}}}})(ph);mh.exports=ph;var f0=mh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m0=b,ct=f0;function C(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gh=new Set,_n={};function Yr(t,e){Is(t,e),Is(t+"Capture",e)}function Is(t,e){for(_n[t]=e,t=0;t<e.length;t++)gh.add(e[t])}var Kt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pl=Object.prototype.hasOwnProperty,p0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,iu={},lu={};function g0(t){return Pl.call(lu,t)?!0:Pl.call(iu,t)?!1:p0.test(t)?lu[t]=!0:(iu[t]=!0,!1)}function x0(t,e,r,s){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function v0(t,e,r,s){if(e===null||typeof e>"u"||x0(t,e,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function He(t,e,r,s,n,a,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=l}var Le={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Le[t]=new He(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Le[e]=new He(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Le[t]=new He(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Le[t]=new He(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Le[t]=new He(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Le[t]=new He(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Le[t]=new He(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Le[t]=new He(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Le[t]=new He(t,5,!1,t.toLowerCase(),null,!1,!1)});var Go=/[\-:]([a-z])/g;function Jo(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Go,Jo);Le[e]=new He(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Go,Jo);Le[e]=new He(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Go,Jo);Le[e]=new He(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Le[t]=new He(t,1,!1,t.toLowerCase(),null,!1,!1)});Le.xlinkHref=new He("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Le[t]=new He(t,1,!1,t.toLowerCase(),null,!0,!0)});function Yo(t,e,r,s){var n=Le.hasOwnProperty(e)?Le[e]:null;(n!==null?n.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(v0(e,r,n,s)&&(r=null),s||n===null?g0(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):n.mustUseProperty?t[n.propertyName]=r===null?n.type===3?!1:"":r:(e=n.attributeName,s=n.attributeNamespace,r===null?t.removeAttribute(e):(n=n.type,r=n===3||n===4&&r===!0?"":""+r,s?t.setAttributeNS(s,e,r):t.setAttribute(e,r))))}var Qt=m0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ta=Symbol.for("react.element"),ms=Symbol.for("react.portal"),ps=Symbol.for("react.fragment"),Qo=Symbol.for("react.strict_mode"),Tl=Symbol.for("react.profiler"),xh=Symbol.for("react.provider"),vh=Symbol.for("react.context"),Xo=Symbol.for("react.forward_ref"),Rl=Symbol.for("react.suspense"),Ol=Symbol.for("react.suspense_list"),Zo=Symbol.for("react.memo"),sr=Symbol.for("react.lazy"),yh=Symbol.for("react.offscreen"),ou=Symbol.iterator;function Qs(t){return t===null||typeof t!="object"?null:(t=ou&&t[ou]||t["@@iterator"],typeof t=="function"?t:null)}var ve=Object.assign,Vi;function an(t){if(Vi===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Vi=e&&e[1]||""}return`
`+Vi+t}var Wi=!1;function Hi(t,e){if(!t||Wi)return"";Wi=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var s=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){s=u}t.call(e.prototype)}else{try{throw Error()}catch(u){s=u}t()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var n=u.stack.split(`
`),a=s.stack.split(`
`),l=n.length-1,o=a.length-1;1<=l&&0<=o&&n[l]!==a[o];)o--;for(;1<=l&&0<=o;l--,o--)if(n[l]!==a[o]){if(l!==1||o!==1)do if(l--,o--,0>o||n[l]!==a[o]){var c=`
`+n[l].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=l&&0<=o);break}}}finally{Wi=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?an(t):""}function y0(t){switch(t.tag){case 5:return an(t.type);case 16:return an("Lazy");case 13:return an("Suspense");case 19:return an("SuspenseList");case 0:case 2:case 15:return t=Hi(t.type,!1),t;case 11:return t=Hi(t.type.render,!1),t;case 1:return t=Hi(t.type,!0),t;default:return""}}function Al(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ps:return"Fragment";case ms:return"Portal";case Tl:return"Profiler";case Qo:return"StrictMode";case Rl:return"Suspense";case Ol:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case vh:return(t.displayName||"Context")+".Consumer";case xh:return(t._context.displayName||"Context")+".Provider";case Xo:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Zo:return e=t.displayName||null,e!==null?e:Al(t.type)||"Memo";case sr:e=t._payload,t=t._init;try{return Al(t(e))}catch{}}return null}function w0(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Al(e);case 8:return e===Qo?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function br(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function wh(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function b0(t){var e=wh(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var n=r.get,a=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return n.call(this)},set:function(l){s=""+l,a.call(this,l)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(l){s=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ra(t){t._valueTracker||(t._valueTracker=b0(t))}function bh(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),s="";return t&&(s=wh(t)?t.checked?"true":"false":t.value),t=s,t!==r?(e.setValue(t),!0):!1}function Ba(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Il(t,e){var r=e.checked;return ve({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function cu(t,e){var r=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;r=br(e.value!=null?e.value:r),t._wrapperState={initialChecked:s,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function kh(t,e){e=e.checked,e!=null&&Yo(t,"checked",e,!1)}function Ll(t,e){kh(t,e);var r=br(e.value),s=e.type;if(r!=null)s==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ul(t,e.type,r):e.hasOwnProperty("defaultValue")&&Ul(t,e.type,br(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function uu(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Ul(t,e,r){(e!=="number"||Ba(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var ln=Array.isArray;function Ns(t,e,r,s){if(t=t.options,e){e={};for(var n=0;n<r.length;n++)e["$"+r[n]]=!0;for(r=0;r<t.length;r++)n=e.hasOwnProperty("$"+t[r].value),t[r].selected!==n&&(t[r].selected=n),n&&s&&(t[r].defaultSelected=!0)}else{for(r=""+br(r),e=null,n=0;n<t.length;n++){if(t[n].value===r){t[n].selected=!0,s&&(t[n].defaultSelected=!0);return}e!==null||t[n].disabled||(e=t[n])}e!==null&&(e.selected=!0)}}function Dl(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(C(91));return ve({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function du(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(C(92));if(ln(r)){if(1<r.length)throw Error(C(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:br(r)}}function _h(t,e){var r=br(e.value),s=br(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),s!=null&&(t.defaultValue=""+s)}function hu(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function jh(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $l(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?jh(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var sa,Sh=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,s,n){MSApp.execUnsafeLocalFunction(function(){return t(e,r,s,n)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(sa=sa||document.createElement("div"),sa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=sa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function jn(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var hn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},k0=["Webkit","ms","Moz","O"];Object.keys(hn).forEach(function(t){k0.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),hn[e]=hn[t]})});function Nh(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||hn.hasOwnProperty(t)&&hn[t]?(""+e).trim():e+"px"}function Eh(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var s=r.indexOf("--")===0,n=Nh(r,e[r],s);r==="float"&&(r="cssFloat"),s?t.setProperty(r,n):t[r]=n}}var _0=ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ml(t,e){if(e){if(_0[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(C(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(C(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(C(61))}if(e.style!=null&&typeof e.style!="object")throw Error(C(62))}}function Fl(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bl=null;function ec(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var zl=null,Es=null,Cs=null;function fu(t){if(t=Jn(t)){if(typeof zl!="function")throw Error(C(280));var e=t.stateNode;e&&(e=ji(e),zl(t.stateNode,t.type,e))}}function Ch(t){Es?Cs?Cs.push(t):Cs=[t]:Es=t}function Ph(){if(Es){var t=Es,e=Cs;if(Cs=Es=null,fu(t),e)for(t=0;t<e.length;t++)fu(e[t])}}function Th(t,e){return t(e)}function Rh(){}var Ki=!1;function Oh(t,e,r){if(Ki)return t(e,r);Ki=!0;try{return Th(t,e,r)}finally{Ki=!1,(Es!==null||Cs!==null)&&(Rh(),Ph())}}function Sn(t,e){var r=t.stateNode;if(r===null)return null;var s=ji(r);if(s===null)return null;r=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(C(231,e,typeof r));return r}var ql=!1;if(Kt)try{var Xs={};Object.defineProperty(Xs,"passive",{get:function(){ql=!0}}),window.addEventListener("test",Xs,Xs),window.removeEventListener("test",Xs,Xs)}catch{ql=!1}function j0(t,e,r,s,n,a,l,o,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(h){this.onError(h)}}var fn=!1,za=null,qa=!1,Vl=null,S0={onError:function(t){fn=!0,za=t}};function N0(t,e,r,s,n,a,l,o,c){fn=!1,za=null,j0.apply(S0,arguments)}function E0(t,e,r,s,n,a,l,o,c){if(N0.apply(this,arguments),fn){if(fn){var u=za;fn=!1,za=null}else throw Error(C(198));qa||(qa=!0,Vl=u)}}function Qr(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function Ah(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function mu(t){if(Qr(t)!==t)throw Error(C(188))}function C0(t){var e=t.alternate;if(!e){if(e=Qr(t),e===null)throw Error(C(188));return e!==t?null:t}for(var r=t,s=e;;){var n=r.return;if(n===null)break;var a=n.alternate;if(a===null){if(s=n.return,s!==null){r=s;continue}break}if(n.child===a.child){for(a=n.child;a;){if(a===r)return mu(n),t;if(a===s)return mu(n),e;a=a.sibling}throw Error(C(188))}if(r.return!==s.return)r=n,s=a;else{for(var l=!1,o=n.child;o;){if(o===r){l=!0,r=n,s=a;break}if(o===s){l=!0,s=n,r=a;break}o=o.sibling}if(!l){for(o=a.child;o;){if(o===r){l=!0,r=a,s=n;break}if(o===s){l=!0,s=a,r=n;break}o=o.sibling}if(!l)throw Error(C(189))}}if(r.alternate!==s)throw Error(C(190))}if(r.tag!==3)throw Error(C(188));return r.stateNode.current===r?t:e}function Ih(t){return t=C0(t),t!==null?Lh(t):null}function Lh(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Lh(t);if(e!==null)return e;t=t.sibling}return null}var Uh=ct.unstable_scheduleCallback,pu=ct.unstable_cancelCallback,P0=ct.unstable_shouldYield,T0=ct.unstable_requestPaint,be=ct.unstable_now,R0=ct.unstable_getCurrentPriorityLevel,tc=ct.unstable_ImmediatePriority,Dh=ct.unstable_UserBlockingPriority,Va=ct.unstable_NormalPriority,O0=ct.unstable_LowPriority,$h=ct.unstable_IdlePriority,wi=null,Lt=null;function A0(t){if(Lt&&typeof Lt.onCommitFiberRoot=="function")try{Lt.onCommitFiberRoot(wi,t,void 0,(t.current.flags&128)===128)}catch{}}var Ct=Math.clz32?Math.clz32:U0,I0=Math.log,L0=Math.LN2;function U0(t){return t>>>=0,t===0?32:31-(I0(t)/L0|0)|0}var na=64,aa=4194304;function on(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Wa(t,e){var r=t.pendingLanes;if(r===0)return 0;var s=0,n=t.suspendedLanes,a=t.pingedLanes,l=r&268435455;if(l!==0){var o=l&~n;o!==0?s=on(o):(a&=l,a!==0&&(s=on(a)))}else l=r&~n,l!==0?s=on(l):a!==0&&(s=on(a));if(s===0)return 0;if(e!==0&&e!==s&&!(e&n)&&(n=s&-s,a=e&-e,n>=a||n===16&&(a&4194240)!==0))return e;if(s&4&&(s|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)r=31-Ct(e),n=1<<r,s|=t[r],e&=~n;return s}function D0(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $0(t,e){for(var r=t.suspendedLanes,s=t.pingedLanes,n=t.expirationTimes,a=t.pendingLanes;0<a;){var l=31-Ct(a),o=1<<l,c=n[l];c===-1?(!(o&r)||o&s)&&(n[l]=D0(o,e)):c<=e&&(t.expiredLanes|=o),a&=~o}}function Wl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Mh(){var t=na;return na<<=1,!(na&4194240)&&(na=64),t}function Gi(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Kn(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ct(e),t[e]=r}function M0(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<r;){var n=31-Ct(r),a=1<<n;e[n]=0,s[n]=-1,t[n]=-1,r&=~a}}function rc(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var s=31-Ct(r),n=1<<s;n&e|t[s]&e&&(t[s]|=e),r&=~n}}var se=0;function Fh(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Bh,sc,zh,qh,Vh,Hl=!1,ia=[],dr=null,hr=null,fr=null,Nn=new Map,En=new Map,ar=[],F0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gu(t,e){switch(t){case"focusin":case"focusout":dr=null;break;case"dragenter":case"dragleave":hr=null;break;case"mouseover":case"mouseout":fr=null;break;case"pointerover":case"pointerout":Nn.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":En.delete(e.pointerId)}}function Zs(t,e,r,s,n,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:r,eventSystemFlags:s,nativeEvent:a,targetContainers:[n]},e!==null&&(e=Jn(e),e!==null&&sc(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,n!==null&&e.indexOf(n)===-1&&e.push(n),t)}function B0(t,e,r,s,n){switch(e){case"focusin":return dr=Zs(dr,t,e,r,s,n),!0;case"dragenter":return hr=Zs(hr,t,e,r,s,n),!0;case"mouseover":return fr=Zs(fr,t,e,r,s,n),!0;case"pointerover":var a=n.pointerId;return Nn.set(a,Zs(Nn.get(a)||null,t,e,r,s,n)),!0;case"gotpointercapture":return a=n.pointerId,En.set(a,Zs(En.get(a)||null,t,e,r,s,n)),!0}return!1}function Wh(t){var e=Dr(t.target);if(e!==null){var r=Qr(e);if(r!==null){if(e=r.tag,e===13){if(e=Ah(r),e!==null){t.blockedOn=e,Vh(t.priority,function(){zh(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ta(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Kl(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var s=new r.constructor(r.type,r);Bl=s,r.target.dispatchEvent(s),Bl=null}else return e=Jn(r),e!==null&&sc(e),t.blockedOn=r,!1;e.shift()}return!0}function xu(t,e,r){Ta(t)&&r.delete(e)}function z0(){Hl=!1,dr!==null&&Ta(dr)&&(dr=null),hr!==null&&Ta(hr)&&(hr=null),fr!==null&&Ta(fr)&&(fr=null),Nn.forEach(xu),En.forEach(xu)}function en(t,e){t.blockedOn===e&&(t.blockedOn=null,Hl||(Hl=!0,ct.unstable_scheduleCallback(ct.unstable_NormalPriority,z0)))}function Cn(t){function e(n){return en(n,t)}if(0<ia.length){en(ia[0],t);for(var r=1;r<ia.length;r++){var s=ia[r];s.blockedOn===t&&(s.blockedOn=null)}}for(dr!==null&&en(dr,t),hr!==null&&en(hr,t),fr!==null&&en(fr,t),Nn.forEach(e),En.forEach(e),r=0;r<ar.length;r++)s=ar[r],s.blockedOn===t&&(s.blockedOn=null);for(;0<ar.length&&(r=ar[0],r.blockedOn===null);)Wh(r),r.blockedOn===null&&ar.shift()}var Ps=Qt.ReactCurrentBatchConfig,Ha=!0;function q0(t,e,r,s){var n=se,a=Ps.transition;Ps.transition=null;try{se=1,nc(t,e,r,s)}finally{se=n,Ps.transition=a}}function V0(t,e,r,s){var n=se,a=Ps.transition;Ps.transition=null;try{se=4,nc(t,e,r,s)}finally{se=n,Ps.transition=a}}function nc(t,e,r,s){if(Ha){var n=Kl(t,e,r,s);if(n===null)nl(t,e,s,Ka,r),gu(t,s);else if(B0(n,t,e,r,s))s.stopPropagation();else if(gu(t,s),e&4&&-1<F0.indexOf(t)){for(;n!==null;){var a=Jn(n);if(a!==null&&Bh(a),a=Kl(t,e,r,s),a===null&&nl(t,e,s,Ka,r),a===n)break;n=a}n!==null&&s.stopPropagation()}else nl(t,e,s,null,r)}}var Ka=null;function Kl(t,e,r,s){if(Ka=null,t=ec(s),t=Dr(t),t!==null)if(e=Qr(t),e===null)t=null;else if(r=e.tag,r===13){if(t=Ah(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ka=t,null}function Hh(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(R0()){case tc:return 1;case Dh:return 4;case Va:case O0:return 16;case $h:return 536870912;default:return 16}default:return 16}}var or=null,ac=null,Ra=null;function Kh(){if(Ra)return Ra;var t,e=ac,r=e.length,s,n="value"in or?or.value:or.textContent,a=n.length;for(t=0;t<r&&e[t]===n[t];t++);var l=r-t;for(s=1;s<=l&&e[r-s]===n[a-s];s++);return Ra=n.slice(t,1<s?1-s:void 0)}function Oa(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function la(){return!0}function vu(){return!1}function dt(t){function e(r,s,n,a,l){this._reactName=r,this._targetInst=n,this.type=s,this.nativeEvent=a,this.target=l,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(r=t[o],this[o]=r?r(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?la:vu,this.isPropagationStopped=vu,this}return ve(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=la)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=la)},persist:function(){},isPersistent:la}),e}var Vs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ic=dt(Vs),Gn=ve({},Vs,{view:0,detail:0}),W0=dt(Gn),Ji,Yi,tn,bi=ve({},Gn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==tn&&(tn&&t.type==="mousemove"?(Ji=t.screenX-tn.screenX,Yi=t.screenY-tn.screenY):Yi=Ji=0,tn=t),Ji)},movementY:function(t){return"movementY"in t?t.movementY:Yi}}),yu=dt(bi),H0=ve({},bi,{dataTransfer:0}),K0=dt(H0),G0=ve({},Gn,{relatedTarget:0}),Qi=dt(G0),J0=ve({},Vs,{animationName:0,elapsedTime:0,pseudoElement:0}),Y0=dt(J0),Q0=ve({},Vs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),X0=dt(Q0),Z0=ve({},Vs,{data:0}),wu=dt(Z0),eg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sg(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=rg[t])?!!e[t]:!1}function lc(){return sg}var ng=ve({},Gn,{key:function(t){if(t.key){var e=eg[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Oa(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?tg[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lc,charCode:function(t){return t.type==="keypress"?Oa(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Oa(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ag=dt(ng),ig=ve({},bi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bu=dt(ig),lg=ve({},Gn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lc}),og=dt(lg),cg=ve({},Vs,{propertyName:0,elapsedTime:0,pseudoElement:0}),ug=dt(cg),dg=ve({},bi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),hg=dt(dg),fg=[9,13,27,32],oc=Kt&&"CompositionEvent"in window,mn=null;Kt&&"documentMode"in document&&(mn=document.documentMode);var mg=Kt&&"TextEvent"in window&&!mn,Gh=Kt&&(!oc||mn&&8<mn&&11>=mn),ku=" ",_u=!1;function Jh(t,e){switch(t){case"keyup":return fg.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var gs=!1;function pg(t,e){switch(t){case"compositionend":return Yh(e);case"keypress":return e.which!==32?null:(_u=!0,ku);case"textInput":return t=e.data,t===ku&&_u?null:t;default:return null}}function gg(t,e){if(gs)return t==="compositionend"||!oc&&Jh(t,e)?(t=Kh(),Ra=ac=or=null,gs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Gh&&e.locale!=="ko"?null:e.data;default:return null}}var xg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ju(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!xg[t.type]:e==="textarea"}function Qh(t,e,r,s){Ch(s),e=Ga(e,"onChange"),0<e.length&&(r=new ic("onChange","change",null,r,s),t.push({event:r,listeners:e}))}var pn=null,Pn=null;function vg(t){cf(t,0)}function ki(t){var e=ys(t);if(bh(e))return t}function yg(t,e){if(t==="change")return e}var Xh=!1;if(Kt){var Xi;if(Kt){var Zi="oninput"in document;if(!Zi){var Su=document.createElement("div");Su.setAttribute("oninput","return;"),Zi=typeof Su.oninput=="function"}Xi=Zi}else Xi=!1;Xh=Xi&&(!document.documentMode||9<document.documentMode)}function Nu(){pn&&(pn.detachEvent("onpropertychange",Zh),Pn=pn=null)}function Zh(t){if(t.propertyName==="value"&&ki(Pn)){var e=[];Qh(e,Pn,t,ec(t)),Oh(vg,e)}}function wg(t,e,r){t==="focusin"?(Nu(),pn=e,Pn=r,pn.attachEvent("onpropertychange",Zh)):t==="focusout"&&Nu()}function bg(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ki(Pn)}function kg(t,e){if(t==="click")return ki(e)}function _g(t,e){if(t==="input"||t==="change")return ki(e)}function jg(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Tt=typeof Object.is=="function"?Object.is:jg;function Tn(t,e){if(Tt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),s=Object.keys(e);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var n=r[s];if(!Pl.call(e,n)||!Tt(t[n],e[n]))return!1}return!0}function Eu(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Cu(t,e){var r=Eu(t);t=0;for(var s;r;){if(r.nodeType===3){if(s=t+r.textContent.length,t<=e&&s>=e)return{node:r,offset:e-t};t=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Eu(r)}}function ef(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ef(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function tf(){for(var t=window,e=Ba();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Ba(t.document)}return e}function cc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Sg(t){var e=tf(),r=t.focusedElem,s=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&ef(r.ownerDocument.documentElement,r)){if(s!==null&&cc(r)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var n=r.textContent.length,a=Math.min(s.start,n);s=s.end===void 0?a:Math.min(s.end,n),!t.extend&&a>s&&(n=s,s=a,a=n),n=Cu(r,a);var l=Cu(r,s);n&&l&&(t.rangeCount!==1||t.anchorNode!==n.node||t.anchorOffset!==n.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(n.node,n.offset),t.removeAllRanges(),a>s?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Ng=Kt&&"documentMode"in document&&11>=document.documentMode,xs=null,Gl=null,gn=null,Jl=!1;function Pu(t,e,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Jl||xs==null||xs!==Ba(s)||(s=xs,"selectionStart"in s&&cc(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),gn&&Tn(gn,s)||(gn=s,s=Ga(Gl,"onSelect"),0<s.length&&(e=new ic("onSelect","select",null,e,r),t.push({event:e,listeners:s}),e.target=xs)))}function oa(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var vs={animationend:oa("Animation","AnimationEnd"),animationiteration:oa("Animation","AnimationIteration"),animationstart:oa("Animation","AnimationStart"),transitionend:oa("Transition","TransitionEnd")},el={},rf={};Kt&&(rf=document.createElement("div").style,"AnimationEvent"in window||(delete vs.animationend.animation,delete vs.animationiteration.animation,delete vs.animationstart.animation),"TransitionEvent"in window||delete vs.transitionend.transition);function _i(t){if(el[t])return el[t];if(!vs[t])return t;var e=vs[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in rf)return el[t]=e[r];return t}var sf=_i("animationend"),nf=_i("animationiteration"),af=_i("animationstart"),lf=_i("transitionend"),of=new Map,Tu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _r(t,e){of.set(t,e),Yr(e,[t])}for(var tl=0;tl<Tu.length;tl++){var rl=Tu[tl],Eg=rl.toLowerCase(),Cg=rl[0].toUpperCase()+rl.slice(1);_r(Eg,"on"+Cg)}_r(sf,"onAnimationEnd");_r(nf,"onAnimationIteration");_r(af,"onAnimationStart");_r("dblclick","onDoubleClick");_r("focusin","onFocus");_r("focusout","onBlur");_r(lf,"onTransitionEnd");Is("onMouseEnter",["mouseout","mouseover"]);Is("onMouseLeave",["mouseout","mouseover"]);Is("onPointerEnter",["pointerout","pointerover"]);Is("onPointerLeave",["pointerout","pointerover"]);Yr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Yr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Yr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Yr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Yr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Yr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Pg=new Set("cancel close invalid load scroll toggle".split(" ").concat(cn));function Ru(t,e,r){var s=t.type||"unknown-event";t.currentTarget=r,E0(s,e,void 0,t),t.currentTarget=null}function cf(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var s=t[r],n=s.event;s=s.listeners;e:{var a=void 0;if(e)for(var l=s.length-1;0<=l;l--){var o=s[l],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==a&&n.isPropagationStopped())break e;Ru(n,o,u),a=c}else for(l=0;l<s.length;l++){if(o=s[l],c=o.instance,u=o.currentTarget,o=o.listener,c!==a&&n.isPropagationStopped())break e;Ru(n,o,u),a=c}}}if(qa)throw t=Vl,qa=!1,Vl=null,t}function oe(t,e){var r=e[eo];r===void 0&&(r=e[eo]=new Set);var s=t+"__bubble";r.has(s)||(uf(e,t,2,!1),r.add(s))}function sl(t,e,r){var s=0;e&&(s|=4),uf(r,t,s,e)}var ca="_reactListening"+Math.random().toString(36).slice(2);function Rn(t){if(!t[ca]){t[ca]=!0,gh.forEach(function(r){r!=="selectionchange"&&(Pg.has(r)||sl(r,!1,t),sl(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ca]||(e[ca]=!0,sl("selectionchange",!1,e))}}function uf(t,e,r,s){switch(Hh(e)){case 1:var n=q0;break;case 4:n=V0;break;default:n=nc}r=n.bind(null,e,r,t),n=void 0,!ql||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(n=!0),s?n!==void 0?t.addEventListener(e,r,{capture:!0,passive:n}):t.addEventListener(e,r,!0):n!==void 0?t.addEventListener(e,r,{passive:n}):t.addEventListener(e,r,!1)}function nl(t,e,r,s,n){var a=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var l=s.tag;if(l===3||l===4){var o=s.stateNode.containerInfo;if(o===n||o.nodeType===8&&o.parentNode===n)break;if(l===4)for(l=s.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===n||c.nodeType===8&&c.parentNode===n))return;l=l.return}for(;o!==null;){if(l=Dr(o),l===null)return;if(c=l.tag,c===5||c===6){s=a=l;continue e}o=o.parentNode}}s=s.return}Oh(function(){var u=a,h=ec(r),d=[];e:{var m=of.get(t);if(m!==void 0){var g=ic,v=t;switch(t){case"keypress":if(Oa(r)===0)break e;case"keydown":case"keyup":g=ag;break;case"focusin":v="focus",g=Qi;break;case"focusout":v="blur",g=Qi;break;case"beforeblur":case"afterblur":g=Qi;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=yu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=K0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=og;break;case sf:case nf:case af:g=Y0;break;case lf:g=ug;break;case"scroll":g=W0;break;case"wheel":g=hg;break;case"copy":case"cut":case"paste":g=X0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=bu}var y=(e&4)!==0,w=!y&&t==="scroll",f=y?m!==null?m+"Capture":null:m;y=[];for(var p=u,x;p!==null;){x=p;var k=x.stateNode;if(x.tag===5&&k!==null&&(x=k,f!==null&&(k=Sn(p,f),k!=null&&y.push(On(p,k,x)))),w)break;p=p.return}0<y.length&&(m=new g(m,v,null,r,h),d.push({event:m,listeners:y}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",m&&r!==Bl&&(v=r.relatedTarget||r.fromElement)&&(Dr(v)||v[Gt]))break e;if((g||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,g?(v=r.relatedTarget||r.toElement,g=u,v=v?Dr(v):null,v!==null&&(w=Qr(v),v!==w||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=u),g!==v)){if(y=yu,k="onMouseLeave",f="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(y=bu,k="onPointerLeave",f="onPointerEnter",p="pointer"),w=g==null?m:ys(g),x=v==null?m:ys(v),m=new y(k,p+"leave",g,r,h),m.target=w,m.relatedTarget=x,k=null,Dr(h)===u&&(y=new y(f,p+"enter",v,r,h),y.target=x,y.relatedTarget=w,k=y),w=k,g&&v)t:{for(y=g,f=v,p=0,x=y;x;x=ns(x))p++;for(x=0,k=f;k;k=ns(k))x++;for(;0<p-x;)y=ns(y),p--;for(;0<x-p;)f=ns(f),x--;for(;p--;){if(y===f||f!==null&&y===f.alternate)break t;y=ns(y),f=ns(f)}y=null}else y=null;g!==null&&Ou(d,m,g,y,!1),v!==null&&w!==null&&Ou(d,w,v,y,!0)}}e:{if(m=u?ys(u):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var N=yg;else if(ju(m))if(Xh)N=_g;else{N=bg;var j=wg}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(N=kg);if(N&&(N=N(t,u))){Qh(d,N,r,h);break e}j&&j(t,m,u),t==="focusout"&&(j=m._wrapperState)&&j.controlled&&m.type==="number"&&Ul(m,"number",m.value)}switch(j=u?ys(u):window,t){case"focusin":(ju(j)||j.contentEditable==="true")&&(xs=j,Gl=u,gn=null);break;case"focusout":gn=Gl=xs=null;break;case"mousedown":Jl=!0;break;case"contextmenu":case"mouseup":case"dragend":Jl=!1,Pu(d,r,h);break;case"selectionchange":if(Ng)break;case"keydown":case"keyup":Pu(d,r,h)}var S;if(oc)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else gs?Jh(t,r)&&(T="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(T="onCompositionStart");T&&(Gh&&r.locale!=="ko"&&(gs||T!=="onCompositionStart"?T==="onCompositionEnd"&&gs&&(S=Kh()):(or=h,ac="value"in or?or.value:or.textContent,gs=!0)),j=Ga(u,T),0<j.length&&(T=new wu(T,t,null,r,h),d.push({event:T,listeners:j}),S?T.data=S:(S=Yh(r),S!==null&&(T.data=S)))),(S=mg?pg(t,r):gg(t,r))&&(u=Ga(u,"onBeforeInput"),0<u.length&&(h=new wu("onBeforeInput","beforeinput",null,r,h),d.push({event:h,listeners:u}),h.data=S))}cf(d,e)})}function On(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Ga(t,e){for(var r=e+"Capture",s=[];t!==null;){var n=t,a=n.stateNode;n.tag===5&&a!==null&&(n=a,a=Sn(t,r),a!=null&&s.unshift(On(t,a,n)),a=Sn(t,e),a!=null&&s.push(On(t,a,n))),t=t.return}return s}function ns(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Ou(t,e,r,s,n){for(var a=e._reactName,l=[];r!==null&&r!==s;){var o=r,c=o.alternate,u=o.stateNode;if(c!==null&&c===s)break;o.tag===5&&u!==null&&(o=u,n?(c=Sn(r,a),c!=null&&l.unshift(On(r,c,o))):n||(c=Sn(r,a),c!=null&&l.push(On(r,c,o)))),r=r.return}l.length!==0&&t.push({event:e,listeners:l})}var Tg=/\r\n?/g,Rg=/\u0000|\uFFFD/g;function Au(t){return(typeof t=="string"?t:""+t).replace(Tg,`
`).replace(Rg,"")}function ua(t,e,r){if(e=Au(e),Au(t)!==e&&r)throw Error(C(425))}function Ja(){}var Yl=null,Ql=null;function Xl(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Zl=typeof setTimeout=="function"?setTimeout:void 0,Og=typeof clearTimeout=="function"?clearTimeout:void 0,Iu=typeof Promise=="function"?Promise:void 0,Ag=typeof queueMicrotask=="function"?queueMicrotask:typeof Iu<"u"?function(t){return Iu.resolve(null).then(t).catch(Ig)}:Zl;function Ig(t){setTimeout(function(){throw t})}function al(t,e){var r=e,s=0;do{var n=r.nextSibling;if(t.removeChild(r),n&&n.nodeType===8)if(r=n.data,r==="/$"){if(s===0){t.removeChild(n),Cn(e);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=n}while(r);Cn(e)}function mr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Lu(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Ws=Math.random().toString(36).slice(2),It="__reactFiber$"+Ws,An="__reactProps$"+Ws,Gt="__reactContainer$"+Ws,eo="__reactEvents$"+Ws,Lg="__reactListeners$"+Ws,Ug="__reactHandles$"+Ws;function Dr(t){var e=t[It];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Gt]||r[It]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Lu(t);t!==null;){if(r=t[It])return r;t=Lu(t)}return e}t=r,r=t.parentNode}return null}function Jn(t){return t=t[It]||t[Gt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ys(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(C(33))}function ji(t){return t[An]||null}var to=[],ws=-1;function jr(t){return{current:t}}function ce(t){0>ws||(t.current=to[ws],to[ws]=null,ws--)}function le(t,e){ws++,to[ws]=t.current,t.current=e}var kr={},Fe=jr(kr),Qe=jr(!1),Wr=kr;function Ls(t,e){var r=t.type.contextTypes;if(!r)return kr;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var n={},a;for(a in r)n[a]=e[a];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=n),n}function Xe(t){return t=t.childContextTypes,t!=null}function Ya(){ce(Qe),ce(Fe)}function Uu(t,e,r){if(Fe.current!==kr)throw Error(C(168));le(Fe,e),le(Qe,r)}function df(t,e,r){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var n in s)if(!(n in e))throw Error(C(108,w0(t)||"Unknown",n));return ve({},r,s)}function Qa(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||kr,Wr=Fe.current,le(Fe,t),le(Qe,Qe.current),!0}function Du(t,e,r){var s=t.stateNode;if(!s)throw Error(C(169));r?(t=df(t,e,Wr),s.__reactInternalMemoizedMergedChildContext=t,ce(Qe),ce(Fe),le(Fe,t)):ce(Qe),le(Qe,r)}var zt=null,Si=!1,il=!1;function hf(t){zt===null?zt=[t]:zt.push(t)}function Dg(t){Si=!0,hf(t)}function Sr(){if(!il&&zt!==null){il=!0;var t=0,e=se;try{var r=zt;for(se=1;t<r.length;t++){var s=r[t];do s=s(!0);while(s!==null)}zt=null,Si=!1}catch(n){throw zt!==null&&(zt=zt.slice(t+1)),Uh(tc,Sr),n}finally{se=e,il=!1}}return null}var bs=[],ks=0,Xa=null,Za=0,ht=[],ft=0,Hr=null,qt=1,Vt="";function Rr(t,e){bs[ks++]=Za,bs[ks++]=Xa,Xa=t,Za=e}function ff(t,e,r){ht[ft++]=qt,ht[ft++]=Vt,ht[ft++]=Hr,Hr=t;var s=qt;t=Vt;var n=32-Ct(s)-1;s&=~(1<<n),r+=1;var a=32-Ct(e)+n;if(30<a){var l=n-n%5;a=(s&(1<<l)-1).toString(32),s>>=l,n-=l,qt=1<<32-Ct(e)+n|r<<n|s,Vt=a+t}else qt=1<<a|r<<n|s,Vt=t}function uc(t){t.return!==null&&(Rr(t,1),ff(t,1,0))}function dc(t){for(;t===Xa;)Xa=bs[--ks],bs[ks]=null,Za=bs[--ks],bs[ks]=null;for(;t===Hr;)Hr=ht[--ft],ht[ft]=null,Vt=ht[--ft],ht[ft]=null,qt=ht[--ft],ht[ft]=null}var ot=null,lt=null,de=!1,Et=null;function mf(t,e){var r=mt(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function $u(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ot=t,lt=mr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ot=t,lt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Hr!==null?{id:qt,overflow:Vt}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=mt(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,ot=t,lt=null,!0):!1;default:return!1}}function ro(t){return(t.mode&1)!==0&&(t.flags&128)===0}function so(t){if(de){var e=lt;if(e){var r=e;if(!$u(t,e)){if(ro(t))throw Error(C(418));e=mr(r.nextSibling);var s=ot;e&&$u(t,e)?mf(s,r):(t.flags=t.flags&-4097|2,de=!1,ot=t)}}else{if(ro(t))throw Error(C(418));t.flags=t.flags&-4097|2,de=!1,ot=t}}}function Mu(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ot=t}function da(t){if(t!==ot)return!1;if(!de)return Mu(t),de=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Xl(t.type,t.memoizedProps)),e&&(e=lt)){if(ro(t))throw pf(),Error(C(418));for(;e;)mf(t,e),e=mr(e.nextSibling)}if(Mu(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(C(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){lt=mr(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}lt=null}}else lt=ot?mr(t.stateNode.nextSibling):null;return!0}function pf(){for(var t=lt;t;)t=mr(t.nextSibling)}function Us(){lt=ot=null,de=!1}function hc(t){Et===null?Et=[t]:Et.push(t)}var $g=Qt.ReactCurrentBatchConfig;function rn(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(C(309));var s=r.stateNode}if(!s)throw Error(C(147,t));var n=s,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(l){var o=n.refs;l===null?delete o[a]:o[a]=l},e._stringRef=a,e)}if(typeof t!="string")throw Error(C(284));if(!r._owner)throw Error(C(290,t))}return t}function ha(t,e){throw t=Object.prototype.toString.call(e),Error(C(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Fu(t){var e=t._init;return e(t._payload)}function gf(t){function e(f,p){if(t){var x=f.deletions;x===null?(f.deletions=[p],f.flags|=16):x.push(p)}}function r(f,p){if(!t)return null;for(;p!==null;)e(f,p),p=p.sibling;return null}function s(f,p){for(f=new Map;p!==null;)p.key!==null?f.set(p.key,p):f.set(p.index,p),p=p.sibling;return f}function n(f,p){return f=vr(f,p),f.index=0,f.sibling=null,f}function a(f,p,x){return f.index=x,t?(x=f.alternate,x!==null?(x=x.index,x<p?(f.flags|=2,p):x):(f.flags|=2,p)):(f.flags|=1048576,p)}function l(f){return t&&f.alternate===null&&(f.flags|=2),f}function o(f,p,x,k){return p===null||p.tag!==6?(p=fl(x,f.mode,k),p.return=f,p):(p=n(p,x),p.return=f,p)}function c(f,p,x,k){var N=x.type;return N===ps?h(f,p,x.props.children,k,x.key):p!==null&&(p.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===sr&&Fu(N)===p.type)?(k=n(p,x.props),k.ref=rn(f,p,x),k.return=f,k):(k=Ma(x.type,x.key,x.props,null,f.mode,k),k.ref=rn(f,p,x),k.return=f,k)}function u(f,p,x,k){return p===null||p.tag!==4||p.stateNode.containerInfo!==x.containerInfo||p.stateNode.implementation!==x.implementation?(p=ml(x,f.mode,k),p.return=f,p):(p=n(p,x.children||[]),p.return=f,p)}function h(f,p,x,k,N){return p===null||p.tag!==7?(p=zr(x,f.mode,k,N),p.return=f,p):(p=n(p,x),p.return=f,p)}function d(f,p,x){if(typeof p=="string"&&p!==""||typeof p=="number")return p=fl(""+p,f.mode,x),p.return=f,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case ta:return x=Ma(p.type,p.key,p.props,null,f.mode,x),x.ref=rn(f,null,p),x.return=f,x;case ms:return p=ml(p,f.mode,x),p.return=f,p;case sr:var k=p._init;return d(f,k(p._payload),x)}if(ln(p)||Qs(p))return p=zr(p,f.mode,x,null),p.return=f,p;ha(f,p)}return null}function m(f,p,x,k){var N=p!==null?p.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return N!==null?null:o(f,p,""+x,k);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ta:return x.key===N?c(f,p,x,k):null;case ms:return x.key===N?u(f,p,x,k):null;case sr:return N=x._init,m(f,p,N(x._payload),k)}if(ln(x)||Qs(x))return N!==null?null:h(f,p,x,k,null);ha(f,x)}return null}function g(f,p,x,k,N){if(typeof k=="string"&&k!==""||typeof k=="number")return f=f.get(x)||null,o(p,f,""+k,N);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case ta:return f=f.get(k.key===null?x:k.key)||null,c(p,f,k,N);case ms:return f=f.get(k.key===null?x:k.key)||null,u(p,f,k,N);case sr:var j=k._init;return g(f,p,x,j(k._payload),N)}if(ln(k)||Qs(k))return f=f.get(x)||null,h(p,f,k,N,null);ha(p,k)}return null}function v(f,p,x,k){for(var N=null,j=null,S=p,T=p=0,W=null;S!==null&&T<x.length;T++){S.index>T?(W=S,S=null):W=S.sibling;var P=m(f,S,x[T],k);if(P===null){S===null&&(S=W);break}t&&S&&P.alternate===null&&e(f,S),p=a(P,p,T),j===null?N=P:j.sibling=P,j=P,S=W}if(T===x.length)return r(f,S),de&&Rr(f,T),N;if(S===null){for(;T<x.length;T++)S=d(f,x[T],k),S!==null&&(p=a(S,p,T),j===null?N=S:j.sibling=S,j=S);return de&&Rr(f,T),N}for(S=s(f,S);T<x.length;T++)W=g(S,f,T,x[T],k),W!==null&&(t&&W.alternate!==null&&S.delete(W.key===null?T:W.key),p=a(W,p,T),j===null?N=W:j.sibling=W,j=W);return t&&S.forEach(function(X){return e(f,X)}),de&&Rr(f,T),N}function y(f,p,x,k){var N=Qs(x);if(typeof N!="function")throw Error(C(150));if(x=N.call(x),x==null)throw Error(C(151));for(var j=N=null,S=p,T=p=0,W=null,P=x.next();S!==null&&!P.done;T++,P=x.next()){S.index>T?(W=S,S=null):W=S.sibling;var X=m(f,S,P.value,k);if(X===null){S===null&&(S=W);break}t&&S&&X.alternate===null&&e(f,S),p=a(X,p,T),j===null?N=X:j.sibling=X,j=X,S=W}if(P.done)return r(f,S),de&&Rr(f,T),N;if(S===null){for(;!P.done;T++,P=x.next())P=d(f,P.value,k),P!==null&&(p=a(P,p,T),j===null?N=P:j.sibling=P,j=P);return de&&Rr(f,T),N}for(S=s(f,S);!P.done;T++,P=x.next())P=g(S,f,T,P.value,k),P!==null&&(t&&P.alternate!==null&&S.delete(P.key===null?T:P.key),p=a(P,p,T),j===null?N=P:j.sibling=P,j=P);return t&&S.forEach(function(ue){return e(f,ue)}),de&&Rr(f,T),N}function w(f,p,x,k){if(typeof x=="object"&&x!==null&&x.type===ps&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case ta:e:{for(var N=x.key,j=p;j!==null;){if(j.key===N){if(N=x.type,N===ps){if(j.tag===7){r(f,j.sibling),p=n(j,x.props.children),p.return=f,f=p;break e}}else if(j.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===sr&&Fu(N)===j.type){r(f,j.sibling),p=n(j,x.props),p.ref=rn(f,j,x),p.return=f,f=p;break e}r(f,j);break}else e(f,j);j=j.sibling}x.type===ps?(p=zr(x.props.children,f.mode,k,x.key),p.return=f,f=p):(k=Ma(x.type,x.key,x.props,null,f.mode,k),k.ref=rn(f,p,x),k.return=f,f=k)}return l(f);case ms:e:{for(j=x.key;p!==null;){if(p.key===j)if(p.tag===4&&p.stateNode.containerInfo===x.containerInfo&&p.stateNode.implementation===x.implementation){r(f,p.sibling),p=n(p,x.children||[]),p.return=f,f=p;break e}else{r(f,p);break}else e(f,p);p=p.sibling}p=ml(x,f.mode,k),p.return=f,f=p}return l(f);case sr:return j=x._init,w(f,p,j(x._payload),k)}if(ln(x))return v(f,p,x,k);if(Qs(x))return y(f,p,x,k);ha(f,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,p!==null&&p.tag===6?(r(f,p.sibling),p=n(p,x),p.return=f,f=p):(r(f,p),p=fl(x,f.mode,k),p.return=f,f=p),l(f)):r(f,p)}return w}var Ds=gf(!0),xf=gf(!1),ei=jr(null),ti=null,_s=null,fc=null;function mc(){fc=_s=ti=null}function pc(t){var e=ei.current;ce(ei),t._currentValue=e}function no(t,e,r){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===r)break;t=t.return}}function Ts(t,e){ti=t,fc=_s=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ye=!0),t.firstContext=null)}function gt(t){var e=t._currentValue;if(fc!==t)if(t={context:t,memoizedValue:e,next:null},_s===null){if(ti===null)throw Error(C(308));_s=t,ti.dependencies={lanes:0,firstContext:t}}else _s=_s.next=t;return e}var $r=null;function gc(t){$r===null?$r=[t]:$r.push(t)}function vf(t,e,r,s){var n=e.interleaved;return n===null?(r.next=r,gc(e)):(r.next=n.next,n.next=r),e.interleaved=r,Jt(t,s)}function Jt(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var nr=!1;function xc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yf(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Wt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function pr(t,e,r){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,ee&2){var n=s.pending;return n===null?e.next=e:(e.next=n.next,n.next=e),s.pending=e,Jt(t,r)}return n=s.interleaved,n===null?(e.next=e,gc(s)):(e.next=n.next,n.next=e),s.interleaved=e,Jt(t,r)}function Aa(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,r|=s,e.lanes=r,rc(t,r)}}function Bu(t,e){var r=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var n=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?n=a=l:a=a.next=l,r=r.next}while(r!==null);a===null?n=a=e:a=a.next=e}else n=a=e;r={baseState:s.baseState,firstBaseUpdate:n,lastBaseUpdate:a,shared:s.shared,effects:s.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function ri(t,e,r,s){var n=t.updateQueue;nr=!1;var a=n.firstBaseUpdate,l=n.lastBaseUpdate,o=n.shared.pending;if(o!==null){n.shared.pending=null;var c=o,u=c.next;c.next=null,l===null?a=u:l.next=u,l=c;var h=t.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==l&&(o===null?h.firstBaseUpdate=u:o.next=u,h.lastBaseUpdate=c))}if(a!==null){var d=n.baseState;l=0,h=u=c=null,o=a;do{var m=o.lane,g=o.eventTime;if((s&m)===m){h!==null&&(h=h.next={eventTime:g,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var v=t,y=o;switch(m=e,g=r,y.tag){case 1:if(v=y.payload,typeof v=="function"){d=v.call(g,d,m);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=y.payload,m=typeof v=="function"?v.call(g,d,m):v,m==null)break e;d=ve({},d,m);break e;case 2:nr=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,m=n.effects,m===null?n.effects=[o]:m.push(o))}else g={eventTime:g,lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(u=h=g,c=d):h=h.next=g,l|=m;if(o=o.next,o===null){if(o=n.shared.pending,o===null)break;m=o,o=m.next,m.next=null,n.lastBaseUpdate=m,n.shared.pending=null}}while(!0);if(h===null&&(c=d),n.baseState=c,n.firstBaseUpdate=u,n.lastBaseUpdate=h,e=n.shared.interleaved,e!==null){n=e;do l|=n.lane,n=n.next;while(n!==e)}else a===null&&(n.shared.lanes=0);Gr|=l,t.lanes=l,t.memoizedState=d}}function zu(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],n=s.callback;if(n!==null){if(s.callback=null,s=r,typeof n!="function")throw Error(C(191,n));n.call(s)}}}var Yn={},Ut=jr(Yn),In=jr(Yn),Ln=jr(Yn);function Mr(t){if(t===Yn)throw Error(C(174));return t}function vc(t,e){switch(le(Ln,e),le(In,t),le(Ut,Yn),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:$l(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=$l(e,t)}ce(Ut),le(Ut,e)}function $s(){ce(Ut),ce(In),ce(Ln)}function wf(t){Mr(Ln.current);var e=Mr(Ut.current),r=$l(e,t.type);e!==r&&(le(In,t),le(Ut,r))}function yc(t){In.current===t&&(ce(Ut),ce(In))}var ge=jr(0);function si(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ll=[];function wc(){for(var t=0;t<ll.length;t++)ll[t]._workInProgressVersionPrimary=null;ll.length=0}var Ia=Qt.ReactCurrentDispatcher,ol=Qt.ReactCurrentBatchConfig,Kr=0,xe=null,Ne=null,Pe=null,ni=!1,xn=!1,Un=0,Mg=0;function De(){throw Error(C(321))}function bc(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Tt(t[r],e[r]))return!1;return!0}function kc(t,e,r,s,n,a){if(Kr=a,xe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ia.current=t===null||t.memoizedState===null?qg:Vg,t=r(s,n),xn){a=0;do{if(xn=!1,Un=0,25<=a)throw Error(C(301));a+=1,Pe=Ne=null,e.updateQueue=null,Ia.current=Wg,t=r(s,n)}while(xn)}if(Ia.current=ai,e=Ne!==null&&Ne.next!==null,Kr=0,Pe=Ne=xe=null,ni=!1,e)throw Error(C(300));return t}function _c(){var t=Un!==0;return Un=0,t}function At(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pe===null?xe.memoizedState=Pe=t:Pe=Pe.next=t,Pe}function xt(){if(Ne===null){var t=xe.alternate;t=t!==null?t.memoizedState:null}else t=Ne.next;var e=Pe===null?xe.memoizedState:Pe.next;if(e!==null)Pe=e,Ne=t;else{if(t===null)throw Error(C(310));Ne=t,t={memoizedState:Ne.memoizedState,baseState:Ne.baseState,baseQueue:Ne.baseQueue,queue:Ne.queue,next:null},Pe===null?xe.memoizedState=Pe=t:Pe=Pe.next=t}return Pe}function Dn(t,e){return typeof e=="function"?e(t):e}function cl(t){var e=xt(),r=e.queue;if(r===null)throw Error(C(311));r.lastRenderedReducer=t;var s=Ne,n=s.baseQueue,a=r.pending;if(a!==null){if(n!==null){var l=n.next;n.next=a.next,a.next=l}s.baseQueue=n=a,r.pending=null}if(n!==null){a=n.next,s=s.baseState;var o=l=null,c=null,u=a;do{var h=u.lane;if((Kr&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:t(s,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(o=c=d,l=s):c=c.next=d,xe.lanes|=h,Gr|=h}u=u.next}while(u!==null&&u!==a);c===null?l=s:c.next=o,Tt(s,e.memoizedState)||(Ye=!0),e.memoizedState=s,e.baseState=l,e.baseQueue=c,r.lastRenderedState=s}if(t=r.interleaved,t!==null){n=t;do a=n.lane,xe.lanes|=a,Gr|=a,n=n.next;while(n!==t)}else n===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function ul(t){var e=xt(),r=e.queue;if(r===null)throw Error(C(311));r.lastRenderedReducer=t;var s=r.dispatch,n=r.pending,a=e.memoizedState;if(n!==null){r.pending=null;var l=n=n.next;do a=t(a,l.action),l=l.next;while(l!==n);Tt(a,e.memoizedState)||(Ye=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),r.lastRenderedState=a}return[a,s]}function bf(){}function kf(t,e){var r=xe,s=xt(),n=e(),a=!Tt(s.memoizedState,n);if(a&&(s.memoizedState=n,Ye=!0),s=s.queue,jc(Sf.bind(null,r,s,t),[t]),s.getSnapshot!==e||a||Pe!==null&&Pe.memoizedState.tag&1){if(r.flags|=2048,$n(9,jf.bind(null,r,s,n,e),void 0,null),Te===null)throw Error(C(349));Kr&30||_f(r,e,n)}return n}function _f(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=xe.updateQueue,e===null?(e={lastEffect:null,stores:null},xe.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function jf(t,e,r,s){e.value=r,e.getSnapshot=s,Nf(e)&&Ef(t)}function Sf(t,e,r){return r(function(){Nf(e)&&Ef(t)})}function Nf(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Tt(t,r)}catch{return!0}}function Ef(t){var e=Jt(t,1);e!==null&&Pt(e,t,1,-1)}function qu(t){var e=At();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Dn,lastRenderedState:t},e.queue=t,t=t.dispatch=zg.bind(null,xe,t),[e.memoizedState,t]}function $n(t,e,r,s){return t={tag:t,create:e,destroy:r,deps:s,next:null},e=xe.updateQueue,e===null?(e={lastEffect:null,stores:null},xe.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(s=r.next,r.next=t,t.next=s,e.lastEffect=t)),t}function Cf(){return xt().memoizedState}function La(t,e,r,s){var n=At();xe.flags|=t,n.memoizedState=$n(1|e,r,void 0,s===void 0?null:s)}function Ni(t,e,r,s){var n=xt();s=s===void 0?null:s;var a=void 0;if(Ne!==null){var l=Ne.memoizedState;if(a=l.destroy,s!==null&&bc(s,l.deps)){n.memoizedState=$n(e,r,a,s);return}}xe.flags|=t,n.memoizedState=$n(1|e,r,a,s)}function Vu(t,e){return La(8390656,8,t,e)}function jc(t,e){return Ni(2048,8,t,e)}function Pf(t,e){return Ni(4,2,t,e)}function Tf(t,e){return Ni(4,4,t,e)}function Rf(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Of(t,e,r){return r=r!=null?r.concat([t]):null,Ni(4,4,Rf.bind(null,e,t),r)}function Sc(){}function Af(t,e){var r=xt();e=e===void 0?null:e;var s=r.memoizedState;return s!==null&&e!==null&&bc(e,s[1])?s[0]:(r.memoizedState=[t,e],t)}function If(t,e){var r=xt();e=e===void 0?null:e;var s=r.memoizedState;return s!==null&&e!==null&&bc(e,s[1])?s[0]:(t=t(),r.memoizedState=[t,e],t)}function Lf(t,e,r){return Kr&21?(Tt(r,e)||(r=Mh(),xe.lanes|=r,Gr|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ye=!0),t.memoizedState=r)}function Fg(t,e){var r=se;se=r!==0&&4>r?r:4,t(!0);var s=ol.transition;ol.transition={};try{t(!1),e()}finally{se=r,ol.transition=s}}function Uf(){return xt().memoizedState}function Bg(t,e,r){var s=xr(t);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},Df(t))$f(e,r);else if(r=vf(t,e,r,s),r!==null){var n=Ve();Pt(r,t,s,n),Mf(r,e,s)}}function zg(t,e,r){var s=xr(t),n={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(Df(t))$f(e,n);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var l=e.lastRenderedState,o=a(l,r);if(n.hasEagerState=!0,n.eagerState=o,Tt(o,l)){var c=e.interleaved;c===null?(n.next=n,gc(e)):(n.next=c.next,c.next=n),e.interleaved=n;return}}catch{}finally{}r=vf(t,e,n,s),r!==null&&(n=Ve(),Pt(r,t,s,n),Mf(r,e,s))}}function Df(t){var e=t.alternate;return t===xe||e!==null&&e===xe}function $f(t,e){xn=ni=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function Mf(t,e,r){if(r&4194240){var s=e.lanes;s&=t.pendingLanes,r|=s,e.lanes=r,rc(t,r)}}var ai={readContext:gt,useCallback:De,useContext:De,useEffect:De,useImperativeHandle:De,useInsertionEffect:De,useLayoutEffect:De,useMemo:De,useReducer:De,useRef:De,useState:De,useDebugValue:De,useDeferredValue:De,useTransition:De,useMutableSource:De,useSyncExternalStore:De,useId:De,unstable_isNewReconciler:!1},qg={readContext:gt,useCallback:function(t,e){return At().memoizedState=[t,e===void 0?null:e],t},useContext:gt,useEffect:Vu,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,La(4194308,4,Rf.bind(null,e,t),r)},useLayoutEffect:function(t,e){return La(4194308,4,t,e)},useInsertionEffect:function(t,e){return La(4,2,t,e)},useMemo:function(t,e){var r=At();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var s=At();return e=r!==void 0?r(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=Bg.bind(null,xe,t),[s.memoizedState,t]},useRef:function(t){var e=At();return t={current:t},e.memoizedState=t},useState:qu,useDebugValue:Sc,useDeferredValue:function(t){return At().memoizedState=t},useTransition:function(){var t=qu(!1),e=t[0];return t=Fg.bind(null,t[1]),At().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var s=xe,n=At();if(de){if(r===void 0)throw Error(C(407));r=r()}else{if(r=e(),Te===null)throw Error(C(349));Kr&30||_f(s,e,r)}n.memoizedState=r;var a={value:r,getSnapshot:e};return n.queue=a,Vu(Sf.bind(null,s,a,t),[t]),s.flags|=2048,$n(9,jf.bind(null,s,a,r,e),void 0,null),r},useId:function(){var t=At(),e=Te.identifierPrefix;if(de){var r=Vt,s=qt;r=(s&~(1<<32-Ct(s)-1)).toString(32)+r,e=":"+e+"R"+r,r=Un++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=Mg++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Vg={readContext:gt,useCallback:Af,useContext:gt,useEffect:jc,useImperativeHandle:Of,useInsertionEffect:Pf,useLayoutEffect:Tf,useMemo:If,useReducer:cl,useRef:Cf,useState:function(){return cl(Dn)},useDebugValue:Sc,useDeferredValue:function(t){var e=xt();return Lf(e,Ne.memoizedState,t)},useTransition:function(){var t=cl(Dn)[0],e=xt().memoizedState;return[t,e]},useMutableSource:bf,useSyncExternalStore:kf,useId:Uf,unstable_isNewReconciler:!1},Wg={readContext:gt,useCallback:Af,useContext:gt,useEffect:jc,useImperativeHandle:Of,useInsertionEffect:Pf,useLayoutEffect:Tf,useMemo:If,useReducer:ul,useRef:Cf,useState:function(){return ul(Dn)},useDebugValue:Sc,useDeferredValue:function(t){var e=xt();return Ne===null?e.memoizedState=t:Lf(e,Ne.memoizedState,t)},useTransition:function(){var t=ul(Dn)[0],e=xt().memoizedState;return[t,e]},useMutableSource:bf,useSyncExternalStore:kf,useId:Uf,unstable_isNewReconciler:!1};function _t(t,e){if(t&&t.defaultProps){e=ve({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function ao(t,e,r,s){e=t.memoizedState,r=r(s,e),r=r==null?e:ve({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Ei={isMounted:function(t){return(t=t._reactInternals)?Qr(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var s=Ve(),n=xr(t),a=Wt(s,n);a.payload=e,r!=null&&(a.callback=r),e=pr(t,a,n),e!==null&&(Pt(e,t,n,s),Aa(e,t,n))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var s=Ve(),n=xr(t),a=Wt(s,n);a.tag=1,a.payload=e,r!=null&&(a.callback=r),e=pr(t,a,n),e!==null&&(Pt(e,t,n,s),Aa(e,t,n))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Ve(),s=xr(t),n=Wt(r,s);n.tag=2,e!=null&&(n.callback=e),e=pr(t,n,s),e!==null&&(Pt(e,t,s,r),Aa(e,t,s))}};function Wu(t,e,r,s,n,a,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,a,l):e.prototype&&e.prototype.isPureReactComponent?!Tn(r,s)||!Tn(n,a):!0}function Ff(t,e,r){var s=!1,n=kr,a=e.contextType;return typeof a=="object"&&a!==null?a=gt(a):(n=Xe(e)?Wr:Fe.current,s=e.contextTypes,a=(s=s!=null)?Ls(t,n):kr),e=new e(r,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ei,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=a),e}function Hu(t,e,r,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,s),e.state!==t&&Ei.enqueueReplaceState(e,e.state,null)}function io(t,e,r,s){var n=t.stateNode;n.props=r,n.state=t.memoizedState,n.refs={},xc(t);var a=e.contextType;typeof a=="object"&&a!==null?n.context=gt(a):(a=Xe(e)?Wr:Fe.current,n.context=Ls(t,a)),n.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(ao(t,e,a,r),n.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(e=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),e!==n.state&&Ei.enqueueReplaceState(n,n.state,null),ri(t,r,n,s),n.state=t.memoizedState),typeof n.componentDidMount=="function"&&(t.flags|=4194308)}function Ms(t,e){try{var r="",s=e;do r+=y0(s),s=s.return;while(s);var n=r}catch(a){n=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:n,digest:null}}function dl(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function lo(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Hg=typeof WeakMap=="function"?WeakMap:Map;function Bf(t,e,r){r=Wt(-1,r),r.tag=3,r.payload={element:null};var s=e.value;return r.callback=function(){li||(li=!0,vo=s),lo(t,e)},r}function zf(t,e,r){r=Wt(-1,r),r.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var n=e.value;r.payload=function(){return s(n)},r.callback=function(){lo(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){lo(t,e),typeof s!="function"&&(gr===null?gr=new Set([this]):gr.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),r}function Ku(t,e,r){var s=t.pingCache;if(s===null){s=t.pingCache=new Hg;var n=new Set;s.set(e,n)}else n=s.get(e),n===void 0&&(n=new Set,s.set(e,n));n.has(r)||(n.add(r),t=ix.bind(null,t,e,r),e.then(t,t))}function Gu(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ju(t,e,r,s,n){return t.mode&1?(t.flags|=65536,t.lanes=n,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Wt(-1,1),e.tag=2,pr(r,e,1))),r.lanes|=1),t)}var Kg=Qt.ReactCurrentOwner,Ye=!1;function ze(t,e,r,s){e.child=t===null?xf(e,null,r,s):Ds(e,t.child,r,s)}function Yu(t,e,r,s,n){r=r.render;var a=e.ref;return Ts(e,n),s=kc(t,e,r,s,a,n),r=_c(),t!==null&&!Ye?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n,Yt(t,e,n)):(de&&r&&uc(e),e.flags|=1,ze(t,e,s,n),e.child)}function Qu(t,e,r,s,n){if(t===null){var a=r.type;return typeof a=="function"&&!Ac(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=a,qf(t,e,a,s,n)):(t=Ma(r.type,null,s,e,e.mode,n),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&n)){var l=a.memoizedProps;if(r=r.compare,r=r!==null?r:Tn,r(l,s)&&t.ref===e.ref)return Yt(t,e,n)}return e.flags|=1,t=vr(a,s),t.ref=e.ref,t.return=e,e.child=t}function qf(t,e,r,s,n){if(t!==null){var a=t.memoizedProps;if(Tn(a,s)&&t.ref===e.ref)if(Ye=!1,e.pendingProps=s=a,(t.lanes&n)!==0)t.flags&131072&&(Ye=!0);else return e.lanes=t.lanes,Yt(t,e,n)}return oo(t,e,r,s,n)}function Vf(t,e,r){var s=e.pendingProps,n=s.children,a=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},le(Ss,nt),nt|=r;else{if(!(r&1073741824))return t=a!==null?a.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,le(Ss,nt),nt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=a!==null?a.baseLanes:r,le(Ss,nt),nt|=s}else a!==null?(s=a.baseLanes|r,e.memoizedState=null):s=r,le(Ss,nt),nt|=s;return ze(t,e,n,r),e.child}function Wf(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function oo(t,e,r,s,n){var a=Xe(r)?Wr:Fe.current;return a=Ls(e,a),Ts(e,n),r=kc(t,e,r,s,a,n),s=_c(),t!==null&&!Ye?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n,Yt(t,e,n)):(de&&s&&uc(e),e.flags|=1,ze(t,e,r,n),e.child)}function Xu(t,e,r,s,n){if(Xe(r)){var a=!0;Qa(e)}else a=!1;if(Ts(e,n),e.stateNode===null)Ua(t,e),Ff(e,r,s),io(e,r,s,n),s=!0;else if(t===null){var l=e.stateNode,o=e.memoizedProps;l.props=o;var c=l.context,u=r.contextType;typeof u=="object"&&u!==null?u=gt(u):(u=Xe(r)?Wr:Fe.current,u=Ls(e,u));var h=r.getDerivedStateFromProps,d=typeof h=="function"||typeof l.getSnapshotBeforeUpdate=="function";d||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==s||c!==u)&&Hu(e,l,s,u),nr=!1;var m=e.memoizedState;l.state=m,ri(e,s,l,n),c=e.memoizedState,o!==s||m!==c||Qe.current||nr?(typeof h=="function"&&(ao(e,r,h,s),c=e.memoizedState),(o=nr||Wu(e,r,o,s,m,c,u))?(d||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=c),l.props=s,l.state=c,l.context=u,s=o):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{l=e.stateNode,yf(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:_t(e.type,o),l.props=u,d=e.pendingProps,m=l.context,c=r.contextType,typeof c=="object"&&c!==null?c=gt(c):(c=Xe(r)?Wr:Fe.current,c=Ls(e,c));var g=r.getDerivedStateFromProps;(h=typeof g=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==d||m!==c)&&Hu(e,l,s,c),nr=!1,m=e.memoizedState,l.state=m,ri(e,s,l,n);var v=e.memoizedState;o!==d||m!==v||Qe.current||nr?(typeof g=="function"&&(ao(e,r,g,s),v=e.memoizedState),(u=nr||Wu(e,r,u,s,m,v,c)||!1)?(h||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(s,v,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(s,v,c)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=v),l.props=s,l.state=v,l.context=c,s=u):(typeof l.componentDidUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),s=!1)}return co(t,e,r,s,a,n)}function co(t,e,r,s,n,a){Wf(t,e);var l=(e.flags&128)!==0;if(!s&&!l)return n&&Du(e,r,!1),Yt(t,e,a);s=e.stateNode,Kg.current=e;var o=l&&typeof r.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&l?(e.child=Ds(e,t.child,null,a),e.child=Ds(e,null,o,a)):ze(t,e,o,a),e.memoizedState=s.state,n&&Du(e,r,!0),e.child}function Hf(t){var e=t.stateNode;e.pendingContext?Uu(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Uu(t,e.context,!1),vc(t,e.containerInfo)}function Zu(t,e,r,s,n){return Us(),hc(n),e.flags|=256,ze(t,e,r,s),e.child}var uo={dehydrated:null,treeContext:null,retryLane:0};function ho(t){return{baseLanes:t,cachePool:null,transitions:null}}function Kf(t,e,r){var s=e.pendingProps,n=ge.current,a=!1,l=(e.flags&128)!==0,o;if((o=l)||(o=t!==null&&t.memoizedState===null?!1:(n&2)!==0),o?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(n|=1),le(ge,n&1),t===null)return so(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=s.children,t=s.fallback,a?(s=e.mode,a=e.child,l={mode:"hidden",children:l},!(s&1)&&a!==null?(a.childLanes=0,a.pendingProps=l):a=Ti(l,s,0,null),t=zr(t,s,r,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=ho(r),e.memoizedState=uo,t):Nc(e,l));if(n=t.memoizedState,n!==null&&(o=n.dehydrated,o!==null))return Gg(t,e,l,s,o,n,r);if(a){a=s.fallback,l=e.mode,n=t.child,o=n.sibling;var c={mode:"hidden",children:s.children};return!(l&1)&&e.child!==n?(s=e.child,s.childLanes=0,s.pendingProps=c,e.deletions=null):(s=vr(n,c),s.subtreeFlags=n.subtreeFlags&14680064),o!==null?a=vr(o,a):(a=zr(a,l,r,null),a.flags|=2),a.return=e,s.return=e,s.sibling=a,e.child=s,s=a,a=e.child,l=t.child.memoizedState,l=l===null?ho(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=t.childLanes&~r,e.memoizedState=uo,s}return a=t.child,t=a.sibling,s=vr(a,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=r),s.return=e,s.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=s,e.memoizedState=null,s}function Nc(t,e){return e=Ti({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function fa(t,e,r,s){return s!==null&&hc(s),Ds(e,t.child,null,r),t=Nc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Gg(t,e,r,s,n,a,l){if(r)return e.flags&256?(e.flags&=-257,s=dl(Error(C(422))),fa(t,e,l,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=s.fallback,n=e.mode,s=Ti({mode:"visible",children:s.children},n,0,null),a=zr(a,n,l,null),a.flags|=2,s.return=e,a.return=e,s.sibling=a,e.child=s,e.mode&1&&Ds(e,t.child,null,l),e.child.memoizedState=ho(l),e.memoizedState=uo,a);if(!(e.mode&1))return fa(t,e,l,null);if(n.data==="$!"){if(s=n.nextSibling&&n.nextSibling.dataset,s)var o=s.dgst;return s=o,a=Error(C(419)),s=dl(a,s,void 0),fa(t,e,l,s)}if(o=(l&t.childLanes)!==0,Ye||o){if(s=Te,s!==null){switch(l&-l){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(s.suspendedLanes|l)?0:n,n!==0&&n!==a.retryLane&&(a.retryLane=n,Jt(t,n),Pt(s,t,n,-1))}return Oc(),s=dl(Error(C(421))),fa(t,e,l,s)}return n.data==="$?"?(e.flags|=128,e.child=t.child,e=lx.bind(null,t),n._reactRetry=e,null):(t=a.treeContext,lt=mr(n.nextSibling),ot=e,de=!0,Et=null,t!==null&&(ht[ft++]=qt,ht[ft++]=Vt,ht[ft++]=Hr,qt=t.id,Vt=t.overflow,Hr=e),e=Nc(e,s.children),e.flags|=4096,e)}function ed(t,e,r){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),no(t.return,e,r)}function hl(t,e,r,s,n){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:n}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=s,a.tail=r,a.tailMode=n)}function Gf(t,e,r){var s=e.pendingProps,n=s.revealOrder,a=s.tail;if(ze(t,e,s.children,r),s=ge.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ed(t,r,e);else if(t.tag===19)ed(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(le(ge,s),!(e.mode&1))e.memoizedState=null;else switch(n){case"forwards":for(r=e.child,n=null;r!==null;)t=r.alternate,t!==null&&si(t)===null&&(n=r),r=r.sibling;r=n,r===null?(n=e.child,e.child=null):(n=r.sibling,r.sibling=null),hl(e,!1,n,r,a);break;case"backwards":for(r=null,n=e.child,e.child=null;n!==null;){if(t=n.alternate,t!==null&&si(t)===null){e.child=n;break}t=n.sibling,n.sibling=r,r=n,n=t}hl(e,!0,r,null,a);break;case"together":hl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ua(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Yt(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Gr|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(C(153));if(e.child!==null){for(t=e.child,r=vr(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=vr(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Jg(t,e,r){switch(e.tag){case 3:Hf(e),Us();break;case 5:wf(e);break;case 1:Xe(e.type)&&Qa(e);break;case 4:vc(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,n=e.memoizedProps.value;le(ei,s._currentValue),s._currentValue=n;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(le(ge,ge.current&1),e.flags|=128,null):r&e.child.childLanes?Kf(t,e,r):(le(ge,ge.current&1),t=Yt(t,e,r),t!==null?t.sibling:null);le(ge,ge.current&1);break;case 19:if(s=(r&e.childLanes)!==0,t.flags&128){if(s)return Gf(t,e,r);e.flags|=128}if(n=e.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),le(ge,ge.current),s)break;return null;case 22:case 23:return e.lanes=0,Vf(t,e,r)}return Yt(t,e,r)}var Jf,fo,Yf,Qf;Jf=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};fo=function(){};Yf=function(t,e,r,s){var n=t.memoizedProps;if(n!==s){t=e.stateNode,Mr(Ut.current);var a=null;switch(r){case"input":n=Il(t,n),s=Il(t,s),a=[];break;case"select":n=ve({},n,{value:void 0}),s=ve({},s,{value:void 0}),a=[];break;case"textarea":n=Dl(t,n),s=Dl(t,s),a=[];break;default:typeof n.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=Ja)}Ml(r,s);var l;r=null;for(u in n)if(!s.hasOwnProperty(u)&&n.hasOwnProperty(u)&&n[u]!=null)if(u==="style"){var o=n[u];for(l in o)o.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(_n.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in s){var c=s[u];if(o=n!=null?n[u]:void 0,s.hasOwnProperty(u)&&c!==o&&(c!=null||o!=null))if(u==="style")if(o){for(l in o)!o.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in c)c.hasOwnProperty(l)&&o[l]!==c[l]&&(r||(r={}),r[l]=c[l])}else r||(a||(a=[]),a.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(_n.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&oe("scroll",t),a||o===c||(a=[])):(a=a||[]).push(u,c))}r&&(a=a||[]).push("style",r);var u=a;(e.updateQueue=u)&&(e.flags|=4)}};Qf=function(t,e,r,s){r!==s&&(e.flags|=4)};function sn(t,e){if(!de)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function $e(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,s=0;if(e)for(var n=t.child;n!==null;)r|=n.lanes|n.childLanes,s|=n.subtreeFlags&14680064,s|=n.flags&14680064,n.return=t,n=n.sibling;else for(n=t.child;n!==null;)r|=n.lanes|n.childLanes,s|=n.subtreeFlags,s|=n.flags,n.return=t,n=n.sibling;return t.subtreeFlags|=s,t.childLanes=r,e}function Yg(t,e,r){var s=e.pendingProps;switch(dc(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $e(e),null;case 1:return Xe(e.type)&&Ya(),$e(e),null;case 3:return s=e.stateNode,$s(),ce(Qe),ce(Fe),wc(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(da(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Et!==null&&(bo(Et),Et=null))),fo(t,e),$e(e),null;case 5:yc(e);var n=Mr(Ln.current);if(r=e.type,t!==null&&e.stateNode!=null)Yf(t,e,r,s,n),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(C(166));return $e(e),null}if(t=Mr(Ut.current),da(e)){s=e.stateNode,r=e.type;var a=e.memoizedProps;switch(s[It]=e,s[An]=a,t=(e.mode&1)!==0,r){case"dialog":oe("cancel",s),oe("close",s);break;case"iframe":case"object":case"embed":oe("load",s);break;case"video":case"audio":for(n=0;n<cn.length;n++)oe(cn[n],s);break;case"source":oe("error",s);break;case"img":case"image":case"link":oe("error",s),oe("load",s);break;case"details":oe("toggle",s);break;case"input":cu(s,a),oe("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!a.multiple},oe("invalid",s);break;case"textarea":du(s,a),oe("invalid",s)}Ml(r,a),n=null;for(var l in a)if(a.hasOwnProperty(l)){var o=a[l];l==="children"?typeof o=="string"?s.textContent!==o&&(a.suppressHydrationWarning!==!0&&ua(s.textContent,o,t),n=["children",o]):typeof o=="number"&&s.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&ua(s.textContent,o,t),n=["children",""+o]):_n.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&oe("scroll",s)}switch(r){case"input":ra(s),uu(s,a,!0);break;case"textarea":ra(s),hu(s);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(s.onclick=Ja)}s=n,e.updateQueue=s,s!==null&&(e.flags|=4)}else{l=n.nodeType===9?n:n.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=jh(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=l.createElement(r,{is:s.is}):(t=l.createElement(r),r==="select"&&(l=t,s.multiple?l.multiple=!0:s.size&&(l.size=s.size))):t=l.createElementNS(t,r),t[It]=e,t[An]=s,Jf(t,e,!1,!1),e.stateNode=t;e:{switch(l=Fl(r,s),r){case"dialog":oe("cancel",t),oe("close",t),n=s;break;case"iframe":case"object":case"embed":oe("load",t),n=s;break;case"video":case"audio":for(n=0;n<cn.length;n++)oe(cn[n],t);n=s;break;case"source":oe("error",t),n=s;break;case"img":case"image":case"link":oe("error",t),oe("load",t),n=s;break;case"details":oe("toggle",t),n=s;break;case"input":cu(t,s),n=Il(t,s),oe("invalid",t);break;case"option":n=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},n=ve({},s,{value:void 0}),oe("invalid",t);break;case"textarea":du(t,s),n=Dl(t,s),oe("invalid",t);break;default:n=s}Ml(r,n),o=n;for(a in o)if(o.hasOwnProperty(a)){var c=o[a];a==="style"?Eh(t,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Sh(t,c)):a==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&jn(t,c):typeof c=="number"&&jn(t,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(_n.hasOwnProperty(a)?c!=null&&a==="onScroll"&&oe("scroll",t):c!=null&&Yo(t,a,c,l))}switch(r){case"input":ra(t),uu(t,s,!1);break;case"textarea":ra(t),hu(t);break;case"option":s.value!=null&&t.setAttribute("value",""+br(s.value));break;case"select":t.multiple=!!s.multiple,a=s.value,a!=null?Ns(t,!!s.multiple,a,!1):s.defaultValue!=null&&Ns(t,!!s.multiple,s.defaultValue,!0);break;default:typeof n.onClick=="function"&&(t.onclick=Ja)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return $e(e),null;case 6:if(t&&e.stateNode!=null)Qf(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(C(166));if(r=Mr(Ln.current),Mr(Ut.current),da(e)){if(s=e.stateNode,r=e.memoizedProps,s[It]=e,(a=s.nodeValue!==r)&&(t=ot,t!==null))switch(t.tag){case 3:ua(s.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ua(s.nodeValue,r,(t.mode&1)!==0)}a&&(e.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[It]=e,e.stateNode=s}return $e(e),null;case 13:if(ce(ge),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(de&&lt!==null&&e.mode&1&&!(e.flags&128))pf(),Us(),e.flags|=98560,a=!1;else if(a=da(e),s!==null&&s.dehydrated!==null){if(t===null){if(!a)throw Error(C(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(C(317));a[It]=e}else Us(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;$e(e),a=!1}else Et!==null&&(bo(Et),Et=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||ge.current&1?Ee===0&&(Ee=3):Oc())),e.updateQueue!==null&&(e.flags|=4),$e(e),null);case 4:return $s(),fo(t,e),t===null&&Rn(e.stateNode.containerInfo),$e(e),null;case 10:return pc(e.type._context),$e(e),null;case 17:return Xe(e.type)&&Ya(),$e(e),null;case 19:if(ce(ge),a=e.memoizedState,a===null)return $e(e),null;if(s=(e.flags&128)!==0,l=a.rendering,l===null)if(s)sn(a,!1);else{if(Ee!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=si(t),l!==null){for(e.flags|=128,sn(a,!1),s=l.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=r,r=e.child;r!==null;)a=r,t=s,a.flags&=14680066,l=a.alternate,l===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,t=l.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return le(ge,ge.current&1|2),e.child}t=t.sibling}a.tail!==null&&be()>Fs&&(e.flags|=128,s=!0,sn(a,!1),e.lanes=4194304)}else{if(!s)if(t=si(l),t!==null){if(e.flags|=128,s=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),sn(a,!0),a.tail===null&&a.tailMode==="hidden"&&!l.alternate&&!de)return $e(e),null}else 2*be()-a.renderingStartTime>Fs&&r!==1073741824&&(e.flags|=128,s=!0,sn(a,!1),e.lanes=4194304);a.isBackwards?(l.sibling=e.child,e.child=l):(r=a.last,r!==null?r.sibling=l:e.child=l,a.last=l)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=be(),e.sibling=null,r=ge.current,le(ge,s?r&1|2:r&1),e):($e(e),null);case 22:case 23:return Rc(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?nt&1073741824&&($e(e),e.subtreeFlags&6&&(e.flags|=8192)):$e(e),null;case 24:return null;case 25:return null}throw Error(C(156,e.tag))}function Qg(t,e){switch(dc(e),e.tag){case 1:return Xe(e.type)&&Ya(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return $s(),ce(Qe),ce(Fe),wc(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return yc(e),null;case 13:if(ce(ge),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(C(340));Us()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ce(ge),null;case 4:return $s(),null;case 10:return pc(e.type._context),null;case 22:case 23:return Rc(),null;case 24:return null;default:return null}}var ma=!1,Me=!1,Xg=typeof WeakSet=="function"?WeakSet:Set,I=null;function js(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){ye(t,e,s)}else r.current=null}function mo(t,e,r){try{r()}catch(s){ye(t,e,s)}}var td=!1;function Zg(t,e){if(Yl=Ha,t=tf(),cc(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var n=s.anchorOffset,a=s.focusNode;s=s.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var l=0,o=-1,c=-1,u=0,h=0,d=t,m=null;t:for(;;){for(var g;d!==r||n!==0&&d.nodeType!==3||(o=l+n),d!==a||s!==0&&d.nodeType!==3||(c=l+s),d.nodeType===3&&(l+=d.nodeValue.length),(g=d.firstChild)!==null;)m=d,d=g;for(;;){if(d===t)break t;if(m===r&&++u===n&&(o=l),m===a&&++h===s&&(c=l),(g=d.nextSibling)!==null)break;d=m,m=d.parentNode}d=g}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Ql={focusedElem:t,selectionRange:r},Ha=!1,I=e;I!==null;)if(e=I,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,I=t;else for(;I!==null;){e=I;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var y=v.memoizedProps,w=v.memoizedState,f=e.stateNode,p=f.getSnapshotBeforeUpdate(e.elementType===e.type?y:_t(e.type,y),w);f.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(C(163))}}catch(k){ye(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,I=t;break}I=e.return}return v=td,td=!1,v}function vn(t,e,r){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var n=s=s.next;do{if((n.tag&t)===t){var a=n.destroy;n.destroy=void 0,a!==void 0&&mo(e,r,a)}n=n.next}while(n!==s)}}function Ci(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var s=r.create;r.destroy=s()}r=r.next}while(r!==e)}}function po(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function Xf(t){var e=t.alternate;e!==null&&(t.alternate=null,Xf(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[It],delete e[An],delete e[eo],delete e[Lg],delete e[Ug])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Zf(t){return t.tag===5||t.tag===3||t.tag===4}function rd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Zf(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function go(t,e,r){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Ja));else if(s!==4&&(t=t.child,t!==null))for(go(t,e,r),t=t.sibling;t!==null;)go(t,e,r),t=t.sibling}function xo(t,e,r){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(xo(t,e,r),t=t.sibling;t!==null;)xo(t,e,r),t=t.sibling}var Ae=null,St=!1;function tr(t,e,r){for(r=r.child;r!==null;)em(t,e,r),r=r.sibling}function em(t,e,r){if(Lt&&typeof Lt.onCommitFiberUnmount=="function")try{Lt.onCommitFiberUnmount(wi,r)}catch{}switch(r.tag){case 5:Me||js(r,e);case 6:var s=Ae,n=St;Ae=null,tr(t,e,r),Ae=s,St=n,Ae!==null&&(St?(t=Ae,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Ae.removeChild(r.stateNode));break;case 18:Ae!==null&&(St?(t=Ae,r=r.stateNode,t.nodeType===8?al(t.parentNode,r):t.nodeType===1&&al(t,r),Cn(t)):al(Ae,r.stateNode));break;case 4:s=Ae,n=St,Ae=r.stateNode.containerInfo,St=!0,tr(t,e,r),Ae=s,St=n;break;case 0:case 11:case 14:case 15:if(!Me&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){n=s=s.next;do{var a=n,l=a.destroy;a=a.tag,l!==void 0&&(a&2||a&4)&&mo(r,e,l),n=n.next}while(n!==s)}tr(t,e,r);break;case 1:if(!Me&&(js(r,e),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(o){ye(r,e,o)}tr(t,e,r);break;case 21:tr(t,e,r);break;case 22:r.mode&1?(Me=(s=Me)||r.memoizedState!==null,tr(t,e,r),Me=s):tr(t,e,r);break;default:tr(t,e,r)}}function sd(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new Xg),e.forEach(function(s){var n=ox.bind(null,t,s);r.has(s)||(r.add(s),s.then(n,n))})}}function wt(t,e){var r=e.deletions;if(r!==null)for(var s=0;s<r.length;s++){var n=r[s];try{var a=t,l=e,o=l;e:for(;o!==null;){switch(o.tag){case 5:Ae=o.stateNode,St=!1;break e;case 3:Ae=o.stateNode.containerInfo,St=!0;break e;case 4:Ae=o.stateNode.containerInfo,St=!0;break e}o=o.return}if(Ae===null)throw Error(C(160));em(a,l,n),Ae=null,St=!1;var c=n.alternate;c!==null&&(c.return=null),n.return=null}catch(u){ye(n,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)tm(e,t),e=e.sibling}function tm(t,e){var r=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(wt(e,t),Ot(t),s&4){try{vn(3,t,t.return),Ci(3,t)}catch(y){ye(t,t.return,y)}try{vn(5,t,t.return)}catch(y){ye(t,t.return,y)}}break;case 1:wt(e,t),Ot(t),s&512&&r!==null&&js(r,r.return);break;case 5:if(wt(e,t),Ot(t),s&512&&r!==null&&js(r,r.return),t.flags&32){var n=t.stateNode;try{jn(n,"")}catch(y){ye(t,t.return,y)}}if(s&4&&(n=t.stateNode,n!=null)){var a=t.memoizedProps,l=r!==null?r.memoizedProps:a,o=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&kh(n,a),Fl(o,l);var u=Fl(o,a);for(l=0;l<c.length;l+=2){var h=c[l],d=c[l+1];h==="style"?Eh(n,d):h==="dangerouslySetInnerHTML"?Sh(n,d):h==="children"?jn(n,d):Yo(n,h,d,u)}switch(o){case"input":Ll(n,a);break;case"textarea":_h(n,a);break;case"select":var m=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!a.multiple;var g=a.value;g!=null?Ns(n,!!a.multiple,g,!1):m!==!!a.multiple&&(a.defaultValue!=null?Ns(n,!!a.multiple,a.defaultValue,!0):Ns(n,!!a.multiple,a.multiple?[]:"",!1))}n[An]=a}catch(y){ye(t,t.return,y)}}break;case 6:if(wt(e,t),Ot(t),s&4){if(t.stateNode===null)throw Error(C(162));n=t.stateNode,a=t.memoizedProps;try{n.nodeValue=a}catch(y){ye(t,t.return,y)}}break;case 3:if(wt(e,t),Ot(t),s&4&&r!==null&&r.memoizedState.isDehydrated)try{Cn(e.containerInfo)}catch(y){ye(t,t.return,y)}break;case 4:wt(e,t),Ot(t);break;case 13:wt(e,t),Ot(t),n=t.child,n.flags&8192&&(a=n.memoizedState!==null,n.stateNode.isHidden=a,!a||n.alternate!==null&&n.alternate.memoizedState!==null||(Pc=be())),s&4&&sd(t);break;case 22:if(h=r!==null&&r.memoizedState!==null,t.mode&1?(Me=(u=Me)||h,wt(e,t),Me=u):wt(e,t),Ot(t),s&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(I=t,h=t.child;h!==null;){for(d=I=h;I!==null;){switch(m=I,g=m.child,m.tag){case 0:case 11:case 14:case 15:vn(4,m,m.return);break;case 1:js(m,m.return);var v=m.stateNode;if(typeof v.componentWillUnmount=="function"){s=m,r=m.return;try{e=s,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(y){ye(s,r,y)}}break;case 5:js(m,m.return);break;case 22:if(m.memoizedState!==null){ad(d);continue}}g!==null?(g.return=m,I=g):ad(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{n=d.stateNode,u?(a=n.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=d.stateNode,c=d.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=Nh("display",l))}catch(y){ye(t,t.return,y)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(y){ye(t,t.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:wt(e,t),Ot(t),s&4&&sd(t);break;case 21:break;default:wt(e,t),Ot(t)}}function Ot(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(Zf(r)){var s=r;break e}r=r.return}throw Error(C(160))}switch(s.tag){case 5:var n=s.stateNode;s.flags&32&&(jn(n,""),s.flags&=-33);var a=rd(t);xo(t,a,n);break;case 3:case 4:var l=s.stateNode.containerInfo,o=rd(t);go(t,o,l);break;default:throw Error(C(161))}}catch(c){ye(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function ex(t,e,r){I=t,rm(t)}function rm(t,e,r){for(var s=(t.mode&1)!==0;I!==null;){var n=I,a=n.child;if(n.tag===22&&s){var l=n.memoizedState!==null||ma;if(!l){var o=n.alternate,c=o!==null&&o.memoizedState!==null||Me;o=ma;var u=Me;if(ma=l,(Me=c)&&!u)for(I=n;I!==null;)l=I,c=l.child,l.tag===22&&l.memoizedState!==null?id(n):c!==null?(c.return=l,I=c):id(n);for(;a!==null;)I=a,rm(a),a=a.sibling;I=n,ma=o,Me=u}nd(t)}else n.subtreeFlags&8772&&a!==null?(a.return=n,I=a):nd(t)}}function nd(t){for(;I!==null;){var e=I;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Me||Ci(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!Me)if(r===null)s.componentDidMount();else{var n=e.elementType===e.type?r.memoizedProps:_t(e.type,r.memoizedProps);s.componentDidUpdate(n,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&zu(e,a,s);break;case 3:var l=e.updateQueue;if(l!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}zu(e,l,r)}break;case 5:var o=e.stateNode;if(r===null&&e.flags&4){r=o;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Cn(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(C(163))}Me||e.flags&512&&po(e)}catch(m){ye(e,e.return,m)}}if(e===t){I=null;break}if(r=e.sibling,r!==null){r.return=e.return,I=r;break}I=e.return}}function ad(t){for(;I!==null;){var e=I;if(e===t){I=null;break}var r=e.sibling;if(r!==null){r.return=e.return,I=r;break}I=e.return}}function id(t){for(;I!==null;){var e=I;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Ci(4,e)}catch(c){ye(e,r,c)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var n=e.return;try{s.componentDidMount()}catch(c){ye(e,n,c)}}var a=e.return;try{po(e)}catch(c){ye(e,a,c)}break;case 5:var l=e.return;try{po(e)}catch(c){ye(e,l,c)}}}catch(c){ye(e,e.return,c)}if(e===t){I=null;break}var o=e.sibling;if(o!==null){o.return=e.return,I=o;break}I=e.return}}var tx=Math.ceil,ii=Qt.ReactCurrentDispatcher,Ec=Qt.ReactCurrentOwner,pt=Qt.ReactCurrentBatchConfig,ee=0,Te=null,je=null,Ie=0,nt=0,Ss=jr(0),Ee=0,Mn=null,Gr=0,Pi=0,Cc=0,yn=null,Je=null,Pc=0,Fs=1/0,Ft=null,li=!1,vo=null,gr=null,pa=!1,cr=null,oi=0,wn=0,yo=null,Da=-1,$a=0;function Ve(){return ee&6?be():Da!==-1?Da:Da=be()}function xr(t){return t.mode&1?ee&2&&Ie!==0?Ie&-Ie:$g.transition!==null?($a===0&&($a=Mh()),$a):(t=se,t!==0||(t=window.event,t=t===void 0?16:Hh(t.type)),t):1}function Pt(t,e,r,s){if(50<wn)throw wn=0,yo=null,Error(C(185));Kn(t,r,s),(!(ee&2)||t!==Te)&&(t===Te&&(!(ee&2)&&(Pi|=r),Ee===4&&ir(t,Ie)),Ze(t,s),r===1&&ee===0&&!(e.mode&1)&&(Fs=be()+500,Si&&Sr()))}function Ze(t,e){var r=t.callbackNode;$0(t,e);var s=Wa(t,t===Te?Ie:0);if(s===0)r!==null&&pu(r),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(r!=null&&pu(r),e===1)t.tag===0?Dg(ld.bind(null,t)):hf(ld.bind(null,t)),Ag(function(){!(ee&6)&&Sr()}),r=null;else{switch(Fh(s)){case 1:r=tc;break;case 4:r=Dh;break;case 16:r=Va;break;case 536870912:r=$h;break;default:r=Va}r=um(r,sm.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function sm(t,e){if(Da=-1,$a=0,ee&6)throw Error(C(327));var r=t.callbackNode;if(Rs()&&t.callbackNode!==r)return null;var s=Wa(t,t===Te?Ie:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=ci(t,s);else{e=s;var n=ee;ee|=2;var a=am();(Te!==t||Ie!==e)&&(Ft=null,Fs=be()+500,Br(t,e));do try{nx();break}catch(o){nm(t,o)}while(!0);mc(),ii.current=a,ee=n,je!==null?e=0:(Te=null,Ie=0,e=Ee)}if(e!==0){if(e===2&&(n=Wl(t),n!==0&&(s=n,e=wo(t,n))),e===1)throw r=Mn,Br(t,0),ir(t,s),Ze(t,be()),r;if(e===6)ir(t,s);else{if(n=t.current.alternate,!(s&30)&&!rx(n)&&(e=ci(t,s),e===2&&(a=Wl(t),a!==0&&(s=a,e=wo(t,a))),e===1))throw r=Mn,Br(t,0),ir(t,s),Ze(t,be()),r;switch(t.finishedWork=n,t.finishedLanes=s,e){case 0:case 1:throw Error(C(345));case 2:Or(t,Je,Ft);break;case 3:if(ir(t,s),(s&130023424)===s&&(e=Pc+500-be(),10<e)){if(Wa(t,0)!==0)break;if(n=t.suspendedLanes,(n&s)!==s){Ve(),t.pingedLanes|=t.suspendedLanes&n;break}t.timeoutHandle=Zl(Or.bind(null,t,Je,Ft),e);break}Or(t,Je,Ft);break;case 4:if(ir(t,s),(s&4194240)===s)break;for(e=t.eventTimes,n=-1;0<s;){var l=31-Ct(s);a=1<<l,l=e[l],l>n&&(n=l),s&=~a}if(s=n,s=be()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*tx(s/1960))-s,10<s){t.timeoutHandle=Zl(Or.bind(null,t,Je,Ft),s);break}Or(t,Je,Ft);break;case 5:Or(t,Je,Ft);break;default:throw Error(C(329))}}}return Ze(t,be()),t.callbackNode===r?sm.bind(null,t):null}function wo(t,e){var r=yn;return t.current.memoizedState.isDehydrated&&(Br(t,e).flags|=256),t=ci(t,e),t!==2&&(e=Je,Je=r,e!==null&&bo(e)),t}function bo(t){Je===null?Je=t:Je.push.apply(Je,t)}function rx(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var n=r[s],a=n.getSnapshot;n=n.value;try{if(!Tt(a(),n))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ir(t,e){for(e&=~Cc,e&=~Pi,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Ct(e),s=1<<r;t[r]=-1,e&=~s}}function ld(t){if(ee&6)throw Error(C(327));Rs();var e=Wa(t,0);if(!(e&1))return Ze(t,be()),null;var r=ci(t,e);if(t.tag!==0&&r===2){var s=Wl(t);s!==0&&(e=s,r=wo(t,s))}if(r===1)throw r=Mn,Br(t,0),ir(t,e),Ze(t,be()),r;if(r===6)throw Error(C(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Or(t,Je,Ft),Ze(t,be()),null}function Tc(t,e){var r=ee;ee|=1;try{return t(e)}finally{ee=r,ee===0&&(Fs=be()+500,Si&&Sr())}}function Jr(t){cr!==null&&cr.tag===0&&!(ee&6)&&Rs();var e=ee;ee|=1;var r=pt.transition,s=se;try{if(pt.transition=null,se=1,t)return t()}finally{se=s,pt.transition=r,ee=e,!(ee&6)&&Sr()}}function Rc(){nt=Ss.current,ce(Ss)}function Br(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,Og(r)),je!==null)for(r=je.return;r!==null;){var s=r;switch(dc(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Ya();break;case 3:$s(),ce(Qe),ce(Fe),wc();break;case 5:yc(s);break;case 4:$s();break;case 13:ce(ge);break;case 19:ce(ge);break;case 10:pc(s.type._context);break;case 22:case 23:Rc()}r=r.return}if(Te=t,je=t=vr(t.current,null),Ie=nt=e,Ee=0,Mn=null,Cc=Pi=Gr=0,Je=yn=null,$r!==null){for(e=0;e<$r.length;e++)if(r=$r[e],s=r.interleaved,s!==null){r.interleaved=null;var n=s.next,a=r.pending;if(a!==null){var l=a.next;a.next=n,s.next=l}r.pending=s}$r=null}return t}function nm(t,e){do{var r=je;try{if(mc(),Ia.current=ai,ni){for(var s=xe.memoizedState;s!==null;){var n=s.queue;n!==null&&(n.pending=null),s=s.next}ni=!1}if(Kr=0,Pe=Ne=xe=null,xn=!1,Un=0,Ec.current=null,r===null||r.return===null){Ee=1,Mn=e,je=null;break}e:{var a=t,l=r.return,o=r,c=e;if(e=Ie,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=o,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=Gu(l);if(g!==null){g.flags&=-257,Ju(g,l,o,a,e),g.mode&1&&Ku(a,u,e),e=g,c=u;var v=e.updateQueue;if(v===null){var y=new Set;y.add(c),e.updateQueue=y}else v.add(c);break e}else{if(!(e&1)){Ku(a,u,e),Oc();break e}c=Error(C(426))}}else if(de&&o.mode&1){var w=Gu(l);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Ju(w,l,o,a,e),hc(Ms(c,o));break e}}a=c=Ms(c,o),Ee!==4&&(Ee=2),yn===null?yn=[a]:yn.push(a),a=l;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var f=Bf(a,c,e);Bu(a,f);break e;case 1:o=c;var p=a.type,x=a.stateNode;if(!(a.flags&128)&&(typeof p.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(gr===null||!gr.has(x)))){a.flags|=65536,e&=-e,a.lanes|=e;var k=zf(a,o,e);Bu(a,k);break e}}a=a.return}while(a!==null)}lm(r)}catch(N){e=N,je===r&&r!==null&&(je=r=r.return);continue}break}while(!0)}function am(){var t=ii.current;return ii.current=ai,t===null?ai:t}function Oc(){(Ee===0||Ee===3||Ee===2)&&(Ee=4),Te===null||!(Gr&268435455)&&!(Pi&268435455)||ir(Te,Ie)}function ci(t,e){var r=ee;ee|=2;var s=am();(Te!==t||Ie!==e)&&(Ft=null,Br(t,e));do try{sx();break}catch(n){nm(t,n)}while(!0);if(mc(),ee=r,ii.current=s,je!==null)throw Error(C(261));return Te=null,Ie=0,Ee}function sx(){for(;je!==null;)im(je)}function nx(){for(;je!==null&&!P0();)im(je)}function im(t){var e=cm(t.alternate,t,nt);t.memoizedProps=t.pendingProps,e===null?lm(t):je=e,Ec.current=null}function lm(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=Qg(r,e),r!==null){r.flags&=32767,je=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ee=6,je=null;return}}else if(r=Yg(r,e,nt),r!==null){je=r;return}if(e=e.sibling,e!==null){je=e;return}je=e=t}while(e!==null);Ee===0&&(Ee=5)}function Or(t,e,r){var s=se,n=pt.transition;try{pt.transition=null,se=1,ax(t,e,r,s)}finally{pt.transition=n,se=s}return null}function ax(t,e,r,s){do Rs();while(cr!==null);if(ee&6)throw Error(C(327));r=t.finishedWork;var n=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(C(177));t.callbackNode=null,t.callbackPriority=0;var a=r.lanes|r.childLanes;if(M0(t,a),t===Te&&(je=Te=null,Ie=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||pa||(pa=!0,um(Va,function(){return Rs(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=pt.transition,pt.transition=null;var l=se;se=1;var o=ee;ee|=4,Ec.current=null,Zg(t,r),tm(r,t),Sg(Ql),Ha=!!Yl,Ql=Yl=null,t.current=r,ex(r),T0(),ee=o,se=l,pt.transition=a}else t.current=r;if(pa&&(pa=!1,cr=t,oi=n),a=t.pendingLanes,a===0&&(gr=null),A0(r.stateNode),Ze(t,be()),e!==null)for(s=t.onRecoverableError,r=0;r<e.length;r++)n=e[r],s(n.value,{componentStack:n.stack,digest:n.digest});if(li)throw li=!1,t=vo,vo=null,t;return oi&1&&t.tag!==0&&Rs(),a=t.pendingLanes,a&1?t===yo?wn++:(wn=0,yo=t):wn=0,Sr(),null}function Rs(){if(cr!==null){var t=Fh(oi),e=pt.transition,r=se;try{if(pt.transition=null,se=16>t?16:t,cr===null)var s=!1;else{if(t=cr,cr=null,oi=0,ee&6)throw Error(C(331));var n=ee;for(ee|=4,I=t.current;I!==null;){var a=I,l=a.child;if(I.flags&16){var o=a.deletions;if(o!==null){for(var c=0;c<o.length;c++){var u=o[c];for(I=u;I!==null;){var h=I;switch(h.tag){case 0:case 11:case 15:vn(8,h,a)}var d=h.child;if(d!==null)d.return=h,I=d;else for(;I!==null;){h=I;var m=h.sibling,g=h.return;if(Xf(h),h===u){I=null;break}if(m!==null){m.return=g,I=m;break}I=g}}}var v=a.alternate;if(v!==null){var y=v.child;if(y!==null){v.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}I=a}}if(a.subtreeFlags&2064&&l!==null)l.return=a,I=l;else e:for(;I!==null;){if(a=I,a.flags&2048)switch(a.tag){case 0:case 11:case 15:vn(9,a,a.return)}var f=a.sibling;if(f!==null){f.return=a.return,I=f;break e}I=a.return}}var p=t.current;for(I=p;I!==null;){l=I;var x=l.child;if(l.subtreeFlags&2064&&x!==null)x.return=l,I=x;else e:for(l=p;I!==null;){if(o=I,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Ci(9,o)}}catch(N){ye(o,o.return,N)}if(o===l){I=null;break e}var k=o.sibling;if(k!==null){k.return=o.return,I=k;break e}I=o.return}}if(ee=n,Sr(),Lt&&typeof Lt.onPostCommitFiberRoot=="function")try{Lt.onPostCommitFiberRoot(wi,t)}catch{}s=!0}return s}finally{se=r,pt.transition=e}}return!1}function od(t,e,r){e=Ms(r,e),e=Bf(t,e,1),t=pr(t,e,1),e=Ve(),t!==null&&(Kn(t,1,e),Ze(t,e))}function ye(t,e,r){if(t.tag===3)od(t,t,r);else for(;e!==null;){if(e.tag===3){od(e,t,r);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(gr===null||!gr.has(s))){t=Ms(r,t),t=zf(e,t,1),e=pr(e,t,1),t=Ve(),e!==null&&(Kn(e,1,t),Ze(e,t));break}}e=e.return}}function ix(t,e,r){var s=t.pingCache;s!==null&&s.delete(e),e=Ve(),t.pingedLanes|=t.suspendedLanes&r,Te===t&&(Ie&r)===r&&(Ee===4||Ee===3&&(Ie&130023424)===Ie&&500>be()-Pc?Br(t,0):Cc|=r),Ze(t,e)}function om(t,e){e===0&&(t.mode&1?(e=aa,aa<<=1,!(aa&130023424)&&(aa=4194304)):e=1);var r=Ve();t=Jt(t,e),t!==null&&(Kn(t,e,r),Ze(t,r))}function lx(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),om(t,r)}function ox(t,e){var r=0;switch(t.tag){case 13:var s=t.stateNode,n=t.memoizedState;n!==null&&(r=n.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(C(314))}s!==null&&s.delete(e),om(t,r)}var cm;cm=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Qe.current)Ye=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Ye=!1,Jg(t,e,r);Ye=!!(t.flags&131072)}else Ye=!1,de&&e.flags&1048576&&ff(e,Za,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;Ua(t,e),t=e.pendingProps;var n=Ls(e,Fe.current);Ts(e,r),n=kc(null,e,s,t,n,r);var a=_c();return e.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Xe(s)?(a=!0,Qa(e)):a=!1,e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,xc(e),n.updater=Ei,e.stateNode=n,n._reactInternals=e,io(e,s,t,r),e=co(null,e,s,!0,a,r)):(e.tag=0,de&&a&&uc(e),ze(null,e,n,r),e=e.child),e;case 16:s=e.elementType;e:{switch(Ua(t,e),t=e.pendingProps,n=s._init,s=n(s._payload),e.type=s,n=e.tag=ux(s),t=_t(s,t),n){case 0:e=oo(null,e,s,t,r);break e;case 1:e=Xu(null,e,s,t,r);break e;case 11:e=Yu(null,e,s,t,r);break e;case 14:e=Qu(null,e,s,_t(s.type,t),r);break e}throw Error(C(306,s,""))}return e;case 0:return s=e.type,n=e.pendingProps,n=e.elementType===s?n:_t(s,n),oo(t,e,s,n,r);case 1:return s=e.type,n=e.pendingProps,n=e.elementType===s?n:_t(s,n),Xu(t,e,s,n,r);case 3:e:{if(Hf(e),t===null)throw Error(C(387));s=e.pendingProps,a=e.memoizedState,n=a.element,yf(t,e),ri(e,s,null,r);var l=e.memoizedState;if(s=l.element,a.isDehydrated)if(a={element:s,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){n=Ms(Error(C(423)),e),e=Zu(t,e,s,r,n);break e}else if(s!==n){n=Ms(Error(C(424)),e),e=Zu(t,e,s,r,n);break e}else for(lt=mr(e.stateNode.containerInfo.firstChild),ot=e,de=!0,Et=null,r=xf(e,null,s,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Us(),s===n){e=Yt(t,e,r);break e}ze(t,e,s,r)}e=e.child}return e;case 5:return wf(e),t===null&&so(e),s=e.type,n=e.pendingProps,a=t!==null?t.memoizedProps:null,l=n.children,Xl(s,n)?l=null:a!==null&&Xl(s,a)&&(e.flags|=32),Wf(t,e),ze(t,e,l,r),e.child;case 6:return t===null&&so(e),null;case 13:return Kf(t,e,r);case 4:return vc(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=Ds(e,null,s,r):ze(t,e,s,r),e.child;case 11:return s=e.type,n=e.pendingProps,n=e.elementType===s?n:_t(s,n),Yu(t,e,s,n,r);case 7:return ze(t,e,e.pendingProps,r),e.child;case 8:return ze(t,e,e.pendingProps.children,r),e.child;case 12:return ze(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(s=e.type._context,n=e.pendingProps,a=e.memoizedProps,l=n.value,le(ei,s._currentValue),s._currentValue=l,a!==null)if(Tt(a.value,l)){if(a.children===n.children&&!Qe.current){e=Yt(t,e,r);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var o=a.dependencies;if(o!==null){l=a.child;for(var c=o.firstContext;c!==null;){if(c.context===s){if(a.tag===1){c=Wt(-1,r&-r),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}a.lanes|=r,c=a.alternate,c!==null&&(c.lanes|=r),no(a.return,r,e),o.lanes|=r;break}c=c.next}}else if(a.tag===10)l=a.type===e.type?null:a.child;else if(a.tag===18){if(l=a.return,l===null)throw Error(C(341));l.lanes|=r,o=l.alternate,o!==null&&(o.lanes|=r),no(l,r,e),l=a.sibling}else l=a.child;if(l!==null)l.return=a;else for(l=a;l!==null;){if(l===e){l=null;break}if(a=l.sibling,a!==null){a.return=l.return,l=a;break}l=l.return}a=l}ze(t,e,n.children,r),e=e.child}return e;case 9:return n=e.type,s=e.pendingProps.children,Ts(e,r),n=gt(n),s=s(n),e.flags|=1,ze(t,e,s,r),e.child;case 14:return s=e.type,n=_t(s,e.pendingProps),n=_t(s.type,n),Qu(t,e,s,n,r);case 15:return qf(t,e,e.type,e.pendingProps,r);case 17:return s=e.type,n=e.pendingProps,n=e.elementType===s?n:_t(s,n),Ua(t,e),e.tag=1,Xe(s)?(t=!0,Qa(e)):t=!1,Ts(e,r),Ff(e,s,n),io(e,s,n,r),co(null,e,s,!0,t,r);case 19:return Gf(t,e,r);case 22:return Vf(t,e,r)}throw Error(C(156,e.tag))};function um(t,e){return Uh(t,e)}function cx(t,e,r,s){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mt(t,e,r,s){return new cx(t,e,r,s)}function Ac(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ux(t){if(typeof t=="function")return Ac(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Xo)return 11;if(t===Zo)return 14}return 2}function vr(t,e){var r=t.alternate;return r===null?(r=mt(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Ma(t,e,r,s,n,a){var l=2;if(s=t,typeof t=="function")Ac(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case ps:return zr(r.children,n,a,e);case Qo:l=8,n|=8;break;case Tl:return t=mt(12,r,e,n|2),t.elementType=Tl,t.lanes=a,t;case Rl:return t=mt(13,r,e,n),t.elementType=Rl,t.lanes=a,t;case Ol:return t=mt(19,r,e,n),t.elementType=Ol,t.lanes=a,t;case yh:return Ti(r,n,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case xh:l=10;break e;case vh:l=9;break e;case Xo:l=11;break e;case Zo:l=14;break e;case sr:l=16,s=null;break e}throw Error(C(130,t==null?t:typeof t,""))}return e=mt(l,r,e,n),e.elementType=t,e.type=s,e.lanes=a,e}function zr(t,e,r,s){return t=mt(7,t,s,e),t.lanes=r,t}function Ti(t,e,r,s){return t=mt(22,t,s,e),t.elementType=yh,t.lanes=r,t.stateNode={isHidden:!1},t}function fl(t,e,r){return t=mt(6,t,null,e),t.lanes=r,t}function ml(t,e,r){return e=mt(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function dx(t,e,r,s,n){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Gi(0),this.expirationTimes=Gi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gi(0),this.identifierPrefix=s,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function Ic(t,e,r,s,n,a,l,o,c){return t=new dx(t,e,r,o,c),e===1?(e=1,a===!0&&(e|=8)):e=0,a=mt(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},xc(a),t}function hx(t,e,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ms,key:s==null?null:""+s,children:t,containerInfo:e,implementation:r}}function dm(t){if(!t)return kr;t=t._reactInternals;e:{if(Qr(t)!==t||t.tag!==1)throw Error(C(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Xe(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(C(171))}if(t.tag===1){var r=t.type;if(Xe(r))return df(t,r,e)}return e}function hm(t,e,r,s,n,a,l,o,c){return t=Ic(r,s,!0,t,n,a,l,o,c),t.context=dm(null),r=t.current,s=Ve(),n=xr(r),a=Wt(s,n),a.callback=e??null,pr(r,a,n),t.current.lanes=n,Kn(t,n,s),Ze(t,s),t}function Ri(t,e,r,s){var n=e.current,a=Ve(),l=xr(n);return r=dm(r),e.context===null?e.context=r:e.pendingContext=r,e=Wt(a,l),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=pr(n,e,l),t!==null&&(Pt(t,n,l,a),Aa(t,n,l)),l}function ui(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function cd(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Lc(t,e){cd(t,e),(t=t.alternate)&&cd(t,e)}function fx(){return null}var fm=typeof reportError=="function"?reportError:function(t){console.error(t)};function Uc(t){this._internalRoot=t}Oi.prototype.render=Uc.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(C(409));Ri(t,e,null,null)};Oi.prototype.unmount=Uc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Jr(function(){Ri(null,t,null,null)}),e[Gt]=null}};function Oi(t){this._internalRoot=t}Oi.prototype.unstable_scheduleHydration=function(t){if(t){var e=qh();t={blockedOn:null,target:t,priority:e};for(var r=0;r<ar.length&&e!==0&&e<ar[r].priority;r++);ar.splice(r,0,t),r===0&&Wh(t)}};function Dc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ai(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ud(){}function mx(t,e,r,s,n){if(n){if(typeof s=="function"){var a=s;s=function(){var u=ui(l);a.call(u)}}var l=hm(e,s,t,0,null,!1,!1,"",ud);return t._reactRootContainer=l,t[Gt]=l.current,Rn(t.nodeType===8?t.parentNode:t),Jr(),l}for(;n=t.lastChild;)t.removeChild(n);if(typeof s=="function"){var o=s;s=function(){var u=ui(c);o.call(u)}}var c=Ic(t,0,!1,null,null,!1,!1,"",ud);return t._reactRootContainer=c,t[Gt]=c.current,Rn(t.nodeType===8?t.parentNode:t),Jr(function(){Ri(e,c,r,s)}),c}function Ii(t,e,r,s,n){var a=r._reactRootContainer;if(a){var l=a;if(typeof n=="function"){var o=n;n=function(){var c=ui(l);o.call(c)}}Ri(e,l,t,n)}else l=mx(r,e,t,n,s);return ui(l)}Bh=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=on(e.pendingLanes);r!==0&&(rc(e,r|1),Ze(e,be()),!(ee&6)&&(Fs=be()+500,Sr()))}break;case 13:Jr(function(){var s=Jt(t,1);if(s!==null){var n=Ve();Pt(s,t,1,n)}}),Lc(t,1)}};sc=function(t){if(t.tag===13){var e=Jt(t,134217728);if(e!==null){var r=Ve();Pt(e,t,134217728,r)}Lc(t,134217728)}};zh=function(t){if(t.tag===13){var e=xr(t),r=Jt(t,e);if(r!==null){var s=Ve();Pt(r,t,e,s)}Lc(t,e)}};qh=function(){return se};Vh=function(t,e){var r=se;try{return se=t,e()}finally{se=r}};zl=function(t,e,r){switch(e){case"input":if(Ll(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var s=r[e];if(s!==t&&s.form===t.form){var n=ji(s);if(!n)throw Error(C(90));bh(s),Ll(s,n)}}}break;case"textarea":_h(t,r);break;case"select":e=r.value,e!=null&&Ns(t,!!r.multiple,e,!1)}};Th=Tc;Rh=Jr;var px={usingClientEntryPoint:!1,Events:[Jn,ys,ji,Ch,Ph,Tc]},nn={findFiberByHostInstance:Dr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gx={bundleType:nn.bundleType,version:nn.version,rendererPackageName:nn.rendererPackageName,rendererConfig:nn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Ih(t),t===null?null:t.stateNode},findFiberByHostInstance:nn.findFiberByHostInstance||fx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ga=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ga.isDisabled&&ga.supportsFiber)try{wi=ga.inject(gx),Lt=ga}catch{}}ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=px;ut.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Dc(e))throw Error(C(200));return hx(t,e,null,r)};ut.createRoot=function(t,e){if(!Dc(t))throw Error(C(299));var r=!1,s="",n=fm;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(n=e.onRecoverableError)),e=Ic(t,1,!1,null,null,r,!1,s,n),t[Gt]=e.current,Rn(t.nodeType===8?t.parentNode:t),new Uc(e)};ut.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(C(188)):(t=Object.keys(t).join(","),Error(C(268,t)));return t=Ih(e),t=t===null?null:t.stateNode,t};ut.flushSync=function(t){return Jr(t)};ut.hydrate=function(t,e,r){if(!Ai(e))throw Error(C(200));return Ii(null,t,e,!0,r)};ut.hydrateRoot=function(t,e,r){if(!Dc(t))throw Error(C(405));var s=r!=null&&r.hydratedSources||null,n=!1,a="",l=fm;if(r!=null&&(r.unstable_strictMode===!0&&(n=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(l=r.onRecoverableError)),e=hm(e,null,t,1,r??null,n,!1,a,l),t[Gt]=e.current,Rn(t),s)for(t=0;t<s.length;t++)r=s[t],n=r._getVersion,n=n(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,n]:e.mutableSourceEagerHydrationData.push(r,n);return new Oi(e)};ut.render=function(t,e,r){if(!Ai(e))throw Error(C(200));return Ii(null,t,e,!1,r)};ut.unmountComponentAtNode=function(t){if(!Ai(t))throw Error(C(40));return t._reactRootContainer?(Jr(function(){Ii(null,null,t,!1,function(){t._reactRootContainer=null,t[Gt]=null})}),!0):!1};ut.unstable_batchedUpdates=Tc;ut.unstable_renderSubtreeIntoContainer=function(t,e,r,s){if(!Ai(r))throw Error(C(200));if(t==null||t._reactInternals===void 0)throw Error(C(38));return Ii(t,e,r,!1,s)};ut.version="18.3.1-next-f1338f8080-20240426";function mm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(mm)}catch(t){console.error(t)}}mm(),fh.exports=ut;var xx=fh.exports,dd=xx;Cl.createRoot=dd.createRoot,Cl.hydrateRoot=dd.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fn(){return Fn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Fn.apply(this,arguments)}var ur;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ur||(ur={}));const hd="popstate";function vx(t){t===void 0&&(t={});function e(n,a){let{pathname:l="/",search:o="",hash:c=""}=Xr(n.location.hash.substr(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),ko("",{pathname:l,search:o,hash:c},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){let l=n.document.querySelector("base"),o="";if(l&&l.getAttribute("href")){let c=n.location.href,u=c.indexOf("#");o=u===-1?c:c.slice(0,u)}return o+"#"+(typeof a=="string"?a:di(a))}function s(n,a){Li(n.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(a)+")")}return wx(e,r,s,t)}function ke(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Li(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function yx(){return Math.random().toString(36).substr(2,8)}function fd(t,e){return{usr:t.state,key:t.key,idx:e}}function ko(t,e,r,s){return r===void 0&&(r=null),Fn({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Xr(e):e,{state:r,key:e&&e.key||s||yx()})}function di(t){let{pathname:e="/",search:r="",hash:s=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function Xr(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let s=t.indexOf("?");s>=0&&(e.search=t.substr(s),t=t.substr(0,s)),t&&(e.pathname=t)}return e}function wx(t,e,r,s){s===void 0&&(s={});let{window:n=document.defaultView,v5Compat:a=!1}=s,l=n.history,o=ur.Pop,c=null,u=h();u==null&&(u=0,l.replaceState(Fn({},l.state,{idx:u}),""));function h(){return(l.state||{idx:null}).idx}function d(){o=ur.Pop;let w=h(),f=w==null?null:w-u;u=w,c&&c({action:o,location:y.location,delta:f})}function m(w,f){o=ur.Push;let p=ko(y.location,w,f);r&&r(p,w),u=h()+1;let x=fd(p,u),k=y.createHref(p);try{l.pushState(x,"",k)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;n.location.assign(k)}a&&c&&c({action:o,location:y.location,delta:1})}function g(w,f){o=ur.Replace;let p=ko(y.location,w,f);r&&r(p,w),u=h();let x=fd(p,u),k=y.createHref(p);l.replaceState(x,"",k),a&&c&&c({action:o,location:y.location,delta:0})}function v(w){let f=n.location.origin!=="null"?n.location.origin:n.location.href,p=typeof w=="string"?w:di(w);return p=p.replace(/ $/,"%20"),ke(f,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,f)}let y={get action(){return o},get location(){return t(n,l)},listen(w){if(c)throw new Error("A history only accepts one active listener");return n.addEventListener(hd,d),c=w,()=>{n.removeEventListener(hd,d),c=null}},createHref(w){return e(n,w)},createURL:v,encodeLocation(w){let f=v(w);return{pathname:f.pathname,search:f.search,hash:f.hash}},push:m,replace:g,go(w){return l.go(w)}};return y}var md;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(md||(md={}));function bx(t,e,r){return r===void 0&&(r="/"),kx(t,e,r)}function kx(t,e,r,s){let n=typeof e=="string"?Xr(e):e,a=$c(n.pathname||"/",r);if(a==null)return null;let l=pm(t);_x(l);let o=null;for(let c=0;o==null&&c<l.length;++c){let u=Lx(a);o=Ox(l[c],u)}return o}function pm(t,e,r,s){e===void 0&&(e=[]),r===void 0&&(r=[]),s===void 0&&(s="");let n=(a,l,o)=>{let c={relativePath:o===void 0?a.path||"":o,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};c.relativePath.startsWith("/")&&(ke(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let u=yr([s,c.relativePath]),h=r.concat(c);a.children&&a.children.length>0&&(ke(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),pm(a.children,e,h,u)),!(a.path==null&&!a.index)&&e.push({path:u,score:Tx(u,a.index),routesMeta:h})};return t.forEach((a,l)=>{var o;if(a.path===""||!((o=a.path)!=null&&o.includes("?")))n(a,l);else for(let c of gm(a.path))n(a,l,c)}),e}function gm(t){let e=t.split("/");if(e.length===0)return[];let[r,...s]=e,n=r.endsWith("?"),a=r.replace(/\?$/,"");if(s.length===0)return n?[a,""]:[a];let l=gm(s.join("/")),o=[];return o.push(...l.map(c=>c===""?a:[a,c].join("/"))),n&&o.push(...l),o.map(c=>t.startsWith("/")&&c===""?"/":c)}function _x(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:Rx(e.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}const jx=/^:[\w-]+$/,Sx=3,Nx=2,Ex=1,Cx=10,Px=-2,pd=t=>t==="*";function Tx(t,e){let r=t.split("/"),s=r.length;return r.some(pd)&&(s+=Px),e&&(s+=Nx),r.filter(n=>!pd(n)).reduce((n,a)=>n+(jx.test(a)?Sx:a===""?Ex:Cx),s)}function Rx(t,e){return t.length===e.length&&t.slice(0,-1).every((s,n)=>s===e[n])?t[t.length-1]-e[e.length-1]:0}function Ox(t,e,r){let{routesMeta:s}=t,n={},a="/",l=[];for(let o=0;o<s.length;++o){let c=s[o],u=o===s.length-1,h=a==="/"?e:e.slice(a.length)||"/",d=Ax({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},h),m=c.route;if(!d)return null;Object.assign(n,d.params),l.push({params:n,pathname:yr([a,d.pathname]),pathnameBase:Fx(yr([a,d.pathnameBase])),route:m}),d.pathnameBase!=="/"&&(a=yr([a,d.pathnameBase]))}return l}function Ax(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,s]=Ix(t.path,t.caseSensitive,t.end),n=e.match(r);if(!n)return null;let a=n[0],l=a.replace(/(.)\/+$/,"$1"),o=n.slice(1);return{params:s.reduce((u,h,d)=>{let{paramName:m,isOptional:g}=h;if(m==="*"){let y=o[d]||"";l=a.slice(0,a.length-y.length).replace(/(.)\/+$/,"$1")}const v=o[d];return g&&!v?u[m]=void 0:u[m]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:l,pattern:t}}function Ix(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),Li(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let s=[],n="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,o,c)=>(s.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),n+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?n+="\\/*$":t!==""&&t!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,e?void 0:"i"),s]}function Lx(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Li(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function $c(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,s=t.charAt(r);return s&&s!=="/"?null:t.slice(r)||"/"}const Ux=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Dx=t=>Ux.test(t);function $x(t,e){e===void 0&&(e="/");let{pathname:r,search:s="",hash:n=""}=typeof t=="string"?Xr(t):t,a;if(r)if(Dx(r))a=r;else{if(r.includes("//")){let l=r;r=r.replace(/\/\/+/g,"/"),Li(!1,"Pathnames cannot have embedded double slashes - normalizing "+(l+" -> "+r))}r.startsWith("/")?a=gd(r.substring(1),"/"):a=gd(r,e)}else a=e;return{pathname:a,search:Bx(s),hash:zx(n)}}function gd(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(n=>{n===".."?r.length>1&&r.pop():n!=="."&&r.push(n)}),r.length>1?r.join("/"):"/"}function pl(t,e,r,s){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Mx(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function Mc(t,e){let r=Mx(t);return e?r.map((s,n)=>n===r.length-1?s.pathname:s.pathnameBase):r.map(s=>s.pathnameBase)}function Fc(t,e,r,s){s===void 0&&(s=!1);let n;typeof t=="string"?n=Xr(t):(n=Fn({},t),ke(!n.pathname||!n.pathname.includes("?"),pl("?","pathname","search",n)),ke(!n.pathname||!n.pathname.includes("#"),pl("#","pathname","hash",n)),ke(!n.search||!n.search.includes("#"),pl("#","search","hash",n)));let a=t===""||n.pathname==="",l=a?"/":n.pathname,o;if(l==null)o=r;else{let d=e.length-1;if(!s&&l.startsWith("..")){let m=l.split("/");for(;m[0]==="..";)m.shift(),d-=1;n.pathname=m.join("/")}o=d>=0?e[d]:"/"}let c=$x(n,o),u=l&&l!=="/"&&l.endsWith("/"),h=(a||l===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||h)&&(c.pathname+="/"),c}const yr=t=>t.join("/").replace(/\/\/+/g,"/"),Fx=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Bx=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,zx=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function qx(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const xm=["post","put","patch","delete"];new Set(xm);const Vx=["get",...xm];new Set(Vx);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bn(){return Bn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Bn.apply(this,arguments)}const Bc=b.createContext(null),Wx=b.createContext(null),Nr=b.createContext(null),Ui=b.createContext(null),Xt=b.createContext({outlet:null,matches:[],isDataRoute:!1}),vm=b.createContext(null);function Hx(t,e){let{relative:r}=e===void 0?{}:e;Hs()||ke(!1);let{basename:s,navigator:n}=b.useContext(Nr),{hash:a,pathname:l,search:o}=wm(t,{relative:r}),c=l;return s!=="/"&&(c=l==="/"?s:yr([s,l])),n.createHref({pathname:c,search:o,hash:a})}function Hs(){return b.useContext(Ui)!=null}function Zr(){return Hs()||ke(!1),b.useContext(Ui).location}function ym(t){b.useContext(Nr).static||b.useLayoutEffect(t)}function Zt(){let{isDataRoute:t}=b.useContext(Xt);return t?iv():Kx()}function Kx(){Hs()||ke(!1);let t=b.useContext(Bc),{basename:e,future:r,navigator:s}=b.useContext(Nr),{matches:n}=b.useContext(Xt),{pathname:a}=Zr(),l=JSON.stringify(Mc(n,r.v7_relativeSplatPath)),o=b.useRef(!1);return ym(()=>{o.current=!0}),b.useCallback(function(u,h){if(h===void 0&&(h={}),!o.current)return;if(typeof u=="number"){s.go(u);return}let d=Fc(u,JSON.parse(l),a,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:yr([e,d.pathname])),(h.replace?s.replace:s.push)(d,h.state,h)},[e,s,l,a,t])}function Gx(){let{matches:t}=b.useContext(Xt),e=t[t.length-1];return e?e.params:{}}function wm(t,e){let{relative:r}=e===void 0?{}:e,{future:s}=b.useContext(Nr),{matches:n}=b.useContext(Xt),{pathname:a}=Zr(),l=JSON.stringify(Mc(n,s.v7_relativeSplatPath));return b.useMemo(()=>Fc(t,JSON.parse(l),a,r==="path"),[t,l,a,r])}function Jx(t,e){return Yx(t,e)}function Yx(t,e,r,s){Hs()||ke(!1);let{navigator:n}=b.useContext(Nr),{matches:a}=b.useContext(Xt),l=a[a.length-1],o=l?l.params:{};l&&l.pathname;let c=l?l.pathnameBase:"/";l&&l.route;let u=Zr(),h;if(e){var d;let w=typeof e=="string"?Xr(e):e;c==="/"||(d=w.pathname)!=null&&d.startsWith(c)||ke(!1),h=w}else h=u;let m=h.pathname||"/",g=m;if(c!=="/"){let w=c.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(w.length).join("/")}let v=bx(t,{pathname:g}),y=tv(v&&v.map(w=>Object.assign({},w,{params:Object.assign({},o,w.params),pathname:yr([c,n.encodeLocation?n.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:yr([c,n.encodeLocation?n.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),a,r,s);return e&&y?b.createElement(Ui.Provider,{value:{location:Bn({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:ur.Pop}},y):y}function Qx(){let t=av(),e=qx(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),r?b.createElement("pre",{style:n},r):null,null)}const Xx=b.createElement(Qx,null);class Zx extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?b.createElement(Xt.Provider,{value:this.props.routeContext},b.createElement(vm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ev(t){let{routeContext:e,match:r,children:s}=t,n=b.useContext(Bc);return n&&n.static&&n.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=r.route.id),b.createElement(Xt.Provider,{value:e},s)}function tv(t,e,r,s){var n;if(e===void 0&&(e=[]),r===void 0&&(r=null),s===void 0&&(s=null),t==null){var a;if(!r)return null;if(r.errors)t=r.matches;else if((a=s)!=null&&a.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let l=t,o=(n=r)==null?void 0:n.errors;if(o!=null){let h=l.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);h>=0||ke(!1),l=l.slice(0,Math.min(l.length,h+1))}let c=!1,u=-1;if(r&&s&&s.v7_partialHydration)for(let h=0;h<l.length;h++){let d=l[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=h),d.route.id){let{loaderData:m,errors:g}=r,v=d.route.loader&&m[d.route.id]===void 0&&(!g||g[d.route.id]===void 0);if(d.route.lazy||v){c=!0,u>=0?l=l.slice(0,u+1):l=[l[0]];break}}}return l.reduceRight((h,d,m)=>{let g,v=!1,y=null,w=null;r&&(g=o&&d.route.id?o[d.route.id]:void 0,y=d.route.errorElement||Xx,c&&(u<0&&m===0?(lv("route-fallback"),v=!0,w=null):u===m&&(v=!0,w=d.route.hydrateFallbackElement||null)));let f=e.concat(l.slice(0,m+1)),p=()=>{let x;return g?x=y:v?x=w:d.route.Component?x=b.createElement(d.route.Component,null):d.route.element?x=d.route.element:x=h,b.createElement(ev,{match:d,routeContext:{outlet:h,matches:f,isDataRoute:r!=null},children:x})};return r&&(d.route.ErrorBoundary||d.route.errorElement||m===0)?b.createElement(Zx,{location:r.location,revalidation:r.revalidation,component:y,error:g,children:p(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):p()},null)}var bm=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(bm||{}),km=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(km||{});function rv(t){let e=b.useContext(Bc);return e||ke(!1),e}function sv(t){let e=b.useContext(Wx);return e||ke(!1),e}function nv(t){let e=b.useContext(Xt);return e||ke(!1),e}function _m(t){let e=nv(),r=e.matches[e.matches.length-1];return r.route.id||ke(!1),r.route.id}function av(){var t;let e=b.useContext(vm),r=sv(),s=_m();return e!==void 0?e:(t=r.errors)==null?void 0:t[s]}function iv(){let{router:t}=rv(bm.UseNavigateStable),e=_m(km.UseNavigateStable),r=b.useRef(!1);return ym(()=>{r.current=!0}),b.useCallback(function(n,a){a===void 0&&(a={}),r.current&&(typeof n=="number"?t.navigate(n):t.navigate(n,Bn({fromRouteId:e},a)))},[t,e])}const xd={};function lv(t,e,r){xd[t]||(xd[t]=!0)}function ov(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function xa(t){let{to:e,replace:r,state:s,relative:n}=t;Hs()||ke(!1);let{future:a,static:l}=b.useContext(Nr),{matches:o}=b.useContext(Xt),{pathname:c}=Zr(),u=Zt(),h=Fc(e,Mc(o,a.v7_relativeSplatPath),c,n==="path"),d=JSON.stringify(h);return b.useEffect(()=>u(JSON.parse(d),{replace:r,state:s,relative:n}),[u,d,n,r,s]),null}function bt(t){ke(!1)}function cv(t){let{basename:e="/",children:r=null,location:s,navigationType:n=ur.Pop,navigator:a,static:l=!1,future:o}=t;Hs()&&ke(!1);let c=e.replace(/^\/*/,"/"),u=b.useMemo(()=>({basename:c,navigator:a,static:l,future:Bn({v7_relativeSplatPath:!1},o)}),[c,o,a,l]);typeof s=="string"&&(s=Xr(s));let{pathname:h="/",search:d="",hash:m="",state:g=null,key:v="default"}=s,y=b.useMemo(()=>{let w=$c(h,c);return w==null?null:{location:{pathname:w,search:d,hash:m,state:g,key:v},navigationType:n}},[c,h,d,m,g,v,n]);return y==null?null:b.createElement(Nr.Provider,{value:u},b.createElement(Ui.Provider,{children:r,value:y}))}function uv(t){let{children:e,location:r}=t;return Jx(_o(e),r)}new Promise(()=>{});function _o(t,e){e===void 0&&(e=[]);let r=[];return b.Children.forEach(t,(s,n)=>{if(!b.isValidElement(s))return;let a=[...e,n];if(s.type===b.Fragment){r.push.apply(r,_o(s.props.children,a));return}s.type!==bt&&ke(!1),!s.props.index||!s.props.children||ke(!1);let l={id:s.props.id||a.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(l.children=_o(s.props.children,a)),r.push(l)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function jo(){return jo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},jo.apply(this,arguments)}function dv(t,e){if(t==null)return{};var r={},s=Object.keys(t),n,a;for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&(r[n]=t[n]);return r}function hv(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function fv(t,e){return t.button===0&&(!e||e==="_self")&&!hv(t)}function So(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let s=t[r];return e.concat(Array.isArray(s)?s.map(n=>[r,n]):[[r,s]])},[]))}function mv(t,e){let r=So(t);return e&&e.forEach((s,n)=>{r.has(n)||e.getAll(n).forEach(a=>{r.append(n,a)})}),r}const pv=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],gv="6";try{window.__reactRouterVersion=gv}catch{}const xv="startTransition",vd=i0[xv];function vv(t){let{basename:e,children:r,future:s,window:n}=t,a=b.useRef();a.current==null&&(a.current=vx({window:n,v5Compat:!0}));let l=a.current,[o,c]=b.useState({action:l.action,location:l.location}),{v7_startTransition:u}=s||{},h=b.useCallback(d=>{u&&vd?vd(()=>c(d)):c(d)},[c,u]);return b.useLayoutEffect(()=>l.listen(h),[l,h]),b.useEffect(()=>ov(s),[s]),b.createElement(cv,{basename:e,children:r,location:o.location,navigationType:o.action,navigator:l,future:s})}const yv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",wv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gl=b.forwardRef(function(e,r){let{onClick:s,relative:n,reloadDocument:a,replace:l,state:o,target:c,to:u,preventScrollReset:h,viewTransition:d}=e,m=dv(e,pv),{basename:g}=b.useContext(Nr),v,y=!1;if(typeof u=="string"&&wv.test(u)&&(v=u,yv))try{let x=new URL(window.location.href),k=u.startsWith("//")?new URL(x.protocol+u):new URL(u),N=$c(k.pathname,g);k.origin===x.origin&&N!=null?u=N+k.search+k.hash:y=!0}catch{}let w=Hx(u,{relative:n}),f=bv(u,{replace:l,state:o,target:c,preventScrollReset:h,relative:n,viewTransition:d});function p(x){s&&s(x),x.defaultPrevented||f(x)}return b.createElement("a",jo({},m,{href:v||w,onClick:y||a?s:p,ref:r,target:c}))});var yd;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(yd||(yd={}));var wd;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(wd||(wd={}));function bv(t,e){let{target:r,replace:s,state:n,preventScrollReset:a,relative:l,viewTransition:o}=e===void 0?{}:e,c=Zt(),u=Zr(),h=wm(t,{relative:l});return b.useCallback(d=>{if(fv(d,r)){d.preventDefault();let m=s!==void 0?s:di(u)===di(h);c(t,{replace:m,state:n,preventScrollReset:a,relative:l,viewTransition:o})}},[u,c,h,s,n,r,t,a,l,o])}function kv(t){let e=b.useRef(So(t)),r=b.useRef(!1),s=Zr(),n=b.useMemo(()=>mv(s.search,r.current?null:e.current),[s.search]),a=Zt(),l=b.useCallback((o,c)=>{const u=So(typeof o=="function"?o(n):o);r.current=!0,a("?"+u,c)},[a,n]);return[n,l]}const G=({children:t,className:e="",...r})=>i.jsx("div",{className:`bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 shadow-sm rounded-xl p-4 md:p-6 transition-colors duration-200 ${e}`,...r,children:t}),H=({children:t,className:e="",variant:r="primary",...s})=>{let n="px-6 py-2.5 rounded-lg font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed";const a={primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500 shadow-sm dark:focus:ring-offset-slate-900",secondary:"bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-200 border border-slate-300 dark:border-slate-600 hover:bg-slate-50 dark:hover:bg-slate-700 focus:ring-slate-400 dark:focus:ring-offset-slate-900",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500 dark:focus:ring-offset-slate-900"};return i.jsx("button",{className:`${n} ${a[r]} ${e}`,...s,children:t})},J=({className:t="",...e})=>i.jsx("input",{className:`w-full bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 placeholder-slate-400 dark:placeholder-slate-500 border border-slate-300 dark:border-slate-600 rounded-lg px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all ${t}`,...e}),qr=({className:t="",children:e,...r})=>i.jsx("select",{className:`w-full bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 border border-slate-300 dark:border-slate-600 rounded-lg px-4 py-2.5 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all disabled:opacity-50 disabled:cursor-not-allowed ${t}`,...r,children:e}),_v=()=>i.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col items-center justify-center bg-slate-50 dark:bg-slate-900 text-slate-800 dark:text-slate-200 transition-colors duration-200",children:[i.jsx("div",{className:"w-12 h-12 border-4 border-slate-200 dark:border-slate-700 border-t-blue-600 dark:border-t-blue-500 rounded-full animate-spin mb-6"}),i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Loading SchoolResult Pro..."}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"Please wait while we connect securely."})]});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var jv={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sv=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),z=(t,e)=>{const r=b.forwardRef(({color:s="currentColor",size:n=24,strokeWidth:a=2,absoluteStrokeWidth:l,className:o="",children:c,...u},h)=>b.createElement("svg",{ref:h,...jv,width:n,height:n,stroke:s,strokeWidth:l?Number(a)*24/Number(n):a,className:["lucide",`lucide-${Sv(t)}`,o].join(" "),...u},[...e.map(([d,m])=>b.createElement(d,m)),...Array.isArray(c)?c:[c]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bd=z("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jm=z("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const No=z("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sm=z("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nm=z("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nv=z("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ev=z("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zc=z("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kd=z("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cv=z("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fa=z("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=z("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const un=z("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pv=z("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _d=z("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eo=z("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Co=z("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qc=z("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vr=z("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tv=z("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rv=z("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ov=z("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vc=z("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=z("KeyRound",[["path",{d:"M2 18v3c0 .6.4 1 1 1h4v-3h3v-3h2l1.4-1.4a6.5 6.5 0 1 0-4-4Z",key:"167ctg"}],["circle",{cx:"16.5",cy:"7.5",r:".5",key:"1kog09"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=z("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=z("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Av=z("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iv=z("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Po=z("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Em=z("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xl=z("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cm=z("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jd=z("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lv=z("School",[["path",{d:"m4 6 8-4 8 4",key:"1q0ilc"}],["path",{d:"m18 10 4 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-8l4-2",key:"1vwozw"}],["path",{d:"M14 22v-4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v4",key:"cpkuc4"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wc=z("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uv=z("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dv=z("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sd=z("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pm=z("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tm=z("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rm=z("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $v=z("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hi=z("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mv=z("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Om=z("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=z("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fi=z("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=z("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fv=z("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Am=z("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Bv=()=>{const t=Zt(),[e,r]=b.useState(100),s=3;return i.jsxs("div",{className:"pb-20 text-slate-900 dark:text-slate-100",children:[i.jsxs("header",{className:"text-center py-16 md:py-24 max-w-4xl mx-auto",children:[i.jsx("div",{className:"inline-block px-4 py-1.5 mb-6 rounded-full bg-blue-50 dark:bg-blue-900/30 border border-blue-100 dark:border-blue-800 text-blue-700 dark:text-blue-300 text-sm font-semibold tracking-wide",children:" Professional Result Management System"}),i.jsxs("h1",{className:"text-5xl md:text-6xl font-extrabold mb-6 text-slate-900 dark:text-white tracking-tight leading-tight",children:["Manage School Results ",i.jsx("br",{}),i.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"Without Servers"})]}),i.jsx("p",{className:"text-xl text-slate-500 dark:text-slate-400 mb-10 max-w-2xl mx-auto leading-relaxed",children:"Create a branded result portal for your school or tuition center. Uses Supabase/GitHub for a zero-maintenance experience."}),i.jsxs("div",{className:"flex flex-col md:flex-row justify-center gap-4",children:[i.jsxs(H,{onClick:()=>t("/setup"),className:"text-lg px-8 py-3 shadow-blue-200 dark:shadow-none shadow-xl",children:["Start Free Portal ",i.jsx(Nm,{className:"inline ml-2 w-5 h-5"})]}),i.jsx(H,{variant:"secondary",onClick:()=>t("/login"),className:"text-lg px-8 py-3",children:"Staff Login"}),i.jsx(H,{variant:"secondary",onClick:()=>t("/result"),className:"text-lg px-8 py-3 text-slate-600 dark:text-slate-300",children:"Public Result"})]})]}),i.jsx("section",{className:"py-12",children:i.jsx(G,{className:"max-w-4xl mx-auto transform hover:shadow-lg transition-all duration-300 border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center",children:[i.jsxs("div",{children:[i.jsxs("h2",{className:"text-2xl font-bold mb-4 flex items-center gap-2 text-slate-800 dark:text-slate-100",children:[i.jsx(Cv,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})," Transparent Pricing"]}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Pay only for what you use per term. No hidden server fees."}),i.jsxs("div",{className:"mb-2 flex justify-between font-medium",children:[i.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:"Student Count:"}),i.jsx("span",{className:"font-bold text-2xl text-blue-600 dark:text-blue-400",children:e})]}),i.jsx("input",{type:"range",min:"50",max:"2000",step:"50",value:e,onChange:n=>r(Number(n.target.value)),className:"w-full h-2 bg-slate-200 dark:bg-slate-700 rounded-lg appearance-none cursor-pointer mb-8 accent-blue-600"}),i.jsxs("ul",{className:"space-y-3",children:[i.jsxs("li",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-300",children:[i.jsx(Dt,{className:"w-4 h-4 text-green-500"})," Unlimited Classes"]}),i.jsxs("li",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-300",children:[i.jsx(Dt,{className:"w-4 h-4 text-green-500"})," Free Admin Dashboard"]}),i.jsxs("li",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-300",children:[i.jsx(Dt,{className:"w-4 h-4 text-green-500"})," Lifetime Updates"]})]})]}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl p-8 text-center border border-slate-200 dark:border-slate-800",children:[i.jsx("p",{className:"text-lg text-slate-500 dark:text-slate-400 mb-2 font-medium",children:"Total Cost per Term"}),i.jsxs("div",{className:"text-5xl font-bold mb-2 text-slate-900 dark:text-white",children:["",e*s]}),i.jsxs("p",{className:"text-sm text-slate-400 mb-8",children:["@ ",s,"/student"]}),i.jsx(H,{className:"w-full mb-4",children:"Pay Now (UPI)"}),i.jsx("p",{className:"text-xs text-slate-400",children:"Secure payment via UPI QR. Send screenshot to activate Pro."})]})]})})}),i.jsx("section",{className:"py-10",children:i.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[i.jsxs(G,{className:"text-center hover:shadow-md transition-shadow",children:[i.jsx("div",{className:"w-12 h-12 bg-purple-100 dark:bg-purple-900/30 rounded-lg flex items-center justify-center mx-auto mb-4",children:i.jsx(Tv,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),i.jsx("h3",{className:"text-lg font-bold mb-2 text-slate-800 dark:text-slate-100",children:"Secure Database"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"You own your data. Database is stored in Supabase with enterprise-grade security."})]}),i.jsxs(G,{className:"text-center hover:shadow-md transition-shadow",children:[i.jsx("div",{className:"w-12 h-12 bg-pink-100 dark:bg-pink-900/30 rounded-lg flex items-center justify-center mx-auto mb-4",children:i.jsx(Rm,{className:"w-6 h-6 text-pink-600 dark:text-pink-400"})}),i.jsx("h3",{className:"text-lg font-bold mb-2 text-slate-800 dark:text-slate-100",children:"Mobile First"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"Responsive design allowing teachers to enter marks and students to check results on the go."})]}),i.jsxs(G,{className:"text-center hover:shadow-md transition-shadow",children:[i.jsx("div",{className:"w-12 h-12 bg-yellow-100 dark:bg-yellow-900/30 rounded-lg flex items-center justify-center mx-auto mb-4",children:i.jsx(Am,{className:"w-6 h-6 text-yellow-600 dark:text-yellow-400"})}),i.jsx("h3",{className:"text-lg font-bold mb-2 text-slate-800 dark:text-slate-100",children:"Instant Setup"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"Use our Setup Wizard to initialize your database and go live in less than 2 minutes."})]})]})})]})};var Ro=function(t,e){return Ro=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(r[n]=s[n])},Ro(t,e)};function Im(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Ro(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var mi=function(){return mi=Object.assign||function(e){for(var r,s=1,n=arguments.length;s<n;s++){r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},mi.apply(this,arguments)};function Ks(t,e){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(t);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(r[s[n]]=t[s[n]]);return r}function Lm(t,e,r,s){var n=arguments.length,a=n<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,r):s,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,r,s);else for(var o=t.length-1;o>=0;o--)(l=t[o])&&(a=(n<3?l(a):n>3?l(e,r,a):l(e,r))||a);return n>3&&a&&Object.defineProperty(e,r,a),a}function Um(t,e){return function(r,s){e(r,s,t)}}function Dm(t,e,r,s,n,a){function l(f){if(f!==void 0&&typeof f!="function")throw new TypeError("Function expected");return f}for(var o=s.kind,c=o==="getter"?"get":o==="setter"?"set":"value",u=!e&&t?s.static?t:t.prototype:null,h=e||(u?Object.getOwnPropertyDescriptor(u,s.name):{}),d,m=!1,g=r.length-1;g>=0;g--){var v={};for(var y in s)v[y]=y==="access"?{}:s[y];for(var y in s.access)v.access[y]=s.access[y];v.addInitializer=function(f){if(m)throw new TypeError("Cannot add initializers after decoration has completed");a.push(l(f||null))};var w=(0,r[g])(o==="accessor"?{get:h.get,set:h.set}:h[c],v);if(o==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(d=l(w.get))&&(h.get=d),(d=l(w.set))&&(h.set=d),(d=l(w.init))&&n.unshift(d)}else(d=l(w))&&(o==="field"?n.unshift(d):h[c]=d)}u&&Object.defineProperty(u,s.name,h),m=!0}function $m(t,e,r){for(var s=arguments.length>2,n=0;n<e.length;n++)r=s?e[n].call(t,r):e[n].call(t);return s?r:void 0}function Mm(t){return typeof t=="symbol"?t:"".concat(t)}function Fm(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function Bm(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function U(t,e,r,s){function n(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function o(h){try{u(s.next(h))}catch(d){l(d)}}function c(h){try{u(s.throw(h))}catch(d){l(d)}}function u(h){h.done?a(h.value):n(h.value).then(o,c)}u((s=s.apply(t,e||[])).next())})}function zm(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},s,n,a,l=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return l.next=o(0),l.throw=o(1),l.return=o(2),typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function o(u){return function(h){return c([u,h])}}function c(u){if(s)throw new TypeError("Generator is already executing.");for(;l&&(l=0,u[0]&&(r=0)),r;)try{if(s=1,n&&(a=u[0]&2?n.return:u[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,u[1])).done)return a;switch(n=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,n=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){r.label=u[1];break}if(u[0]===6&&r.label<a[1]){r.label=a[1],a=u;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(u);break}a[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(h){u=[6,h],n=0}finally{s=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var Di=Object.create?function(t,e,r,s){s===void 0&&(s=r);var n=Object.getOwnPropertyDescriptor(e,r);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,s,n)}:function(t,e,r,s){s===void 0&&(s=r),t[s]=e[r]};function qm(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Di(e,t,r)}function pi(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],s=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Hc(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var s=r.call(t),n,a=[],l;try{for(;(e===void 0||e-- >0)&&!(n=s.next()).done;)a.push(n.value)}catch(o){l={error:o}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(l)throw l.error}}return a}function Vm(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Hc(arguments[e]));return t}function Wm(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var s=Array(t),n=0,e=0;e<r;e++)for(var a=arguments[e],l=0,o=a.length;l<o;l++,n++)s[n]=a[l];return s}function Hm(t,e,r){if(r||arguments.length===2)for(var s=0,n=e.length,a;s<n;s++)(a||!(s in e))&&(a||(a=Array.prototype.slice.call(e,0,s)),a[s]=e[s]);return t.concat(a||Array.prototype.slice.call(e))}function zs(t){return this instanceof zs?(this.v=t,this):new zs(t)}function Km(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=r.apply(t,e||[]),n,a=[];return n=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",l),n[Symbol.asyncIterator]=function(){return this},n;function l(g){return function(v){return Promise.resolve(v).then(g,d)}}function o(g,v){s[g]&&(n[g]=function(y){return new Promise(function(w,f){a.push([g,y,w,f])>1||c(g,y)})},v&&(n[g]=v(n[g])))}function c(g,v){try{u(s[g](v))}catch(y){m(a[0][3],y)}}function u(g){g.value instanceof zs?Promise.resolve(g.value.v).then(h,d):m(a[0][2],g)}function h(g){c("next",g)}function d(g){c("throw",g)}function m(g,v){g(v),a.shift(),a.length&&c(a[0][0],a[0][1])}}function Gm(t){var e,r;return e={},s("next"),s("throw",function(n){throw n}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(n,a){e[n]=t[n]?function(l){return(r=!r)?{value:zs(t[n](l)),done:!1}:a?a(l):l}:a}}function Jm(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof pi=="function"?pi(t):t[Symbol.iterator](),r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r);function s(a){r[a]=t[a]&&function(l){return new Promise(function(o,c){l=t[a](l),n(o,c,l.done,l.value)})}}function n(a,l,o,c){Promise.resolve(c).then(function(u){a({value:u,done:o})},l)}}function Ym(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var zv=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},Oo=function(t){return Oo=Object.getOwnPropertyNames||function(e){var r=[];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[r.length]=s);return r},Oo(t)};function Qm(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=Oo(t),s=0;s<r.length;s++)r[s]!=="default"&&Di(e,t,r[s]);return zv(e,t),e}function Xm(t){return t&&t.__esModule?t:{default:t}}function Zm(t,e,r,s){if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?s:r==="a"?s.call(t):s?s.value:e.get(t)}function ep(t,e,r,s,n){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?n.call(t,r):n?n.value=r:e.set(t,r),r}function tp(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function rp(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var s,n;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");s=e[Symbol.asyncDispose]}if(s===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");s=e[Symbol.dispose],r&&(n=s)}if(typeof s!="function")throw new TypeError("Object not disposable.");n&&(s=function(){try{n.call(this)}catch(a){return Promise.reject(a)}}),t.stack.push({value:e,dispose:s,async:r})}else r&&t.stack.push({async:!0});return e}var qv=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var s=new Error(r);return s.name="SuppressedError",s.error=t,s.suppressed=e,s};function sp(t){function e(a){t.error=t.hasError?new qv(a,t.error,"An error was suppressed during disposal."):a,t.hasError=!0}var r,s=0;function n(){for(;r=t.stack.pop();)try{if(!r.async&&s===1)return s=0,t.stack.push(r),Promise.resolve().then(n);if(r.dispose){var a=r.dispose.call(r.value);if(r.async)return s|=2,Promise.resolve(a).then(n,function(l){return e(l),n()})}else s|=1}catch(l){e(l)}if(s===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return n()}function np(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,s,n,a,l){return s?e?".jsx":".js":n&&(!a||!l)?r:n+a+"."+l.toLowerCase()+"js"}):t}const Vv={__extends:Im,__assign:mi,__rest:Ks,__decorate:Lm,__param:Um,__esDecorate:Dm,__runInitializers:$m,__propKey:Mm,__setFunctionName:Fm,__metadata:Bm,__awaiter:U,__generator:zm,__createBinding:Di,__exportStar:qm,__values:pi,__read:Hc,__spread:Vm,__spreadArrays:Wm,__spreadArray:Hm,__await:zs,__asyncGenerator:Km,__asyncDelegator:Gm,__asyncValues:Jm,__makeTemplateObject:Ym,__importStar:Qm,__importDefault:Xm,__classPrivateFieldGet:Zm,__classPrivateFieldSet:ep,__classPrivateFieldIn:tp,__addDisposableResource:rp,__disposeResources:sp,__rewriteRelativeImportExtension:np},Wv=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:rp,get __assign(){return mi},__asyncDelegator:Gm,__asyncGenerator:Km,__asyncValues:Jm,__await:zs,__awaiter:U,__classPrivateFieldGet:Zm,__classPrivateFieldIn:tp,__classPrivateFieldSet:ep,__createBinding:Di,__decorate:Lm,__disposeResources:sp,__esDecorate:Dm,__exportStar:qm,__extends:Im,__generator:zm,__importDefault:Xm,__importStar:Qm,__makeTemplateObject:Ym,__metadata:Bm,__param:Um,__propKey:Mm,__read:Hc,__rest:Ks,__rewriteRelativeImportExtension:np,__runInitializers:$m,__setFunctionName:Fm,__spread:Vm,__spreadArray:Hm,__spreadArrays:Wm,__values:pi,default:Vv},Symbol.toStringTag,{value:"Module"})),Hv=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class Kc extends Error{constructor(e,r="FunctionsError",s){super(e),this.name=r,this.context=s}}class Kv extends Kc{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Nd extends Kc{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Ed extends Kc{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Ao;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Ao||(Ao={}));class Gv{constructor(e,{headers:r={},customFetch:s,region:n=Ao.Any}={}){this.url=e,this.headers=r,this.region=n,this.fetch=Hv(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return U(this,arguments,void 0,function*(r,s={}){var n;let a,l;try{const{headers:o,method:c,body:u,signal:h,timeout:d}=s;let m={},{region:g}=s;g||(g=this.region);const v=new URL(`${this.url}/${r}`);g&&g!=="any"&&(m["x-region"]=g,v.searchParams.set("forceFunctionRegion",g));let y;u&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",y=u):typeof u=="string"?(m["Content-Type"]="text/plain",y=u):typeof FormData<"u"&&u instanceof FormData?y=u:(m["Content-Type"]="application/json",y=JSON.stringify(u)):y=u;let w=h;d&&(l=new AbortController,a=setTimeout(()=>l.abort(),d),h?(w=l.signal,h.addEventListener("abort",()=>l.abort())):w=l.signal);const f=yield this.fetch(v.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),o),body:y,signal:w}).catch(N=>{throw new Kv(N)}),p=f.headers.get("x-relay-error");if(p&&p==="true")throw new Nd(f);if(!f.ok)throw new Ed(f);let x=((n=f.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),k;return x==="application/json"?k=yield f.json():x==="application/octet-stream"||x==="application/pdf"?k=yield f.blob():x==="text/event-stream"?k=f:x==="multipart/form-data"?k=yield f.formData():k=yield f.text(),{data:k,error:null,response:f}}catch(o){return{data:null,error:o,response:o instanceof Ed||o instanceof Nd?o.context:void 0}}finally{a&&clearTimeout(a)}})}}var qe={};const Gs=Vp(Wv);var va={},ya={},wa={},ba={},ka={},_a={},Cd;function ap(){if(Cd)return _a;Cd=1,Object.defineProperty(_a,"__esModule",{value:!0});class t extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return _a.default=t,_a}var Pd;function ip(){if(Pd)return ka;Pd=1,Object.defineProperty(ka,"__esModule",{value:!0});const e=Gs.__importDefault(ap());class r{constructor(n){var a,l;this.shouldThrowOnError=!1,this.method=n.method,this.url=n.url,this.headers=new Headers(n.headers),this.schema=n.schema,this.body=n.body,this.shouldThrowOnError=(a=n.shouldThrowOnError)!==null&&a!==void 0?a:!1,this.signal=n.signal,this.isMaybeSingle=(l=n.isMaybeSingle)!==null&&l!==void 0?l:!1,n.fetch?this.fetch=n.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(n,a){return this.headers=new Headers(this.headers),this.headers.set(n,a),this}then(n,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const l=this.fetch;let o=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var u,h,d,m;let g=null,v=null,y=null,w=c.status,f=c.statusText;if(c.ok){if(this.method!=="HEAD"){const N=await c.text();N===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((u=this.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?v=N:v=JSON.parse(N))}const x=(h=this.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),k=(d=c.headers.get("content-range"))===null||d===void 0?void 0:d.split("/");x&&k&&k.length>1&&(y=parseInt(k[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(v)&&(v.length>1?(g={code:"PGRST116",details:`Results contain ${v.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},v=null,y=null,w=406,f="Not Acceptable"):v.length===1?v=v[0]:v=null)}else{const x=await c.text();try{g=JSON.parse(x),Array.isArray(g)&&c.status===404&&(v=[],g=null,w=200,f="OK")}catch{c.status===404&&x===""?(w=204,f="No Content"):g={message:x}}if(g&&this.isMaybeSingle&&(!((m=g==null?void 0:g.details)===null||m===void 0)&&m.includes("0 rows"))&&(g=null,w=200,f="OK"),g&&this.shouldThrowOnError)throw new e.default(g)}return{error:g,data:v,count:y,status:w,statusText:f}});return this.shouldThrowOnError||(o=o.catch(c=>{var u,h,d,m,g,v;let y="";const w=c==null?void 0:c.cause;if(w){const f=(u=w==null?void 0:w.message)!==null&&u!==void 0?u:"",p=(h=w==null?void 0:w.code)!==null&&h!==void 0?h:"";y=`${(d=c==null?void 0:c.name)!==null&&d!==void 0?d:"FetchError"}: ${c==null?void 0:c.message}`,y+=`

Caused by: ${(m=w==null?void 0:w.name)!==null&&m!==void 0?m:"Error"}: ${f}`,p&&(y+=` (${p})`),w!=null&&w.stack&&(y+=`
${w.stack}`)}else y=(g=c==null?void 0:c.stack)!==null&&g!==void 0?g:"";return{error:{message:`${(v=c==null?void 0:c.name)!==null&&v!==void 0?v:"FetchError"}: ${c==null?void 0:c.message}`,details:y,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),o.then(n,a)}returns(){return this}overrideTypes(){return this}}return ka.default=r,ka}var Td;function lp(){if(Td)return ba;Td=1,Object.defineProperty(ba,"__esModule",{value:!0});const e=Gs.__importDefault(ip());class r extends e.default{select(n){let a=!1;const l=(n??"*").split("").map(o=>/\s/.test(o)&&!a?"":(o==='"'&&(a=!a),o)).join("");return this.url.searchParams.set("select",l),this.headers.append("Prefer","return=representation"),this}order(n,{ascending:a=!0,nullsFirst:l,foreignTable:o,referencedTable:c=o}={}){const u=c?`${c}.order`:"order",h=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${h?`${h},`:""}${n}.${a?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(n,{foreignTable:a,referencedTable:l=a}={}){const o=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(o,`${n}`),this}range(n,a,{foreignTable:l,referencedTable:o=l}={}){const c=typeof o>"u"?"offset":`${o}.offset`,u=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(c,`${n}`),this.url.searchParams.set(u,`${a-n+1}`),this}abortSignal(n){return this.signal=n,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:n=!1,verbose:a=!1,settings:l=!1,buffers:o=!1,wal:c=!1,format:u="text"}={}){var h;const d=[n?"analyze":null,a?"verbose":null,l?"settings":null,o?"buffers":null,c?"wal":null].filter(Boolean).join("|"),m=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${m}"; options=${d};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(n){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${n}`),this}}return ba.default=r,ba}var Rd;function Gc(){if(Rd)return wa;Rd=1,Object.defineProperty(wa,"__esModule",{value:!0});const e=Gs.__importDefault(lp()),r=new RegExp("[,()]");class s extends e.default{eq(a,l){return this.url.searchParams.append(a,`eq.${l}`),this}neq(a,l){return this.url.searchParams.append(a,`neq.${l}`),this}gt(a,l){return this.url.searchParams.append(a,`gt.${l}`),this}gte(a,l){return this.url.searchParams.append(a,`gte.${l}`),this}lt(a,l){return this.url.searchParams.append(a,`lt.${l}`),this}lte(a,l){return this.url.searchParams.append(a,`lte.${l}`),this}like(a,l){return this.url.searchParams.append(a,`like.${l}`),this}likeAllOf(a,l){return this.url.searchParams.append(a,`like(all).{${l.join(",")}}`),this}likeAnyOf(a,l){return this.url.searchParams.append(a,`like(any).{${l.join(",")}}`),this}ilike(a,l){return this.url.searchParams.append(a,`ilike.${l}`),this}ilikeAllOf(a,l){return this.url.searchParams.append(a,`ilike(all).{${l.join(",")}}`),this}ilikeAnyOf(a,l){return this.url.searchParams.append(a,`ilike(any).{${l.join(",")}}`),this}regexMatch(a,l){return this.url.searchParams.append(a,`match.${l}`),this}regexIMatch(a,l){return this.url.searchParams.append(a,`imatch.${l}`),this}is(a,l){return this.url.searchParams.append(a,`is.${l}`),this}isDistinct(a,l){return this.url.searchParams.append(a,`isdistinct.${l}`),this}in(a,l){const o=Array.from(new Set(l)).map(c=>typeof c=="string"&&r.test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(a,`in.(${o})`),this}contains(a,l){return typeof l=="string"?this.url.searchParams.append(a,`cs.${l}`):Array.isArray(l)?this.url.searchParams.append(a,`cs.{${l.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(l)}`),this}containedBy(a,l){return typeof l=="string"?this.url.searchParams.append(a,`cd.${l}`):Array.isArray(l)?this.url.searchParams.append(a,`cd.{${l.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(l)}`),this}rangeGt(a,l){return this.url.searchParams.append(a,`sr.${l}`),this}rangeGte(a,l){return this.url.searchParams.append(a,`nxl.${l}`),this}rangeLt(a,l){return this.url.searchParams.append(a,`sl.${l}`),this}rangeLte(a,l){return this.url.searchParams.append(a,`nxr.${l}`),this}rangeAdjacent(a,l){return this.url.searchParams.append(a,`adj.${l}`),this}overlaps(a,l){return typeof l=="string"?this.url.searchParams.append(a,`ov.${l}`):this.url.searchParams.append(a,`ov.{${l.join(",")}}`),this}textSearch(a,l,{config:o,type:c}={}){let u="";c==="plain"?u="pl":c==="phrase"?u="ph":c==="websearch"&&(u="w");const h=o===void 0?"":`(${o})`;return this.url.searchParams.append(a,`${u}fts${h}.${l}`),this}match(a){return Object.entries(a).forEach(([l,o])=>{this.url.searchParams.append(l,`eq.${o}`)}),this}not(a,l,o){return this.url.searchParams.append(a,`not.${l}.${o}`),this}or(a,{foreignTable:l,referencedTable:o=l}={}){const c=o?`${o}.or`:"or";return this.url.searchParams.append(c,`(${a})`),this}filter(a,l,o){return this.url.searchParams.append(a,`${l}.${o}`),this}}return wa.default=s,wa}var Od;function op(){if(Od)return ya;Od=1,Object.defineProperty(ya,"__esModule",{value:!0});const e=Gs.__importDefault(Gc());class r{constructor(n,{headers:a={},schema:l,fetch:o}){this.url=n,this.headers=new Headers(a),this.schema=l,this.fetch=o}select(n,a){const{head:l=!1,count:o}=a??{},c=l?"HEAD":"GET";let u=!1;const h=(n??"*").split("").map(d=>/\s/.test(d)&&!u?"":(d==='"'&&(u=!u),d)).join("");return this.url.searchParams.set("select",h),o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(n,{count:a,defaultToNull:l=!0}={}){var o;const c="POST";if(a&&this.headers.append("Prefer",`count=${a}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(n)){const u=n.reduce((h,d)=>h.concat(Object.keys(d)),[]);if(u.length>0){const h=[...new Set(u)].map(d=>`"${d}"`);this.url.searchParams.set("columns",h.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}upsert(n,{onConflict:a,ignoreDuplicates:l=!1,count:o,defaultToNull:c=!0}={}){var u;const h="POST";if(this.headers.append("Prefer",`resolution=${l?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),o&&this.headers.append("Prefer",`count=${o}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(n)){const d=n.reduce((m,g)=>m.concat(Object.keys(g)),[]);if(d.length>0){const m=[...new Set(d)].map(g=>`"${g}"`);this.url.searchParams.set("columns",m.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(n,{count:a}={}){var l;const o="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}delete({count:n}={}){var a;const l="DELETE";return n&&this.headers.append("Prefer",`count=${n}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}}return ya.default=r,ya}var Ad;function Jv(){if(Ad)return va;Ad=1,Object.defineProperty(va,"__esModule",{value:!0});const t=Gs,e=t.__importDefault(op()),r=t.__importDefault(Gc());class s{constructor(a,{headers:l={},schema:o,fetch:c}={}){this.url=a,this.headers=new Headers(l),this.schemaName=o,this.fetch=c}from(a){if(!a||typeof a!="string"||a.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const l=new URL(`${this.url}/${a}`);return new e.default(l,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new s(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,l={},{head:o=!1,get:c=!1,count:u}={}){var h;let d;const m=new URL(`${this.url}/rpc/${a}`);let g;o||c?(d=o?"HEAD":"GET",Object.entries(l).filter(([y,w])=>w!==void 0).map(([y,w])=>[y,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([y,w])=>{m.searchParams.append(y,w)})):(d="POST",g=l);const v=new Headers(this.headers);return u&&v.set("Prefer",`count=${u}`),new r.default({method:d,url:m,headers:v,schema:this.schemaName,body:g,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}}return va.default=s,va}Object.defineProperty(qe,"__esModule",{value:!0});var cp=qe.PostgrestError=yp=qe.PostgrestBuilder=xp=qe.PostgrestTransformBuilder=pp=qe.PostgrestFilterBuilder=fp=qe.PostgrestQueryBuilder=dp=qe.PostgrestClient=void 0;const Js=Gs,up=Js.__importDefault(Jv());var dp=qe.PostgrestClient=up.default;const hp=Js.__importDefault(op());var fp=qe.PostgrestQueryBuilder=hp.default;const mp=Js.__importDefault(Gc());var pp=qe.PostgrestFilterBuilder=mp.default;const gp=Js.__importDefault(lp());var xp=qe.PostgrestTransformBuilder=gp.default;const vp=Js.__importDefault(ip());var yp=qe.PostgrestBuilder=vp.default;const wp=Js.__importDefault(ap());cp=qe.PostgrestError=wp.default;var bp=qe.default={PostgrestClient:up.default,PostgrestQueryBuilder:hp.default,PostgrestFilterBuilder:mp.default,PostgrestTransformBuilder:gp.default,PostgrestBuilder:vp.default,PostgrestError:wp.default};const Yv=eh({__proto__:null,get PostgrestBuilder(){return yp},get PostgrestClient(){return dp},get PostgrestError(){return cp},get PostgrestFilterBuilder(){return pp},get PostgrestQueryBuilder(){return fp},get PostgrestTransformBuilder(){return xp},default:bp},[qe]),{PostgrestClient:Qv,PostgrestQueryBuilder:Ob,PostgrestFilterBuilder:Ab,PostgrestTransformBuilder:Ib,PostgrestBuilder:Lb,PostgrestError:Ub}=bp||Yv;class Xv{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const s=r.node,n=parseInt(s.replace(/^v/,"").split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const s=this.getWebSocketConstructor();return new s(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Zv="2.86.0",ey=`realtime-js/${Zv}`,kp="1.0.0",ty="2.0.0",Id=kp,Io=1e4,ry=1e3,sy=100;var Ir;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Ir||(Ir={}));var Se;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Se||(Se={}));var Nt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Nt||(Nt={}));var Lo;(function(t){t.websocket="websocket"})(Lo||(Lo={}));var Lr;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Lr||(Lr={}));class ny{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,r){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(e));let s=[e.join_ref,e.ref,e.topic,e.event,e.payload];return r(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(e){var r;return this._isArrayBuffer((r=e.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var r,s;const n=(s=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&s!==void 0?s:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,n)}_encodeJsonUserBroadcastPush(e){var r,s;const n=(s=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&s!==void 0?s:{},l=new TextEncoder().encode(JSON.stringify(n)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,l)}_encodeUserBroadcastPush(e,r,s){var n,a;const l=e.topic,o=(n=e.ref)!==null&&n!==void 0?n:"",c=(a=e.join_ref)!==null&&a!==void 0?a:"",u=e.payload.event,h=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},d=Object.keys(h).length===0?"":JSON.stringify(h);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`ref length ${o.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`topic length ${l.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`metadata length ${d.length} exceeds maximum of 255`);const m=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+o.length+l.length+u.length+d.length,g=new ArrayBuffer(this.HEADER_LENGTH+m);let v=new DataView(g),y=0;v.setUint8(y++,this.KINDS.userBroadcastPush),v.setUint8(y++,c.length),v.setUint8(y++,o.length),v.setUint8(y++,l.length),v.setUint8(y++,u.length),v.setUint8(y++,d.length),v.setUint8(y++,r),Array.from(c,f=>v.setUint8(y++,f.charCodeAt(0))),Array.from(o,f=>v.setUint8(y++,f.charCodeAt(0))),Array.from(l,f=>v.setUint8(y++,f.charCodeAt(0))),Array.from(u,f=>v.setUint8(y++,f.charCodeAt(0))),Array.from(d,f=>v.setUint8(y++,f.charCodeAt(0)));var w=new Uint8Array(g.byteLength+s.byteLength);return w.set(new Uint8Array(g),0),w.set(new Uint8Array(s),g.byteLength),w.buffer}decode(e,r){if(this._isArrayBuffer(e)){let s=this._binaryDecode(e);return r(s)}if(typeof e=="string"){const s=JSON.parse(e),[n,a,l,o,c]=s;return r({join_ref:n,ref:a,topic:l,event:o,payload:c})}return r({})}_binaryDecode(e){const r=new DataView(e),s=r.getUint8(0),n=new TextDecoder;switch(s){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,r,n)}}_decodeUserBroadcast(e,r,s){const n=r.getUint8(1),a=r.getUint8(2),l=r.getUint8(3),o=r.getUint8(4);let c=this.HEADER_LENGTH+4;const u=s.decode(e.slice(c,c+n));c=c+n;const h=s.decode(e.slice(c,c+a));c=c+a;const d=s.decode(e.slice(c,c+l));c=c+l;const m=e.slice(c,e.byteLength),g=o===this.JSON_ENCODING?JSON.parse(s.decode(m)):m,v={type:this.BROADCAST_EVENT,event:h,payload:g};return l>0&&(v.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:v}}_isArrayBuffer(e){var r;return e instanceof ArrayBuffer||((r=e==null?void 0:e.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(e,r){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([s])=>r.includes(s)))}}class _p{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ie;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(ie||(ie={}));const Ld=(t,e,r={})=>{var s;const n=(s=r.skipTypes)!==null&&s!==void 0?s:[];return e?Object.keys(e).reduce((a,l)=>(a[l]=ay(l,t,e,n),a),{}):{}},ay=(t,e,r,s)=>{const n=e.find(o=>o.name===t),a=n==null?void 0:n.type,l=r[t];return a&&!s.includes(a)?jp(a,l):Uo(l)},jp=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return cy(e,r)}switch(t){case ie.bool:return iy(e);case ie.float4:case ie.float8:case ie.int2:case ie.int4:case ie.int8:case ie.numeric:case ie.oid:return ly(e);case ie.json:case ie.jsonb:return oy(e);case ie.timestamp:return uy(e);case ie.abstime:case ie.date:case ie.daterange:case ie.int4range:case ie.int8range:case ie.money:case ie.reltime:case ie.text:case ie.time:case ie.timestamptz:case ie.timetz:case ie.tsrange:case ie.tstzrange:return Uo(e);default:return Uo(e)}},Uo=t=>t,iy=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},ly=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},oy=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},cy=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,s=t[r];if(t[0]==="{"&&s==="}"){let a;const l=t.slice(1,r);try{a=JSON.parse("["+l+"]")}catch{a=l?l.split(","):[]}return a.map(o=>jp(e,o))}return t},uy=t=>typeof t=="string"?t.replace(" ","T"):t,Sp=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class vl{constructor(e,r,s={},n=Io){this.channel=e,this.event=r,this.payload=s,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var s;return this._hasReceived(e)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Ud;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Ud||(Ud={}));class bn{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},n=>{const{onJoin:a,onLeave:l,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=bn.syncState(this.state,n,a,l),this.pendingDiffs.forEach(c=>{this.state=bn.syncDiff(this.state,c,a,l)}),this.pendingDiffs=[],o()}),this.channel._on(s.diff,{},n=>{const{onJoin:a,onLeave:l,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=bn.syncDiff(this.state,n,a,l),o())}),this.onJoin((n,a,l)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:a,newPresences:l})}),this.onLeave((n,a,l)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:a,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,s,n){const a=this.cloneDeep(e),l=this.transformState(r),o={},c={};return this.map(a,(u,h)=>{l[u]||(c[u]=h)}),this.map(l,(u,h)=>{const d=a[u];if(d){const m=h.map(w=>w.presence_ref),g=d.map(w=>w.presence_ref),v=h.filter(w=>g.indexOf(w.presence_ref)<0),y=d.filter(w=>m.indexOf(w.presence_ref)<0);v.length>0&&(o[u]=v),y.length>0&&(c[u]=y)}else o[u]=h}),this.syncDiff(a,{joins:o,leaves:c},s,n)}static syncDiff(e,r,s,n){const{joins:a,leaves:l}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),n||(n=()=>{}),this.map(a,(o,c)=>{var u;const h=(u=e[o])!==null&&u!==void 0?u:[];if(e[o]=this.cloneDeep(c),h.length>0){const d=e[o].map(g=>g.presence_ref),m=h.filter(g=>d.indexOf(g.presence_ref)<0);e[o].unshift(...m)}s(o,h,c)}),this.map(l,(o,c)=>{let u=e[o];if(!u)return;const h=c.map(d=>d.presence_ref);u=u.filter(d=>h.indexOf(d.presence_ref)<0),e[o]=u,n(o,u,c),u.length===0&&delete e[o]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(s=>r(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,s)=>{const n=e[s];return"metas"in n?r[s]=n.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[s]=n,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Dd;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Dd||(Dd={}));var kn;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(kn||(kn={}));var Bt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Bt||(Bt={}));class Jc{constructor(e,r={config:{}},s){var n,a;if(this.topic=e,this.params=r,this.socket=s,this.bindings={},this.state=Se.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new vl(this,Nt.join,this.params,this.timeout),this.rejoinTimer=new _p(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Se.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Se.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Se.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Se.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Se.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Nt.reply,{},(l,o)=>{this._trigger(this._replyEventName(o),l)}),this.presence=new bn(this),this.broadcastEndpointURL=Sp(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(n=this.params.config)===null||n===void 0?void 0:n.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var s,n,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Se.closed){const{config:{broadcast:l,presence:o,private:c}}=this.params,u=(n=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(g=>g.filter))!==null&&n!==void 0?n:[],h=!!this.bindings[kn.PRESENCE]&&this.bindings[kn.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,d={},m={broadcast:l,presence:Object.assign(Object.assign({},o),{enabled:h}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(g=>e==null?void 0:e(Bt.CHANNEL_ERROR,g)),this._onClose(()=>e==null?void 0:e(Bt.CLOSED)),this.updateJoinPayload(Object.assign({config:m},d)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:g})=>{var v;if(this.socket.setAuth(),g===void 0){e==null||e(Bt.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,w=(v=y==null?void 0:y.length)!==null&&v!==void 0?v:0,f=[];for(let p=0;p<w;p++){const x=y[p],{filter:{event:k,schema:N,table:j,filter:S}}=x,T=g&&g[p];if(T&&T.event===k&&T.schema===N&&T.table===j&&T.filter===S)f.push(Object.assign(Object.assign({},x),{id:T.id}));else{this.unsubscribe(),this.state=Se.errored,e==null||e(Bt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=f,e&&e(Bt.SUBSCRIBED);return}}).receive("error",g=>{this.state=Se.errored,e==null||e(Bt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Bt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,s){return this.state===Se.joined&&e===kn.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,s)}async httpSend(e,r,s={}){var n;const a=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const l={method:"POST",headers:{Authorization:a,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},o=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=s.timeout)!==null&&n!==void 0?n:this.timeout);if(o.status===202)return{success:!0};let c=o.statusText;try{const u=await o.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(e,r={}){var s,n;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:l}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:l,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((n=u.body)===null||n===void 0?void 0:n.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var l,o,c;const u=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(o=(l=this.params)===null||l===void 0?void 0:l.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Se.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Nt.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(n=>{s=new vl(this,Nt.leave,{},e),s.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Se.closed,this.bindings={}}async _fetchWithTimeout(e,r,s){const n=new AbortController,a=setTimeout(()=>n.abort(),s),l=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:n.signal}));return clearTimeout(a),l}_push(e,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new vl(this,e,r,s);return this._canPush()?n.send():this._addToPushBuffer(n),n}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>sy){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,s){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,s){var n,a;const l=e.toLocaleLowerCase(),{close:o,error:c,leave:u,join:h}=Nt;if(s&&[o,c,u,h].indexOf(l)>=0&&s!==this._joinRef())return;let m=this._onMessage(l,r,s);if(r&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(g=>{var v,y,w;return((v=g.filter)===null||v===void 0?void 0:v.event)==="*"||((w=(y=g.filter)===null||y===void 0?void 0:y.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===l}).map(g=>g.callback(m,s)):(a=this.bindings[l])===null||a===void 0||a.filter(g=>{var v,y,w,f,p,x;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in g){const k=g.id,N=(v=g.filter)===null||v===void 0?void 0:v.event;return k&&((y=r.ids)===null||y===void 0?void 0:y.includes(k))&&(N==="*"||(N==null?void 0:N.toLocaleLowerCase())===((w=r.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const k=(p=(f=g==null?void 0:g.filter)===null||f===void 0?void 0:f.event)===null||p===void 0?void 0:p.toLocaleLowerCase();return k==="*"||k===((x=r==null?void 0:r.event)===null||x===void 0?void 0:x.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===l}).map(g=>{if(typeof m=="object"&&"ids"in m){const v=m.data,{schema:y,table:w,commit_timestamp:f,type:p,errors:x}=v;m=Object.assign(Object.assign({},{schema:y,table:w,commit_timestamp:f,eventType:p,new:{},old:{},errors:x}),this._getPayloadRecords(v))}g.callback(m,s)})}_isClosed(){return this.state===Se.closed}_isJoined(){return this.state===Se.joined}_isJoining(){return this.state===Se.joining}_isLeaving(){return this.state===Se.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,s){const n=e.toLocaleLowerCase(),a={type:n,filter:r,callback:s};return this.bindings[n]?this.bindings[n].push(a):this.bindings[n]=[a],this}_off(e,r){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(n=>{var a;return!(((a=n.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===s&&Jc.isEqual(n.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const s in e)if(e[s]!==r[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Nt.close,{},e)}_onError(e){this._on(Nt.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Se.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=Ld(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=Ld(e.columns,e.old_record)),r}}const yl=()=>{},ja={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},dy=[1e3,2e3,5e3,1e4],hy=1e4,fy=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class my{constructor(e,r){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Io,this.transport=null,this.heartbeatIntervalMs=ja.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=yl,this.ref=0,this.reconnectTimer=null,this.vsn=Id,this.logger=yl,this.conn=null,this.sendBuffer=[],this.serializer=new ny,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=n=>n?(...a)=>n(...a):(...a)=>fetch(...a),!(!((s=r==null?void 0:r.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${Lo.websocket}`,this.httpEndpoint=Sp(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Xv.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,s){this.logger(e,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Ir.connecting:return Lr.Connecting;case Ir.open:return Lr.Open;case Ir.closing:return Lr.Closing;default:return Lr.Closed}}isConnected(){return this.connectionState()===Lr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const s=`realtime:${e}`,n=this.getChannels().find(a=>a.topic===s);if(n)return n;{const a=new Jc(`realtime:${e}`,r,this);return this.channels.push(a),a}}push(e){const{topic:r,event:s,payload:n,ref:a}=e,l=()=>{this.encode(e,o=>{var c;(c=this.conn)===null||c===void 0||c.send(o)})};this.log("push",`${r} ${s} (${a})`,n),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(ry,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},ja.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:n,payload:a,ref:l}=r,o=l?`(${l})`:"",c=a.status||"";this.log("receive",`${c} ${s} ${n} ${o}`.trim(),a),this.channels.filter(u=>u._isMember(s)).forEach(u=>u._trigger(n,a,l)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ir.open||this.conn.readyState===Ir.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Nt.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const s=e.match(/\?/)?"&":"?",n=new URLSearchParams(r);return`${e}${s}${n}`}_workerObjectUrl(e){let r;if(e)r=e;else{const s=new Blob([fy],{type:"application/javascript"});r=URL.createObjectURL(s)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const n={access_token:r,version:ey};r&&s.updateJoinPayload(n),s.joinedOnce&&s._isJoined()&&s._push(Nt.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(r)}catch(n){this.log("error",`error in ${e} callback`,n)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new _p(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ja.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,s,n,a,l,o,c,u,h,d,m,g;switch(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(s=e==null?void 0:e.timeout)!==null&&s!==void 0?s:Io,this.heartbeatIntervalMs=(n=e==null?void 0:e.heartbeatIntervalMs)!==null&&n!==void 0?n:ja.HEARTBEAT_INTERVAL,this.worker=(a=e==null?void 0:e.worker)!==null&&a!==void 0?a:!1,this.accessToken=(l=e==null?void 0:e.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(o=e==null?void 0:e.heartbeatCallback)!==null&&o!==void 0?o:yl,this.vsn=(c=e==null?void 0:e.vsn)!==null&&c!==void 0?c:Id,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=e==null?void 0:e.reconnectAfterMs)!==null&&u!==void 0?u:v=>dy[v-1]||hy,this.vsn){case kp:this.encode=(h=e==null?void 0:e.encode)!==null&&h!==void 0?h:(v,y)=>y(JSON.stringify(v)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:(v,y)=>y(JSON.parse(v));break;case ty:this.encode=(m=e==null?void 0:e.encode)!==null&&m!==void 0?m:this.serializer.encode.bind(this.serializer),this.decode=(g=e==null?void 0:e.decode)!==null&&g!==void 0?g:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class $i extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function pe(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class py extends $i{constructor(e,r,s){super(e),this.name="StorageApiError",this.status=r,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Do extends $i{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}const Yc=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),gy=()=>Response,$o=t=>{if(Array.isArray(t))return t.map(r=>$o(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,s])=>{const n=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[n]=$o(s)}),e},xy=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},vy=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t),wl=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},yy=(t,e,r)=>U(void 0,void 0,void 0,function*(){const s=yield gy();t instanceof s&&!(r!=null&&r.noResolveJson)?t.json().then(n=>{const a=t.status||500,l=(n==null?void 0:n.statusCode)||a+"";e(new py(wl(n),a,l))}).catch(n=>{e(new Do(wl(n),n))}):e(new Do(wl(t),t))}),wy=(t,e,r,s)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!s?n:(xy(s)?(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n.body=JSON.stringify(s)):n.body=s,e!=null&&e.duplex&&(n.duplex=e.duplex),Object.assign(Object.assign({},n),r))};function Qn(t,e,r,s,n,a){return U(this,void 0,void 0,function*(){return new Promise((l,o)=>{t(r,wy(e,s,n,a)).then(c=>{if(!c.ok)throw c;return s!=null&&s.noResolveJson?c:c.json()}).then(c=>l(c)).catch(c=>yy(c,o,s))})})}function zn(t,e,r,s){return U(this,void 0,void 0,function*(){return Qn(t,"GET",e,r,s)})}function jt(t,e,r,s,n){return U(this,void 0,void 0,function*(){return Qn(t,"POST",e,s,n,r)})}function Mo(t,e,r,s,n){return U(this,void 0,void 0,function*(){return Qn(t,"PUT",e,s,n,r)})}function by(t,e,r,s){return U(this,void 0,void 0,function*(){return Qn(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),s)})}function Qc(t,e,r,s,n){return U(this,void 0,void 0,function*(){return Qn(t,"DELETE",e,s,n,r)})}class ky{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}then(e,r){return this.execute().then(e,r)}execute(){return U(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(pe(e))return{data:null,error:e};throw e}})}}var Np;class _y{constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r,this[Np]="BlobDownloadBuilder",this.promise=null}asStream(){return new ky(this.downloadFn,this.shouldThrowOnError)}then(e,r){return this.getPromise().then(e,r)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return U(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(pe(e))return{data:null,error:e};throw e}})}}Np=Symbol.toStringTag;const jy={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},$d={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Sy{constructor(e,r={},s,n){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=s,this.fetch=Yc(n)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,s,n){return U(this,void 0,void 0,function*(){try{let a;const l=Object.assign(Object.assign({},$d),n);let o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const c=l.metadata;typeof Blob<"u"&&s instanceof Blob?(a=new FormData,a.append("cacheControl",l.cacheControl),c&&a.append("metadata",this.encodeMetadata(c)),a.append("",s)):typeof FormData<"u"&&s instanceof FormData?(a=s,a.has("cacheControl")||a.append("cacheControl",l.cacheControl),c&&!a.has("metadata")&&a.append("metadata",this.encodeMetadata(c))):(a=s,o["cache-control"]=`max-age=${l.cacheControl}`,o["content-type"]=l.contentType,c&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(c))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!l.duplex&&(l.duplex="half")),n!=null&&n.headers&&(o=Object.assign(Object.assign({},o),n.headers));const u=this._removeEmptyFolders(r),h=this._getFinalPath(u),d=yield(e=="PUT"?Mo:jt)(this.fetch,`${this.url}/object/${h}`,a,Object.assign({headers:o},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:u,id:d.Id,fullPath:d.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(pe(a))return{data:null,error:a};throw a}})}upload(e,r,s){return U(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,s)})}uploadToSignedUrl(e,r,s,n){return U(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),l=this._getFinalPath(a),o=new URL(this.url+`/object/upload/sign/${l}`);o.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:$d.upsert},n),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",u.cacheControl)):(c=s,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType);const d=yield Mo(this.fetch,o.toString(),c,{headers:h});return{data:{path:a,fullPath:d.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(pe(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,r){return U(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const n=Object.assign({},this.headers);r!=null&&r.upsert&&(n["x-upsert"]="true");const a=yield jt(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:n}),l=new URL(this.url+a.url),o=l.searchParams.get("token");if(!o)throw new $i("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:o},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(pe(s))return{data:null,error:s};throw s}})}update(e,r,s){return U(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,s)})}move(e,r,s){return U(this,void 0,void 0,function*(){try{return{data:yield jt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pe(n))return{data:null,error:n};throw n}})}copy(e,r,s){return U(this,void 0,void 0,function*(){try{return{data:{path:(yield jt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pe(n))return{data:null,error:n};throw n}})}createSignedUrl(e,r,s){return U(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),a=yield jt(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:r},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const l=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${l}`)},{data:a,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pe(n))return{data:null,error:n};throw n}})}createSignedUrls(e,r,s){return U(this,void 0,void 0,function*(){try{const n=yield jt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),a=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:n.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${a}`):null})),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pe(n))return{data:null,error:n};throw n}})}download(e,r){const n=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),l=a?`?${a}`:"",o=this._getFinalPath(e),c=()=>zn(this.fetch,`${this.url}/${n}/${o}${l}`,{headers:this.headers,noResolveJson:!0});return new _y(c,this.shouldThrowOnError)}info(e){return U(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const s=yield zn(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:$o(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(pe(s))return{data:null,error:s};throw s}})}exists(e){return U(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield by(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(pe(s)&&s instanceof Do){const n=s.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,r){const s=this._getFinalPath(e),n=[],a=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";a!==""&&n.push(a);const o=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&n.push(c);let u=n.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${s}${u}`)}}}remove(e){return U(this,void 0,void 0,function*(){try{return{data:yield Qc(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pe(r))return{data:null,error:r};throw r}})}list(e,r,s){return U(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},jy),r),{prefix:e||""});return{data:yield jt(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},s),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pe(n))return{data:null,error:n};throw n}})}listV2(e,r){return U(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield jt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(pe(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const Ep="2.86.0",Cp={"X-Client-Info":`storage-js/${Ep}`};class Ny{constructor(e,r={},s,n){this.shouldThrowOnError=!1;const a=new URL(e);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Cp),r),this.fetch=Yc(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return U(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(e);return{data:yield zn(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pe(r))return{data:null,error:r};throw r}})}getBucket(e){return U(this,void 0,void 0,function*(){try{return{data:yield zn(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pe(r))return{data:null,error:r};throw r}})}createBucket(e){return U(this,arguments,void 0,function*(r,s={public:!1}){try{return{data:yield jt(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(pe(n))return{data:null,error:n};throw n}})}updateBucket(e,r){return U(this,void 0,void 0,function*(){try{return{data:yield Mo(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(pe(s))return{data:null,error:s};throw s}})}emptyBucket(e){return U(this,void 0,void 0,function*(){try{return{data:yield jt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pe(r))return{data:null,error:r};throw r}})}deleteBucket(e){return U(this,void 0,void 0,function*(){try{return{data:yield Qc(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pe(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(e){const r={};return e&&("limit"in e&&(r.limit=String(e.limit)),"offset"in e&&(r.offset=String(e.offset)),e.search&&(r.search=e.search),e.sortColumn&&(r.sortColumn=e.sortColumn),e.sortOrder&&(r.sortOrder=e.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}var qn=class extends Error{constructor(t,e){var r;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((r=e.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Ey(t,e,r){const s=new URL(e,t);if(r)for(const[n,a]of Object.entries(r))a!==void 0&&s.searchParams.set(n,a);return s.toString()}async function Cy(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function Py(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:r,path:s,query:n,body:a,headers:l}){const o=Ey(t.baseUrl,s,n),c=await Cy(t.auth),u=await e(o,{method:r,headers:{...a?{"Content-Type":"application/json"}:{},...c,...l},body:a?JSON.stringify(a):void 0}),h=await u.text(),d=(u.headers.get("content-type")||"").includes("application/json"),m=d&&h?JSON.parse(h):h;if(!u.ok){const g=d?m:void 0,v=g==null?void 0:g.error;throw new qn((v==null?void 0:v.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:v==null?void 0:v.type,icebergCode:v==null?void 0:v.code,details:g})}return{status:u.status,headers:u.headers,data:m}}}}function Sa(t){return t.join("")}var Ty=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:Sa(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(s=>({namespace:s}))}async createNamespace(t,e){const r={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Sa(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Sa(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Sa(t.namespace)}`}),!0}catch(e){if(e instanceof qn&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(r){if(r instanceof qn&&r.status===409)return;throw r}}};function as(t){return t.join("")}var Ry=class{constructor(t,e="",r){this.client=t,this.prefix=e,this.accessDelegation=r}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${as(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${as(t.namespace)}/tables`,body:e,headers:r})).data.metadata}async updateTable(t,e){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${as(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${as(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${as(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${as(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(r){if(r instanceof qn&&r.status===404)return!1;throw r}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(r){if(r instanceof qn&&r.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw r}}},Oy=class{constructor(t){var s;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const r=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=Py({baseUrl:r,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(s=t.accessDelegation)==null?void 0:s.join(","),this.namespaceOps=new Ty(this.client,e),this.tableOps=new Ry(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}};class Ay{constructor(e,r={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Cp),r),this.fetch=Yc(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return U(this,void 0,void 0,function*(){try{return{data:yield jt(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pe(r))return{data:null,error:r};throw r}})}listBuckets(e){return U(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const s=r.toString(),n=s?`${this.url}/bucket?${s}`:`${this.url}/bucket`;return{data:yield zn(this.fetch,n,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pe(r))return{data:null,error:r};throw r}})}deleteBucket(e){return U(this,void 0,void 0,function*(){try{return{data:yield Qc(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(pe(r))return{data:null,error:r};throw r}})}from(e){if(!vy(e))throw new $i("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new Oy({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>U(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}const Xc={"X-Client-Info":`storage-js/${Ep}`,"Content-Type":"application/json"};class Pp extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function at(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class bl extends Pp{constructor(e,r,s){super(e),this.name="StorageVectorsApiError",this.status=r,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Iy extends Pp{constructor(e,r){super(e),this.name="StorageVectorsUnknownError",this.originalError=r}}var Md;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Md||(Md={}));const Zc=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Ly=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Fd=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Uy=(t,e,r)=>U(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(r!=null&&r.noResolveJson)){const n=t.status||500,a=t;if(typeof a.json=="function")a.json().then(l=>{const o=(l==null?void 0:l.statusCode)||(l==null?void 0:l.code)||n+"";e(new bl(Fd(l),n,o))}).catch(()=>{const l=n+"",o=a.statusText||`HTTP ${n} error`;e(new bl(o,n,l))});else{const l=n+"",o=a.statusText||`HTTP ${n} error`;e(new bl(o,n,l))}}else e(new Iy(Fd(t),t))}),Dy=(t,e,r,s)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return s?(Ly(s)?(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n.body=JSON.stringify(s)):n.body=s,Object.assign(Object.assign({},n),r)):n};function $y(t,e,r,s,n,a){return U(this,void 0,void 0,function*(){return new Promise((l,o)=>{t(r,Dy(e,s,n,a)).then(c=>{if(!c.ok)throw c;if(s!=null&&s.noResolveJson)return c;const u=c.headers.get("content-type");return!u||!u.includes("application/json")?{}:c.json()}).then(c=>l(c)).catch(c=>Uy(c,o,s))})})}function it(t,e,r,s,n){return U(this,void 0,void 0,function*(){return $y(t,"POST",e,s,n,r)})}class My{constructor(e,r={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Xc),r),this.fetch=Zc(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return U(this,void 0,void 0,function*(){try{return{data:(yield it(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(at(r))return{data:null,error:r};throw r}})}getIndex(e,r){return U(this,void 0,void 0,function*(){try{return{data:yield it(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(at(s))return{data:null,error:s};throw s}})}listIndexes(e){return U(this,void 0,void 0,function*(){try{return{data:yield it(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(at(r))return{data:null,error:r};throw r}})}deleteIndex(e,r){return U(this,void 0,void 0,function*(){try{return{data:(yield it(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(at(s))return{data:null,error:s};throw s}})}}class Fy{constructor(e,r={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Xc),r),this.fetch=Zc(s)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return U(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield it(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(at(r))return{data:null,error:r};throw r}})}getVectors(e){return U(this,void 0,void 0,function*(){try{return{data:yield it(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(at(r))return{data:null,error:r};throw r}})}listVectors(e){return U(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield it(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(at(r))return{data:null,error:r};throw r}})}queryVectors(e){return U(this,void 0,void 0,function*(){try{return{data:yield it(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(at(r))return{data:null,error:r};throw r}})}deleteVectors(e){return U(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield it(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(at(r))return{data:null,error:r};throw r}})}}class By{constructor(e,r={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Xc),r),this.fetch=Zc(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return U(this,void 0,void 0,function*(){try{return{data:(yield it(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(at(r))return{data:null,error:r};throw r}})}getBucket(e){return U(this,void 0,void 0,function*(){try{return{data:yield it(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(at(r))return{data:null,error:r};throw r}})}listBuckets(){return U(this,arguments,void 0,function*(e={}){try{return{data:yield it(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(at(r))return{data:null,error:r};throw r}})}deleteBucket(e){return U(this,void 0,void 0,function*(){try{return{data:(yield it(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(at(r))return{data:null,error:r};throw r}})}}class zy extends By{constructor(e,r={}){super(e,r.headers||{},r.fetch)}from(e){return new qy(this.url,this.headers,e,this.fetch)}createBucket(e){const r=Object.create(null,{createBucket:{get:()=>super.createBucket}});return U(this,void 0,void 0,function*(){return r.createBucket.call(this,e)})}getBucket(e){const r=Object.create(null,{getBucket:{get:()=>super.getBucket}});return U(this,void 0,void 0,function*(){return r.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return U(this,arguments,void 0,function*(r={}){return e.listBuckets.call(this,r)})}deleteBucket(e){const r=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return U(this,void 0,void 0,function*(){return r.deleteBucket.call(this,e)})}}class qy extends My{constructor(e,r,s,n){super(e,r,n),this.vectorBucketName=s}createIndex(e){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return U(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return U(this,arguments,void 0,function*(r={}){return e.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return U(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return U(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new Vy(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class Vy extends Fy{constructor(e,r,s,n,a){super(e,r,a),this.vectorBucketName=s,this.indexName=n}putVectors(e){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return U(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return U(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return U(this,arguments,void 0,function*(r={}){return e.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return U(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return U(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class Wy extends Ny{constructor(e,r={},s,n){super(e,r,s,n)}from(e){return new Sy(this.url,this.headers,e,this.fetch)}get vectors(){return new zy(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Ay(this.url+"/iceberg",this.headers,this.fetch)}}const Hy="2.86.0";let dn="";typeof Deno<"u"?dn="deno":typeof document<"u"?dn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?dn="react-native":dn="node";const Ky={"X-Client-Info":`supabase-js-${dn}/${Hy}`},Gy={headers:Ky},Jy={schema:"public"},Yy={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Qy={},Xy=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Zy=()=>Headers,ew=(t,e,r)=>{const s=Xy(r),n=Zy();return async(a,l)=>{var o;const c=(o=await e())!==null&&o!==void 0?o:t;let u=new n(l==null?void 0:l.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),s(a,Object.assign(Object.assign({},l),{headers:u}))}};function tw(t){return t.endsWith("/")?t:t+"/"}function rw(t,e){var r,s;const{db:n,auth:a,realtime:l,global:o}=t,{db:c,auth:u,realtime:h,global:d}=e,m={db:Object.assign(Object.assign({},c),n),auth:Object.assign(Object.assign({},u),a),realtime:Object.assign(Object.assign({},h),l),storage:{},global:Object.assign(Object.assign(Object.assign({},d),o),{headers:Object.assign(Object.assign({},(r=d==null?void 0:d.headers)!==null&&r!==void 0?r:{}),(s=o==null?void 0:o.headers)!==null&&s!==void 0?s:{})}),accessToken:async()=>""};return t.accessToken?m.accessToken=t.accessToken:delete m.accessToken,m}function sw(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(tw(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Tp="2.86.0",hs=30*1e3,Fo=3,kl=Fo*hs,nw="http://localhost:9999",aw="supabase.auth.token",iw={"X-Client-Info":`gotrue-js/${Tp}`},Bo="X-Supabase-Api-Version",Rp={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},lw=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,ow=10*60*1e3;class Vn extends Error{constructor(e,r,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}}function $(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class cw extends Vn{constructor(e,r,s){super(e,r,s),this.name="AuthApiError",this.status=r,this.code=s}}function uw(t){return $(t)&&t.name==="AuthApiError"}class Ur extends Vn{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class Er extends Vn{constructor(e,r,s,n){super(e,s,n),this.name=r,this.status=s}}class st extends Er{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function dw(t){return $(t)&&t.name==="AuthSessionMissingError"}class is extends Er{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Na extends Er{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ea extends Er{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function hw(t){return $(t)&&t.name==="AuthImplicitGrantRedirectError"}class Bd extends Er{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class zo extends Er{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function _l(t){return $(t)&&t.name==="AuthRetryableFetchError"}class zd extends Er{constructor(e,r,s){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}}class qo extends Er{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const gi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),qd=` 	
\r=`.split(""),fw=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<qd.length;e+=1)t[qd[e].charCodeAt(0)]=-2;for(let e=0;e<gi.length;e+=1)t[gi[e].charCodeAt(0)]=e;return t})();function Vd(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;r(gi[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;r(gi[s]),e.queuedBits-=6}}function Op(t,e,r){const s=fw[t];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Wd(t){const e=[],r=l=>{e.push(String.fromCodePoint(l))},s={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},a=l=>{gw(l,s,r)};for(let l=0;l<t.length;l+=1)Op(t.charCodeAt(l),n,a);return e.join("")}function mw(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function pw(t,e){for(let r=0;r<t.length;r+=1){let s=t.charCodeAt(r);if(s>55295&&s<=56319){const n=(s-55296)*1024&65535;s=(t.charCodeAt(r+1)-56320&65535|n)+65536,r+=1}mw(s,e)}}function gw(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let s=1;s<6;s+=1)if(!(t>>7-s&1)){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function As(t){const e=[],r={queue:0,queuedBits:0},s=n=>{e.push(n)};for(let n=0;n<t.length;n+=1)Op(t.charCodeAt(n),r,s);return new Uint8Array(e)}function xw(t){const e=[];return pw(t,r=>e.push(r)),new Uint8Array(e)}function Fr(t){const e=[],r={queue:0,queuedBits:0},s=n=>{e.push(n)};return t.forEach(n=>Vd(n,r,s)),Vd(null,r,s),e.join("")}function vw(t){return Math.round(Date.now()/1e3)+t}function yw(){return Symbol("auth-callback")}const Oe=()=>typeof window<"u"&&typeof document<"u",Pr={tested:!1,writable:!1},Ap=()=>{if(!Oe())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Pr.tested)return Pr.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Pr.tested=!0,Pr.writable=!0}catch{Pr.tested=!0,Pr.writable=!1}return Pr.writable};function ww(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((n,a)=>{e[a]=n})}catch{}return r.searchParams.forEach((s,n)=>{e[n]=s}),e}const Ip=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),bw=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",fs=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},Tr=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},rr=async(t,e)=>{await t.removeItem(e)};class Mi{constructor(){this.promise=new Mi.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}Mi.promiseConstructor=Promise;function jl(t){const e=t.split(".");if(e.length!==3)throw new qo("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!lw.test(e[s]))throw new qo("JWT not in base64url format");return{header:JSON.parse(Wd(e[0])),payload:JSON.parse(Wd(e[1])),signature:As(e[2]),raw:{header:e[0],payload:e[1]}}}async function kw(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function _w(t,e){return new Promise((s,n)=>{(async()=>{for(let a=0;a<1/0;a++)try{const l=await t(a);if(!e(a,null,l)){s(l);return}}catch(l){if(!e(a,l)){n(l);return}}})()})}function jw(t){return("0"+t.toString(16)).substr(-2)}function Sw(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let n="";for(let a=0;a<56;a++)n+=r.charAt(Math.floor(Math.random()*s));return n}return crypto.getRandomValues(e),Array.from(e,jw).join("")}async function Nw(t){const r=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",r),n=new Uint8Array(s);return Array.from(n).map(a=>String.fromCharCode(a)).join("")}async function Ew(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await Nw(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ls(t,e,r=!1){const s=Sw();let n=s;r&&(n+="/PASSWORD_RECOVERY"),await fs(t,`${e}-code-verifier`,n);const a=await Ew(s);return[a,s===a?"plain":"s256"]}const Cw=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Pw(t){const e=t.headers.get(Bo);if(!e||!e.match(Cw))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Tw(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Rw(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Ow=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function os(t){if(!Ow.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Sl(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Aw(t,e){return new Proxy(t,{get:(r,s,n)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const a=s.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,s,n)}return!e.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,s,n)}})}function Hd(t){return JSON.parse(JSON.stringify(t))}const Ar=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Iw=[502,503,504];async function Kd(t){var e;if(!bw(t))throw new zo(Ar(t),0);if(Iw.includes(t.status))throw new zo(Ar(t),t.status);let r;try{r=await t.json()}catch(a){throw new Ur(Ar(a),a)}let s;const n=Pw(t);if(n&&n.getTime()>=Rp["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new zd(Ar(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new st}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,l)=>a&&typeof l=="string",!0))throw new zd(Ar(r),t.status,r.weak_password.reasons);throw new cw(Ar(r),t.status||500,s)}const Lw=(t,e,r,s)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),r))};async function B(t,e,r,s){var n;const a=Object.assign({},s==null?void 0:s.headers);a[Bo]||(a[Bo]=Rp["2024-01-01"].name),s!=null&&s.jwt&&(a.Authorization=`Bearer ${s.jwt}`);const l=(n=s==null?void 0:s.query)!==null&&n!==void 0?n:{};s!=null&&s.redirectTo&&(l.redirect_to=s.redirectTo);const o=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",c=await Uw(t,e,r+o,{headers:a,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(c):{data:Object.assign({},c),error:null}}async function Uw(t,e,r,s,n,a){const l=Lw(e,s,n,a);let o;try{o=await t(r,Object.assign({},l))}catch(c){throw console.error(c),new zo(Ar(c),0)}if(o.ok||await Kd(o),s!=null&&s.noResolveJson)return o;try{return await o.json()}catch(c){await Kd(c)}}function kt(t){var e;let r=null;Mw(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=vw(t.expires_in)));const s=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:s},error:null}}function Gd(t){const e=kt(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(e.data.weak_password=t.weak_password),e}function lr(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Dw(t){return{data:t,error:null}}function $w(t){const{action_link:e,email_otp:r,hashed_token:s,redirect_to:n,verification_type:a}=t,l=Ks(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:r,hashed_token:s,redirect_to:n,verification_type:a},c=Object.assign({},l);return{data:{properties:o,user:c},error:null}}function Jd(t){return t}function Mw(t){return t.access_token&&t.refresh_token&&t.expires_in}const Nl=["global","local","others"];class Fw{constructor({url:e="",headers:r={},fetch:s}){this.url=e,this.headers=r,this.fetch=Ip(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=Nl[0]){if(Nl.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Nl.join(", ")}`);try{return await B(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if($(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,r={}){try{return await B(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:lr})}catch(s){if($(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:r}=e,s=Ks(e,["options"]),n=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(n.new_email=s==null?void 0:s.newEmail,delete n.newEmail),await B(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:$w,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if($(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await B(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:lr})}catch(r){if($(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,s,n,a,l,o,c;try{const u={nextPage:null,lastPage:0,total:0},h=await B(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(a=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&a!==void 0?a:""},xform:Jd});if(h.error)throw h.error;const d=await h.json(),m=(l=h.headers.get("x-total-count"))!==null&&l!==void 0?l:0,g=(c=(o=h.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return g.length>0&&(g.forEach(v=>{const y=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(v.split(";")[1].split("=")[1]);u[`${w}Page`]=y}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if($(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){os(e);try{return await B(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:lr})}catch(r){if($(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){os(e);try{return await B(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:lr})}catch(s){if($(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,r=!1){os(e);try{return await B(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:lr})}catch(s){if($(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){os(e.userId);try{const{data:r,error:s}=await B(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:r,error:s}}catch(r){if($(r))return{data:null,error:r};throw r}}async _deleteFactor(e){os(e.userId),os(e.id);try{return{data:await B(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if($(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,s,n,a,l,o,c;try{const u={nextPage:null,lastPage:0,total:0},h=await B(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(a=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&a!==void 0?a:""},xform:Jd});if(h.error)throw h.error;const d=await h.json(),m=(l=h.headers.get("x-total-count"))!==null&&l!==void 0?l:0,g=(c=(o=h.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return g.length>0&&(g.forEach(v=>{const y=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(v.split(";")[1].split("=")[1]);u[`${w}Page`]=y}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if($(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(e){try{return await B(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if($(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await B(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if($(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await B(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if($(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(e){try{return await B(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if($(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await B(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if($(r))return{data:null,error:r};throw r}}}function Yd(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const cs={debug:!!(globalThis&&Ap()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Lp extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Bw extends Lp{}async function zw(t,e,r){cs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),cs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async n=>{if(n){cs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,n.name);try{return await r()}finally{cs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,n.name)}}else{if(e===0)throw cs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Bw(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(cs.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function qw(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Up(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function Vw(t){return parseInt(t,16)}function Ww(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,s=>s.toString(16).padStart(2,"0")).join("")}function Hw(t){var e;const{chainId:r,domain:s,expirationTime:n,issuedAt:a=new Date,nonce:l,notBefore:o,requestId:c,resources:u,scheme:h,uri:d,version:m}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(m!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${m}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const g=Up(t.address),v=h?`${h}://${s}`:s,y=t.statement?`${t.statement}
`:"",w=`${v} wants you to sign in with your Ethereum account:
${g}

${y}`;let f=`URI: ${d}
Version: ${m}
Chain ID: ${r}${l?`
Nonce: ${l}`:""}
Issued At: ${a.toISOString()}`;if(n&&(f+=`
Expiration Time: ${n.toISOString()}`),o&&(f+=`
Not Before: ${o.toISOString()}`),c&&(f+=`
Request ID: ${c}`),u){let p=`
Resources:`;for(const x of u){if(!x||typeof x!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${x}`);p+=`
- ${x}`}f+=p}return`${w}
${f}`}class _e extends Error{constructor({message:e,code:r,cause:s,name:n}){var a;super(e,{cause:s}),this.__isWebAuthnError=!0,this.name=(a=n??(s instanceof Error?s.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=r}}class xi extends _e{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function Kw({error:t,options:e}){var r,s,n;const{publicKey:a}=e;if(!a)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new _e({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=a.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new _e({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((s=a.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new _e({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((n=a.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new _e({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new _e({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new _e({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return a.pubKeyCredParams.filter(o=>o.type==="public-key").length===0?new _e({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new _e({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const l=window.location.hostname;if(Dp(l)){if(a.rp.id!==l)return new _e({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new _e({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new _e({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new _e({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new _e({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function Gw({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new _e({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new _e({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const s=window.location.hostname;if(Dp(s)){if(r.rpId!==s)return new _e({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new _e({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new _e({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new _e({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class Jw{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const Yw=new Jw;function Qw(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:s}=t,n=Ks(t,["challenge","user","excludeCredentials"]),a=As(e).buffer,l=Object.assign(Object.assign({},r),{id:As(r.id).buffer}),o=Object.assign(Object.assign({},n),{challenge:a,user:l});if(s&&s.length>0){o.excludeCredentials=new Array(s.length);for(let c=0;c<s.length;c++){const u=s[c];o.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:As(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return o}function Xw(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,s=Ks(t,["challenge","allowCredentials"]),n=As(e).buffer,a=Object.assign(Object.assign({},s),{challenge:n});if(r&&r.length>0){a.allowCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const o=r[l];a.allowCredentials[l]=Object.assign(Object.assign({},o),{id:As(o.id).buffer,type:o.type||"public-key",transports:o.transports})}}return a}function Zw(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:Fr(new Uint8Array(t.response.attestationObject)),clientDataJSON:Fr(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function eb(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,s=t.getClientExtensionResults(),n=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Fr(new Uint8Array(n.authenticatorData)),clientDataJSON:Fr(new Uint8Array(n.clientDataJSON)),signature:Fr(new Uint8Array(n.signature)),userHandle:n.userHandle?Fr(new Uint8Array(n.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Dp(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Qd(){var t,e;return!!(Oe()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function tb(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new xi("Browser returned unexpected credential type",e)}:{data:null,error:new xi("Empty credential response",e)}}catch(e){return{data:null,error:Kw({error:e,options:t})}}}async function rb(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new xi("Browser returned unexpected credential type",e)}:{data:null,error:new xi("Empty credential response",e)}}catch(e){return{data:null,error:Gw({error:e,options:t})}}}const sb={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},nb={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function vi(...t){const e=n=>n!==null&&typeof n=="object"&&!Array.isArray(n),r=n=>n instanceof ArrayBuffer||ArrayBuffer.isView(n),s={};for(const n of t)if(n)for(const a in n){const l=n[a];if(l!==void 0)if(Array.isArray(l))s[a]=l;else if(r(l))s[a]=l;else if(e(l)){const o=s[a];e(o)?s[a]=vi(o,l):s[a]=vi(l)}else s[a]=l}return s}function ab(t,e){return vi(sb,t,e||{})}function ib(t,e){return vi(nb,t,e||{})}class lb{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:s,signal:n},a){try{const{data:l,error:o}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!l)return{data:null,error:o};const c=n??Yw.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:u}=l.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${s}`),u.displayName||(u.displayName=u.name)}switch(l.webauthn.type){case"create":{const u=ab(l.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:h,error:d}=await tb({publicKey:u,signal:c});return h?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:h}},error:null}:{data:null,error:d}}case"request":{const u=ib(l.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:h,error:d}=await rb(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:u,signal:c}));return h?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:h}},error:null}:{data:null,error:d}}}}catch(l){return $(l)?{data:null,error:l}:{data:null,error:new Ur("Unexpected error in challenge",l)}}}async _verify({challengeId:e,factorId:r,webauthn:s}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:s})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:n}={}},a){if(!r)return{data:null,error:new Vn("rpId is required for WebAuthn authentication")};try{if(!Qd())return{data:null,error:new Ur("Browser does not support WebAuthn",null)};const{data:l,error:o}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:s},signal:n},{request:a});if(!l)return{data:null,error:o};const{webauthn:c}=l;return this._verify({factorId:e,challengeId:l.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:s,credential_response:c.credential_response}})}catch(l){return $(l)?{data:null,error:l}:{data:null,error:new Ur("Unexpected error in authenticate",l)}}}async _register({friendlyName:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:n}={}},a){if(!r)return{data:null,error:new Vn("rpId is required for WebAuthn registration")};try{if(!Qd())return{data:null,error:new Ur("Browser does not support WebAuthn",null)};const{data:l,error:o}=await this._enroll({friendlyName:e});if(!l)return await this.client.mfa.listFactors().then(h=>{var d;return(d=h.data)===null||d===void 0?void 0:d.all.find(m=>m.factor_type==="webauthn"&&m.friendly_name===e&&m.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h==null?void 0:h.id}):void 0),{data:null,error:o};const{data:c,error:u}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:r,rpOrigins:s},signal:n},{create:a});return c?this._verify({factorId:l.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:s,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(l){return $(l)?{data:null,error:l}:{data:null,error:new Ur("Unexpected error in register",l)}}}}qw();const ob={url:nw,storageKey:aw,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:iw,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Xd(t,e,r){return await r()}const us={};class Wn{get jwks(){var e,r;return(r=(e=us[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){us[this.storageKey]=Object.assign(Object.assign({},us[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=us[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){us[this.storageKey]=Object.assign(Object.assign({},us[this.storageKey]),{cachedAt:e})}constructor(e){var r,s,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},ob),e);if(this.storageKey=a.storageKey,this.instanceID=(r=Wn.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Wn.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&Oe()){const l=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(l),this.logDebugMessages&&console.trace(l)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new Fw({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=Ip(a.fetch),this.lock=a.lock||Xd,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,a.lock?this.lock=a.lock:Oe()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=zw:this.lock=Xd,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new lb(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:Ap()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Yd(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=Yd(this.memoryStorage)),Oe()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Tp}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let r={},s="none";if(Oe()&&(r=ww(window.location.href),this._isImplicitGrantCallback(r)?s="implicit":await this._isPKCECallback(r)&&(s="pkce")),Oe()&&this.detectSessionInUrl&&s!=="none"){const{data:n,error:a}=await this._getSessionFromURL(r,s);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),hw(a)){const c=(e=a.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:l,redirectType:o}=n;return this._debug("#_initialize()","detected session in URL",l,"redirect type",o),await this._saveSession(l),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return $(r)?this._returnResult({error:r}):this._returnResult({error:new Ur("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,s,n;try{const a=await B(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.captchaToken}},xform:kt}),{data:l,error:o}=a;if(o||!l)return this._returnResult({data:{user:null,session:null},error:o});const c=l.session,u=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(a){if($(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(e){var r,s,n;try{let a;if("email"in e){const{email:h,password:d,options:m}=e;let g=null,v=null;this.flowType==="pkce"&&([g,v]=await ls(this.storage,this.storageKey)),a=await B(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:h,password:d,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:g,code_challenge_method:v},xform:kt})}else if("phone"in e){const{phone:h,password:d,options:m}=e;a=await B(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:d,data:(s=m==null?void 0:m.data)!==null&&s!==void 0?s:{},channel:(n=m==null?void 0:m.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:kt})}else throw new Na("You must provide either an email or phone number and a password");const{data:l,error:o}=a;if(o||!l)return this._returnResult({data:{user:null,session:null},error:o});const c=l.session,u=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(a){if($(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(e){try{let r;if("email"in e){const{email:a,password:l,options:o}=e;r=await B(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Gd})}else if("phone"in e){const{phone:a,password:l,options:o}=e;r=await B(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Gd})}else throw new Na("You must provide either an email or phone number and a password");const{data:s,error:n}=r;if(n)return this._returnResult({data:{user:null,session:null},error:n});if(!s||!s.session||!s.user){const a=new is;return this._returnResult({data:{user:null,session:null},error:a})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:n})}catch(r){if($(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(e){var r,s,n,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,s,n,a,l,o,c,u,h,d,m;let g,v;if("message"in e)g=e.message,v=e.signature;else{const{chain:y,wallet:w,statement:f,options:p}=e;let x;if(Oe())if(typeof w=="object")x=w;else{const W=window;if("ethereum"in W&&typeof W.ethereum=="object"&&"request"in W.ethereum&&typeof W.ethereum.request=="function")x=W.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(p!=null&&p.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=w}const k=new URL((r=p==null?void 0:p.url)!==null&&r!==void 0?r:window.location.href),N=await x.request({method:"eth_requestAccounts"}).then(W=>W).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!N||N.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const j=Up(N[0]);let S=(s=p==null?void 0:p.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!S){const W=await x.request({method:"eth_chainId"});S=Vw(W)}const T={domain:k.host,address:j,statement:f,uri:k.href,version:"1",chainId:S,nonce:(n=p==null?void 0:p.signInWithEthereum)===null||n===void 0?void 0:n.nonce,issuedAt:(l=(a=p==null?void 0:p.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(o=p==null?void 0:p.signInWithEthereum)===null||o===void 0?void 0:o.expirationTime,notBefore:(c=p==null?void 0:p.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=p==null?void 0:p.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(h=p==null?void 0:p.signInWithEthereum)===null||h===void 0?void 0:h.resources};g=Hw(T),v=await x.request({method:"personal_sign",params:[Ww(g),j]})}try{const{data:y,error:w}=await B(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:g,signature:v},!((d=e.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:kt});if(w)throw w;if(!y||!y.session||!y.user){const f=new is;return this._returnResult({data:{user:null,session:null},error:f})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:w})}catch(y){if($(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async signInWithSolana(e){var r,s,n,a,l,o,c,u,h,d,m,g;let v,y;if("message"in e)v=e.message,y=e.signature;else{const{chain:w,wallet:f,statement:p,options:x}=e;let k;if(Oe())if(typeof f=="object")k=f;else{const j=window;if("solana"in j&&typeof j.solana=="object"&&("signIn"in j.solana&&typeof j.solana.signIn=="function"||"signMessage"in j.solana&&typeof j.solana.signMessage=="function"))k=j.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof f!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=f}const N=new URL((r=x==null?void 0:x.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in k&&k.signIn){const j=await k.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},x==null?void 0:x.signInWithSolana),{version:"1",domain:N.host,uri:N.href}),p?{statement:p}:null));let S;if(Array.isArray(j)&&j[0]&&typeof j[0]=="object")S=j[0];else if(j&&typeof j=="object"&&"signedMessage"in j&&"signature"in j)S=j;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)v=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),y=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in k)||typeof k.signMessage!="function"||!("publicKey"in k)||typeof k!="object"||!k.publicKey||!("toBase58"in k.publicKey)||typeof k.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${N.host} wants you to sign in with your Solana account:`,k.publicKey.toBase58(),...p?["",p,""]:[""],"Version: 1",`URI: ${N.href}`,`Issued At: ${(n=(s=x==null?void 0:x.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((a=x==null?void 0:x.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${x.signInWithSolana.notBefore}`]:[],...!((l=x==null?void 0:x.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${x.signInWithSolana.expirationTime}`]:[],...!((o=x==null?void 0:x.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${x.signInWithSolana.chainId}`]:[],...!((c=x==null?void 0:x.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${x.signInWithSolana.nonce}`]:[],...!((u=x==null?void 0:x.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${x.signInWithSolana.requestId}`]:[],...!((d=(h=x==null?void 0:x.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||d===void 0)&&d.length?["Resources",...x.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);const j=await k.signMessage(new TextEncoder().encode(v),"utf8");if(!j||!(j instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=j}}try{const{data:w,error:f}=await B(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:Fr(y)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:kt});if(f)throw f;if(!w||!w.session||!w.user){const p=new is;return this._returnResult({data:{user:null,session:null},error:p})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:f})}catch(w){if($(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async _exchangeCodeForSession(e){const r=await Tr(this.storage,`${this.storageKey}-code-verifier`),[s,n]=(r??"").split("/");try{const{data:a,error:l}=await B(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:kt});if(await rr(this.storage,`${this.storageKey}-code-verifier`),l)throw l;if(!a||!a.session||!a.user){const o=new is;return this._returnResult({data:{user:null,session:null,redirectType:null},error:o})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:n??null}),error:l})}catch(a){if($(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(e){try{const{options:r,provider:s,token:n,access_token:a,nonce:l}=e,o=await B(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:n,access_token:a,nonce:l,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:kt}),{data:c,error:u}=o;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const h=new is;return this._returnResult({data:{user:null,session:null},error:h})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(r){if($(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(e){var r,s,n,a,l;try{if("email"in e){const{email:o,options:c}=e;let u=null,h=null;this.flowType==="pkce"&&([u,h]=await ls(this.storage,this.storageKey));const{error:d}=await B(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:h},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}if("phone"in e){const{phone:o,options:c}=e,{data:u,error:h}=await B(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(l=c==null?void 0:c.channel)!==null&&l!==void 0?l:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:h})}throw new Na("You must provide either an email or phone number.")}catch(o){if($(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async verifyOtp(e){var r,s;try{let n,a;"options"in e&&(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo,a=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:l,error:o}=await B(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:n,xform:kt});if(o)throw o;if(!l)throw new Error("An error occurred on token verification.");const c=l.session,u=l.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(n){if($(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithSSO(e){var r,s,n,a,l;try{let o=null,c=null;this.flowType==="pkce"&&([o,c]=await ls(this.storage,this.storageKey));const u=await B(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((n=e==null?void 0:e.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:c}),headers:this.headers,xform:Dw});return!((a=u.data)===null||a===void 0)&&a.url&&Oe()&&!(!((l=e.options)===null||l===void 0)&&l.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(o){if($(o))return this._returnResult({data:null,error:o});throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:s}=e;if(s)throw s;if(!r)throw new st;const{error:n}=await B(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:n})})}catch(e){if($(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:s,type:n,options:a}=e,{error:l}=await B(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:n,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:l})}else if("phone"in e){const{phone:s,type:n,options:a}=e,{data:l,error:o}=await B(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:n,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:o})}throw new Na("You must provide either an email or phone number and a type")}catch(r){if($(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await Tr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<kl:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const l=await Tr(this.userStorage,this.storageKey+"-user");l!=null&&l.user?e.user=l.user:e.user=Sl()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const l={value:this.suppressGetSessionWarning};e.user=Aw(e.user,l),l.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:n,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:n},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await B(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:lr}):await this._useSession(async r=>{var s,n,a;const{data:l,error:o}=r;if(o)throw o;return!(!((s=l.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new st}:await B(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(n=l.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0,xform:lr})})}catch(r){if($(r))return dw(r)&&(await this._removeSession(),await rr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async s=>{const{data:n,error:a}=s;if(a)throw a;if(!n.session)throw new st;const l=n.session;let o=null,c=null;this.flowType==="pkce"&&e.email!=null&&([o,c]=await ls(this.storage,this.storageKey));const{data:u,error:h}=await B(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:c}),jwt:l.access_token,xform:lr});if(h)throw h;return l.user=u.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),this._returnResult({data:{user:l.user},error:null})})}catch(s){if($(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new st;const r=Date.now()/1e3;let s=r,n=!0,a=null;const{payload:l}=jl(e.access_token);if(l.exp&&(s=l.exp,n=s<=r),n){const{data:o,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!o)return{data:{user:null,session:null},error:null};a=o}else{const{data:o,error:c}=await this._getUser(e.access_token);if(c)throw c;a={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(r){if($(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var s;if(!e){const{data:l,error:o}=r;if(o)throw o;e=(s=l.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new st;const{data:n,error:a}=await this._callRefreshToken(e.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):n?this._returnResult({data:{user:n.user,session:n},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if($(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(e,r){try{if(!Oe())throw new Ea("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ea(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Bd("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ea("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Bd("No code detected.");const{data:p,error:x}=await this._exchangeCodeForSession(e.code);if(x)throw x;const k=new URL(window.location.href);return k.searchParams.delete("code"),window.history.replaceState(window.history.state,"",k.toString()),{data:{session:p.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:n,access_token:a,refresh_token:l,expires_in:o,expires_at:c,token_type:u}=e;if(!a||!o||!l||!u)throw new Ea("No session defined in URL");const h=Math.round(Date.now()/1e3),d=parseInt(o);let m=h+d;c&&(m=parseInt(c));const g=m-h;g*1e3<=hs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${d}s`);const v=m-d;h-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,m,h):h-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,m,h);const{data:y,error:w}=await this._getUser(a);if(w)throw w;const f={provider_token:s,provider_refresh_token:n,access_token:a,expires_in:d,expires_at:m,refresh_token:l,token_type:u,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:f,redirectType:e.type},error:null})}catch(s){if($(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await Tr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:n,error:a}=r;if(a)return this._returnResult({error:a});const l=(s=n.session)===null||s===void 0?void 0:s.access_token;if(l){const{error:o}=await this.admin.signOut(l,e);if(o&&!(uw(o)&&(o.status===404||o.status===401||o.status===403)))return this._returnResult({error:o})}return e!=="others"&&(await this._removeSession(),await rr(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const r=yw(),s={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async r=>{var s,n;try{const{data:{session:a},error:l}=r;if(l)throw l;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,r={}){let s=null,n=null;this.flowType==="pkce"&&([s,n]=await ls(this.storage,this.storageKey,!0));try{return await B(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:n,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if($(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var e;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(r){if($(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:s,error:n}=await this._useSession(async a=>{var l,o,c,u,h;const{data:d,error:m}=a;if(m)throw m;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await B(this.fetch,"GET",g,{headers:this.headers,jwt:(h=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&h!==void 0?h:void 0})});if(n)throw n;return Oe()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),this._returnResult({data:{provider:e.provider,url:s==null?void 0:s.url},error:null})}catch(s){if($(s))return this._returnResult({data:{provider:e.provider,url:null},error:s});throw s}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var s;try{const{error:n,data:{session:a}}=r;if(n)throw n;const{options:l,provider:o,token:c,access_token:u,nonce:h}=e,d=await B(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=a==null?void 0:a.access_token)!==null&&s!==void 0?s:void 0,body:{provider:o,id_token:c,access_token:u,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:kt}),{data:m,error:g}=d;return g?this._returnResult({data:{user:null,session:null},error:g}):!m||!m.session||!m.user?this._returnResult({data:{user:null,session:null},error:new is}):(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("USER_UPDATED",m.session)),this._returnResult({data:m,error:g}))}catch(n){if($(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var s,n;const{data:a,error:l}=r;if(l)throw l;return await B(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:void 0})})}catch(r){if($(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await _w(async n=>(n>0&&await kw(200*Math.pow(2,n-1)),this._debug(r,"refreshing attempt",n),await B(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:kt})),(n,a)=>{const l=200*Math.pow(2,n);return a&&_l(a)&&Date.now()+l-s<hs})}catch(s){if(this._debug(r,"error",s),$(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",s),Oe()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,r;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const n=await Tr(this.storage,this.storageKey);if(n&&this.userStorage){let l=await Tr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:n.user},await fs(this.userStorage,this.storageKey+"-user",l)),n.user=(e=l==null?void 0:l.user)!==null&&e!==void 0?e:Sl()}else if(n&&!n.user&&!n.user){const l=await Tr(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(n.user=l.user,await rr(this.storage,this.storageKey+"-user"),await fs(this.storage,this.storageKey,n)):n.user=Sl()}if(this._debug(s,"session from storage",n),!this._isValidSession(n)){this._debug(s,"session is not valid"),n!==null&&await this._removeSession();return}const a=((r=n.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<kl;if(this._debug(s,`session has${a?"":" not"} expired with margin of ${kl}s`),a){if(this.autoRefreshToken&&n.refresh_token){const{error:l}=await this._callRefreshToken(n.refresh_token);l&&(console.error(l),_l(l)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(n.user&&n.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:o}=await this._getUser(n.access_token);!o&&(l!=null&&l.user)?(n.user=l.user,await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(s,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(s,"error",n),console.error(n);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var r,s;if(!e)throw new st;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new Mi;const{data:a,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!a.session)throw new st;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const o={data:a.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(a){if(this._debug(n,"error",a),$(a)){const l={data:null,error:a};return _l(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(l),l}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(a),a}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,r,s=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:r});const a=[],l=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,r)}catch(c){a.push(c)}});if(await Promise.all(l),a.length>0){for(let o=0;o<a.length;o+=1)console.error(a[o]);throw a[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),s=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&r.user&&await fs(this.userStorage,this.storageKey+"-user",{user:r.user});const n=Object.assign({},r);delete n.user;const a=Hd(n);await fs(this.storage,this.storageKey,a)}else{const n=Hd(r);await fs(this.storage,this.storageKey,n)}}async _removeSession(){this._debug("#_removeSession()"),await rr(this.storage,this.storageKey),await rr(this.storage,this.storageKey+"-code-verifier"),await rr(this.storage,this.storageKey+"-user"),this.userStorage&&await rr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Oe()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),hs);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((s.expires_at*1e3-e)/hs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${hs}ms, refresh threshold is ${Fo} ticks`),n<=Fo&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Lp)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Oe()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,s){const n=[`provider=${encodeURIComponent(r)}`];if(s!=null&&s.redirectTo&&n.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&n.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[a,l]=await ls(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});n.push(o.toString())}if(s!=null&&s.queryParams){const a=new URLSearchParams(s.queryParams);n.push(a.toString())}return s!=null&&s.skipBrowserRedirect&&n.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var s;const{data:n,error:a}=r;return a?this._returnResult({data:null,error:a}):await B(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if($(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(e){try{return await this._useSession(async r=>{var s,n;const{data:a,error:l}=r;if(l)return this._returnResult({data:null,error:l});const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:c,error:u}=await B(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return u?this._returnResult({data:null,error:u}):(e.factorType==="totp"&&c.type==="totp"&&(!((n=c==null?void 0:c.totp)===null||n===void 0)&&n.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if($(r))return this._returnResult({data:null,error:r});throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:n,error:a}=r;if(a)return this._returnResult({data:null,error:a});const l=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?Zw(e.webauthn.credential_response):eb(e.webauthn.credential_response)})}:{code:e.code}),{data:o,error:c}=await B(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:l,headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),this._returnResult({data:o,error:c}))})}catch(r){if($(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:n,error:a}=r;if(a)return this._returnResult({data:null,error:a});const l=await B(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token});if(l.error)return l;const{data:o}=l;if(o.type!=="webauthn")return{data:o,error:null};switch(o.webauthn.type){case"create":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:Qw(o.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:Xw(o.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if($(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(e){const{data:r,error:s}=await this._challenge({factorId:e.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:s}=await this.getUser();if(s)return{data:null,error:s};const n={all:[],phone:[],totp:[],webauthn:[]};for(const a of(e=r==null?void 0:r.factors)!==null&&e!==void 0?e:[])n.all.push(a),a.status==="verified"&&n[a.factor_type].push(a);return{data:n,error:null}}async _getAuthenticatorAssuranceLevel(){var e,r;const{data:{session:s},error:n}=await this.getSession();if(n)return this._returnResult({data:null,error:n});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=jl(s.access_token);let l=null;a.aal&&(l=a.aal);let o=l;((r=(e=s.user.factors)===null||e===void 0?void 0:e.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(o="aal2");const u=a.amr||[];return{data:{currentLevel:l,nextLevel:o,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:s},error:n}=r;return n?this._returnResult({data:null,error:n}):s?await B(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:s.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new st})})}catch(r){if($(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async s=>{const{data:{session:n},error:a}=s;if(a)return this._returnResult({data:null,error:a});if(!n)return this._returnResult({data:null,error:new st});const l=await B(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:n.access_token,body:{action:"approve"},xform:o=>({data:o,error:null})});return l.data&&l.data.redirect_url&&Oe()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(s){if($(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(e,r){try{return await this._useSession(async s=>{const{data:{session:n},error:a}=s;if(a)return this._returnResult({data:null,error:a});if(!n)return this._returnResult({data:null,error:new st});const l=await B(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:n.access_token,body:{action:"deny"},xform:o=>({data:o,error:null})});return l.data&&l.data.redirect_url&&Oe()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(s){if($(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:r},error:s}=e;return s?this._returnResult({data:null,error:s}):r?await B(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:n=>({data:n,error:null})}):this._returnResult({data:null,error:new st})})}catch(e){if($(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async r=>{const{data:{session:s},error:n}=r;return n?this._returnResult({data:null,error:n}):s?(await B(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new st})})}catch(r){if($(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(e,r={keys:[]}){let s=r.keys.find(o=>o.kid===e);if(s)return s;const n=Date.now();if(s=this.jwks.keys.find(o=>o.kid===e),s&&this.jwks_cached_at+ow>n)return s;const{data:a,error:l}=await B(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=n,s=a.keys.find(o=>o.kid===e),!s)?null:s}async getClaims(e,r={}){try{let s=e;if(!s){const{data:g,error:v}=await this.getSession();if(v||!g.session)return this._returnResult({data:null,error:v});s=g.session.access_token}const{header:n,payload:a,signature:l,raw:{header:o,payload:c}}=jl(s);r!=null&&r.allowExpired||Tw(a.exp);const u=!n.alg||n.alg.startsWith("HS")||!n.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(n.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:g}=await this.getUser(s);if(g)throw g;return{data:{claims:a,header:n,signature:l},error:null}}const h=Rw(n.alg),d=await crypto.subtle.importKey("jwk",u,h,!0,["verify"]);if(!await crypto.subtle.verify(h,d,l,xw(`${o}.${c}`)))throw new qo("Invalid JWT signature");return{data:{claims:a,header:n,signature:l},error:null}}catch(s){if($(s))return this._returnResult({data:null,error:s});throw s}}}Wn.nextInstanceID={};const cb=Wn;class ub extends cb{constructor(e){super(e)}}class db{constructor(e,r,s){var n,a,l;this.supabaseUrl=e,this.supabaseKey=r;const o=sw(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const c=`sb-${o.hostname.split(".")[0]}-auth-token`,u={db:Jy,realtime:Qy,auth:Object.assign(Object.assign({},Yy),{storageKey:c}),global:Gy},h=rw(s??{},u);this.storageKey=(n=h.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(a=h.global.headers)!==null&&a!==void 0?a:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(d,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=h.auth)!==null&&l!==void 0?l:{},this.headers,h.global.fetch),this.fetch=ew(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.accessToken&&this.accessToken().then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new Qv(new URL("rest/v1",o).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new Wy(this.storageUrl.href,this.headers,this.fetch,s==null?void 0:s.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new Gv(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,r,s)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,r;if(this.accessToken)return await this.accessToken();const{data:s}=await this.auth.getSession();return(r=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:s,storage:n,userStorage:a,storageKey:l,flowType:o,lock:c,debug:u,throwOnError:h},d,m){const g={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ub({url:this.authUrl.href,headers:Object.assign(Object.assign({},g),d),storageKey:l,autoRefreshToken:e,persistSession:r,detectSessionInUrl:s,storage:n,userStorage:a,flowType:o,lock:c,debug:u,throwOnError:h,fetch:m,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new my(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,s)=>{this._handleTokenChanged(r,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,r,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const hb=(t,e,r)=>new db(t,e,r);function fb(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}fb()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const mb="https://eannpgaknjctmcrhhnqw.supabase.co",pb="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVhbm5wZ2FrbmpjdG1jcmhobnF3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ2NTk4MjYsImV4cCI6MjA4MDIzNTgyNn0.zPI39Lr7vAgfs9J6FEC8SiQ1fyWdE9bvnVb674dpbeE",$p=()=>localStorage.getItem("sb_url")||mb,Mp=()=>localStorage.getItem("sb_key")||pb,A=hb($p(),Mp()),gb=()=>({url:$p(),key:Mp()});var K=(t=>(t.SUPER_ADMIN="SUPER_ADMIN",t.ADMIN="ADMIN",t.TEACHER="TEACHER",t.STUDENT="STUDENT",t.PUBLIC="PUBLIC",t.GUEST="GUEST",t))(K||{});const Be=()=>localStorage.getItem("school_id"),Zd=t=>{if(!t)return[];let e=typeof t=="string"?JSON.parse(t):t;return Array.isArray(e)?e.length===0?[]:typeof e[0]=="string"?e.map(r=>({name:r,maxMarks:50,passMarks:18})):e.map(r=>({name:r.name,maxMarks:r.maxMarks||50,passMarks:r.passMarks||(r.maxMarks?Math.floor(r.maxMarks*.3):18)})):[]},xb=t=>new Promise((e,r)=>{const s=new FileReader;s.readAsDataURL(t),s.onload=n=>{var l;const a=new Image;a.src=(l=n.target)==null?void 0:l.result,a.onload=()=>{const o=document.createElement("canvas"),c=500,u=c/a.width;o.width=c,o.height=a.height*u;const h=o.getContext("2d");h==null||h.drawImage(a,0,0,o.width,o.height),o.toBlob(d=>{d?e(d):r(new Error("Canvas is empty"))},"image/jpeg",.8)}},s.onerror=n=>r(n)}),D={generateRecoveryCode:()=>{const t="ABCDEFGHJKLMNPQRSTUVWXYZ23456789",e=new Uint32Array(16);window.crypto.getRandomValues(e);let r="REC";for(let s=0;s<16;s++)s%4===0&&(r+="-"),r+=t[e[s]%t.length];return r},registerSchool:async(t,e,r,s,n,a)=>{try{const l=e.trim().toLowerCase(),{data:o,error:c}=await A.auth.signUp({email:l,password:r.toLowerCase(),options:{data:{school_name:t,phone:s,place:n,recovery_code:a}}});if(c)throw c;if(o.user&&!o.session)return{success:!1,message:"Registration blocked. Please confirm email settings."};if(o.user){let u=null;for(let h=0;h<5;h++){const{data:d}=await A.from("schools").select("id").eq("auth_id",o.user.id).single();if(d){u=d;break}await new Promise(m=>setTimeout(m,500))}return u?{success:!0,schoolId:u.id}:{success:!1,message:"School creation failed."}}return{success:!1,message:"User creation failed"}}catch(l){return console.error(l),{success:!1,message:l.message}}},recoverPassword:async t=>{try{const{error:e}=await A.auth.resetPasswordForEmail(t.trim(),{redirectTo:window.location.origin+"/#/login?reset=true"});if(e)throw e;return{success:!0,message:"Password reset link sent."}}catch(e){return{success:!1,message:e.message}}},resetPasswordWithRecoveryCode:async(t,e,r)=>{try{const{data:s,error:n}=await A.rpc("reset_password_with_code",{email_input:t.trim(),code_input:e.trim(),new_password_input:r.toLowerCase()});if(n)throw n;return s===!0?{success:!0,message:"Password reset successfully!"}:{success:!1,message:"Invalid Email or Recovery Code."}}catch(s){return{success:!1,message:s.message}}},updateUserPassword:async t=>{const{error:e}=await A.auth.updateUser({password:t.toLowerCase()});return{success:!e,message:e==null?void 0:e.message}},getSchoolByIdOrSlug:async t=>{if(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(t)){const{data:r}=await A.from("schools").select("id, name").eq("id",t).maybeSingle();if(r)return r}return await D.getSchoolBySlug(t)},getSchoolBySlug:async t=>{try{const{data:e,error:r}=await A.from("schools").select("id, name").eq("slug",t.trim().toLowerCase()).maybeSingle();return r?null:e}catch{return null}},getSchoolByAdmissionToken:async t=>{try{const{data:e,error:r}=await A.from("schools").select("id, name, allow_public_admission").eq("admission_token",t.trim()).maybeSingle();return r?null:e}catch{return null}},regenerateAdmissionToken:async()=>{const t=Be();if(!t)return{success:!1,message:"Session expired"};const e=new Uint32Array(4);window.crypto.getRandomValues(e);const r=Array.from(e,n=>n.toString(36)).join(""),{error:s}=await A.from("schools").update({admission_token:r}).eq("id",t);return s?{success:!1,message:s.message}:{success:!0,token:r}},updateSchoolSlug:async t=>{const e=Be();if(!e)return{success:!1,message:"Session expired"};const r=t.trim().toLowerCase().replace(/[^a-z0-9-]/g,"");if(r.length<3)return{success:!1,message:"Code too short"};const{data:s}=await A.from("schools").select("id").eq("slug",r).maybeSingle();if(s&&s.id!==e)return{success:!1,message:"Code taken."};const{error:n}=await A.from("schools").update({slug:r}).eq("id",e);return{success:!n,message:n==null?void 0:n.message}},findSchoolByEmailOrName:async t=>{const{data:e}=await A.from("schools").select("id, name, slug").eq("slug",t.toLowerCase()).maybeSingle();if(e)return[e];const{data:r}=await A.from("schools").select("id, name, slug").eq("admin_email",t.toLowerCase()).maybeSingle();if(r)return[r];const{data:s}=await A.from("schools").select("id, name, slug").ilike("name",`%${t}%`).limit(5);return s||[]},login:async(t,e)=>{var r;try{if(t===K.ADMIN){const s=e.email.trim(),{data:n,error:a}=await A.auth.signInWithPassword({email:s,password:e.password.toLowerCase()});if(a)return{success:!1,message:a.message};const{data:l}=await A.from("schools").select("*").eq("auth_id",(r=n.user)==null?void 0:r.id).single();if(l)return localStorage.setItem("school_id",l.id),{success:!0,user:{...l,logoUrl:l.logo_url,themeColor:l.theme_color||"blue"}}}if(t===K.TEACHER){const{data:s}=await A.from("classes").select("name").eq("id",e.classId).single();if(!s)return{success:!1,message:"Class not found"};const{data:n,error:a}=await A.rpc("teacher_login",{cls_name:s.name,pass:e.password.toLowerCase(),schl_id:Be()});if(n&&!a){const l=n;localStorage.setItem("school_id",l.school_id);const{data:o}=await A.from("schools").select("name, place, logo_url, theme_color, is_pro").eq("id",l.school_id).single();return{success:!0,user:{...l,name:l.name,teacherName:l.teacher_name,teacherPhoto:l.teacher_photo,submissionStatus:l.status||"DRAFT",subjects:Zd(l.subjects),schoolName:o==null?void 0:o.name,schoolPlace:o==null?void 0:o.place,schoolLogoUrl:o==null?void 0:o.logo_url,schoolThemeColor:o==null?void 0:o.theme_color,isPro:o==null?void 0:o.is_pro}}}}if(t===K.STUDENT){const{data:s,error:n}=await A.rpc("student_login",{reg_no_in:e.id,pass_in:e.password.toLowerCase(),schl_id:Be()});if(s&&!n){const a=s;localStorage.setItem("school_id",a.school_id);const{data:l}=await A.from("schools").select("logo_url, theme_color").eq("id",a.school_id).single();return{success:!0,user:{...ds(a),schoolLogoUrl:l==null?void 0:l.logo_url,schoolThemeColor:l==null?void 0:l.theme_color}}}}}catch(s){console.error("Login error",s)}return{success:!1,message:"Invalid Credentials"}},createClass:async(t,e,r,s)=>{const n=Be();if(!n)return{success:!1,message:"Session expired"};try{const{error:a}=await A.from("classes").insert([{school_id:n,name:t.trim().toUpperCase(),teacher_password:e.toLowerCase(),teacher_name:r||"Class Teacher",subjects:s,status:"DRAFT"}]);if(a){if(a.code==="23505")return{success:!1,message:"Class name exists."};throw a}return{success:!0}}catch(a){return{success:!1,message:a.message}}},getClasses:async()=>{const t=Be();if(!t)return[];const{data:e}=await A.from("classes").select("*, students(count)").eq("school_id",t).order("name",{ascending:!0});return(e==null?void 0:e.map(r=>{var s;return{...r,teacherName:r.teacher_name,teacherPhoto:r.teacher_photo,submissionStatus:r.status||"DRAFT",subjects:Zd(r.subjects),studentCount:r.students?(s=r.students[0])==null?void 0:s.count:0}}))||[]},updateClassDetails:async(t,e)=>{const r={};e.teacherName!==void 0&&(r.teacher_name=e.teacherName),e.teacherPhoto!==void 0&&(r.teacher_photo=e.teacherPhoto);const{error:s}=await A.from("classes").update(r).eq("id",t);return{success:!s,message:s==null?void 0:s.message}},changeClassPassword:async(t,e)=>{const{error:r}=await A.from("classes").update({teacher_password:e.toLowerCase()}).eq("id",t);return{success:!r,message:r==null?void 0:r.message}},getClassesForLogin:async()=>{const t=Be();if(!t)return[];const{data:e}=await A.from("classes").select("id, name").eq("school_id",t).order("name",{ascending:!0});return e||[]},getClassesForPublic:async t=>{const{data:e}=await A.from("classes").select("id, name").eq("school_id",t).order("name",{ascending:!0});return e||[]},getSchoolProgress:async()=>{const t=Be();if(!t)return[];const{data:e}=await A.from("classes").select("id, name, status, students(count)").eq("school_id",t).order("name",{ascending:!0});return e?await Promise.all(e.map(async r=>{var a,l;const s=((l=(a=r.students)==null?void 0:a[0])==null?void 0:l.count)||0;let n=0;if(s>0){const{data:o}=await A.from("students").select("id").eq("class_id",r.id);if(o&&o.length>0){const{count:c}=await A.from("marks").select("student_id",{count:"exact",head:!0}).in("student_id",o.map(u=>u.id)).neq("total",0);n=c||0}}return{id:r.id,name:r.name,status:r.status||"DRAFT",totalStudents:s,gradedCount:n}})):[]},updateClassSubjects:async(t,e)=>{const{error:r}=await A.from("classes").update({subjects:e}).eq("id",t);return{success:!r,message:r==null?void 0:r.message}},toggleClassSubmission:async(t,e)=>{const{error:r}=await A.from("classes").update({status:e?"SUBMITTED":"DRAFT"}).eq("id",t);return{success:!r,message:r==null?void 0:r.message}},deleteClass:async t=>{try{const{data:e}=await A.from("students").select("id").eq("class_id",t),r=(e==null?void 0:e.map(n=>n.id))||[];r.length>0&&(await A.from("marks").delete().in("student_id",r),await A.from("profile_requests").delete().in("student_id",r),await A.from("students").delete().eq("class_id",t));const{error:s}=await A.from("classes").delete().eq("id",t);if(s)throw s;return{success:!0}}catch(e){return{success:!1,message:e.message}}},createStudent:async(t,e)=>{const r=Be();if(!r)return{success:!1,message:"Session expired"};try{const s={school_id:r,class_id:t,reg_no:e.regNo,name:e.name.toUpperCase(),dob:e.dob,gender:e.gender,father_name:e.fatherName,mother_name:e.motherName,photo_url:e.photoUrl,is_verified:!0};e.rollNo&&(s.roll_no=parseInt(e.rollNo));const{error:n}=await A.from("students").insert([s]);if(n){if(n.code==="23505")return{success:!1,message:"Register Number exists."};throw n}return{success:!0}}catch(s){return{success:!1,message:s.message}}},deleteStudent:async t=>{const{error:e}=await A.from("students").delete().eq("id",t);return{success:!e,message:e==null?void 0:e.message}},publicRegisterStudent:async(t,e,r)=>{const{data:s}=await A.from("schools").select("allow_public_admission").eq("id",t).single();if(s&&s.allow_public_admission===!1)return{success:!1,message:"Admissions closed."};const n={school_id:t,class_id:e,reg_no:r.regNo,name:r.name.toUpperCase(),dob:r.dob,gender:r.gender,father_name:r.fatherName,mother_name:r.motherName,is_verified:!1};r.rollNo&&(n.roll_no=parseInt(r.rollNo));const{error:a}=await A.from("students").insert([n]);return a&&a.code==="23505"?{success:!1,message:"Register Number exists."}:{success:!a,message:a==null?void 0:a.message}},publicSearch:async(t,e)=>{try{const{data:r,error:s}=await A.from("students").select("*").eq("reg_no",t).eq("dob",e).eq("is_verified",!0).limit(1);if(s||!r||r.length===0)return null;const n=ds(r[0]),{data:a}=await A.from("marks").select("*").eq("student_id",n.id).limit(1);return{student:n,marks:a&&a.length>0?El(a[0]):{studentId:n.id,subjects:{},total:0,grade:"N/A",term:"N/A"}}}catch{return null}},getStudentsByClass:async t=>{const{data:e,error:r}=await A.rpc("get_class_students",{cls_id:t});if(!r&&e)return e.map(ds);const{data:s}=await A.from("students").select("*").eq("class_id",t).eq("is_verified",!0).order("roll_no",{ascending:!0,nullsFirst:!1});return(s==null?void 0:s.map(ds))||[]},getStudentNamesForLogin:async t=>{const{data:e,error:r}=await A.rpc("get_class_student_names",{cls_id:t});return!r&&e?e:[]},getPendingAdmissions:async t=>{const{data:e,error:r}=await A.rpc("get_pending_admissions",{cls_id:t});if(!r&&e)return e.map(ds);const{data:s}=await A.from("students").select("*").eq("class_id",t).eq("is_verified",!1).order("created_at",{ascending:!1});return(s==null?void 0:s.map(ds))||[]},verifyStudent:async t=>{const{error:e}=await A.from("students").update({is_verified:!0}).eq("id",t);return{success:!e,message:e==null?void 0:e.message}},rejectAdmission:async t=>{const{error:e}=await A.from("students").delete().eq("id",t);return{success:!e,message:e==null?void 0:e.message}},getMarks:async(t,e)=>{const{data:r,error:s}=await A.rpc("get_student_marks",{stu_id:t,term_in:e});if(!s&&r&&r.length>0)return El(r[0]);const{data:n}=await A.from("marks").select("*").eq("student_id",t).eq("term",e).single();return n?El(n):null},saveMarks:async t=>{const{error:e}=await A.rpc("save_marks",{stu_id:t.studentId,term_in:t.term,sub_json:t.subjects,tot:t.total,grd:t.grade});return{success:!e,message:e==null?void 0:e.message}},createProfileRequest:async(t,e,r)=>{const s=Be(),{error:n}=await A.from("profile_requests").insert([{school_id:s,student_id:t,field:e,new_value:r,status:"PENDING"}]);return{success:!n,message:n==null?void 0:n.message}},getStudentRequests:async t=>{const{data:e}=await A.from("profile_requests").select("*").eq("student_id",t).order("created_at",{ascending:!1});return(e||[]).map(r=>({id:r.id,studentId:r.student_id,field:r.field,newValue:r.new_value,status:r.status,createdAt:r.created_at}))},getPendingRequestsForClass:async t=>{const{data:e}=await D.getStudentsByClass(t);if(!e||e.length===0)return[];const{data:r}=await A.from("profile_requests").select("*").in("student_id",e.map(s=>s.id)).eq("status","PENDING");return r?r.map(s=>{const n=e.find(a=>a.id===s.student_id);return{id:s.id,studentId:s.student_id,studentName:n==null?void 0:n.name,regNo:n==null?void 0:n.regNo,field:s.field,newValue:s.new_value,status:s.status,createdAt:s.created_at}}):[]},resolveProfileRequest:async(t,e)=>{const{error:r}=await A.from("profile_requests").update({status:e}).eq("id",t.id);if(r)return{success:!1,message:r.message};if(e==="APPROVED"){const s=t.field==="fatherName"?"father_name":t.field==="motherName"?"mother_name":t.field==="dob"?"dob":"name",{error:n}=await A.from("students").update({[s]:t.newValue}).eq("id",t.studentId);if(n)return{success:!1,message:n.message}}return{success:!0}},getSchoolConfig:async()=>{const t=Be();if(!t)return null;const{data:e}=await A.from("schools").select("*").eq("id",t).single();return e?{id:e.id,schoolName:e.name,slug:e.slug,sheetUrl:"",licenseKey:e.license_key||"FREE",isPro:e.is_pro||!1,themeColor:e.theme_color||"blue",logoUrl:e.logo_url,expiryDate:e.expiry_date,adminEmail:e.admin_email,phone:e.phone,place:e.place,paymentStatus:e.payment_status||"FREE",transactionRef:e.transaction_ref,allowTeacherSubjectEdit:e.allow_teacher_edit||!1,allowPublicAdmission:e.allow_public_admission??!0,admissionToken:e.admission_token,resultPublishDate:e.result_publish_date,examName:e.exam_name,showPassFailStatus:e.show_pass_fail_status??!0,showGrades:e.show_grades??!0,resultDisplayType:e.result_display_type||"PASS_FAIL",academicYear:e.academic_year||new Date().getFullYear().toString(),sortingMethod:e.sorting_method||"GENDER_ROLL",showRank:e.show_rank??!1}:null},updateSchoolSettings:async t=>{const e=Be();if(!e)return{success:!1,message:"Session expired"};const r={};t.allowTeacherSubjectEdit!==void 0&&(r.allow_teacher_edit=t.allowTeacherSubjectEdit),t.allowPublicAdmission!==void 0&&(r.allow_public_admission=t.allowPublicAdmission),t.resultPublishDate!==void 0&&(r.result_publish_date=t.resultPublishDate),t.schoolName!==void 0&&(r.name=t.schoolName),t.phone!==void 0&&(r.phone=t.phone),t.place!==void 0&&(r.place=t.place),t.themeColor!==void 0&&(r.theme_color=t.themeColor),t.logoUrl!==void 0&&(r.logo_url=t.logoUrl),t.examName!==void 0&&(r.exam_name=t.examName),t.showPassFailStatus!==void 0&&(r.show_pass_fail_status=t.showPassFailStatus),t.resultDisplayType!==void 0&&(r.result_display_type=t.resultDisplayType),t.academicYear!==void 0&&(r.academic_year=t.academicYear),t.sortingMethod!==void 0&&(r.sorting_method=t.sortingMethod),t.showRank!==void 0&&(r.show_rank=t.showRank);const{error:s}=await A.from("schools").update(r).eq("id",e);return{success:!s,message:s==null?void 0:s.message}},uploadImage:async(t,e)=>{const r=Be();if(!r)return{success:!1,message:"Session expired"};try{const s=await xb(t),n=`${r}/${e}/${Date.now()}.jpg`,{error:a}=await A.storage.from("school-branding").upload(n,s,{contentType:"image/jpeg",upsert:!0});if(a)throw a;const{data:l}=A.storage.from("school-branding").getPublicUrl(n);return{success:!0,publicUrl:l.publicUrl}}catch(s){return{success:!1,message:s.message}}},uploadSchoolLogo:async t=>D.uploadImage(t,"logos"),changePassword:async(t,e)=>{const{error:r}=await A.from("students").update({password:e.toLowerCase()}).eq("id",t);return{success:!r,message:r==null?void 0:r.message}},resetStudentPassword:async t=>{const{error:e}=await A.from("students").update({password:null}).eq("id",t);return{success:!e,message:e==null?void 0:e.message}},getSchoolDetailsPublic:async t=>{const{data:e}=await A.from("schools").select("name").eq("id",t).single();return e},activateSchoolProLicenseAuto:async t=>{const e=Be();if(!e)return{success:!1};const r=new Date;r.setFullYear(r.getFullYear()+1);const{error:s}=await A.from("schools").update({is_pro:!0,license_key:`PRO-AUTO-${t.slice(0,6)}`,expiry_date:r.toISOString(),payment_status:"PAID",transaction_ref:t}).eq("id",e);return{success:!s,message:(s==null?void 0:s.message)||"Pro License Activated!"}},activateStudentPremium:async(t,e)=>{const r=new Date;r.setFullYear(r.getFullYear()+1);const{error:s}=await A.from("students").update({is_premium:!0,premium_expiry:r.toISOString()}).eq("id",t);return{success:!s,message:(s==null?void 0:s.message)||"Student Premium Unlocked!"}},requestProUpgrade:async(t,e)=>{const{error:r}=await A.rpc("request_pro_upgrade",{school_id_in:t,trans_ref_in:e});return{success:!r,message:r==null?void 0:r.message}},approveUpgradeRequest:async t=>{const{error:e}=await A.rpc("sa_approve_upgrade",{school_id_in:t});return{success:!e,message:e==null?void 0:e.message}},rejectUpgradeRequest:async t=>{const{error:e}=await A.rpc("sa_reject_upgrade",{school_id_in:t});return{success:!e,message:e==null?void 0:e.message}},activateLicense:async t=>{const e=Be();if(!e)return{success:!1};if(t.startsWith("PRO-")){const r=new Date;return r.setFullYear(r.getFullYear()+1),await A.from("schools").update({is_pro:!0,license_key:t,expiry_date:r.toISOString()}).eq("id",e),{success:!0,message:"Pro License Activated"}}return{success:!1,message:"Invalid Key"}},toggleSchoolStatus:async(t,e)=>{const{error:r}=await A.from("schools").update({is_pro:!e}).eq("id",t);return{success:!r}},getAllSchools:async()=>{const{data:t}=await A.from("schools").select("*").order("created_at",{ascending:!1});return(t||[]).map(e=>({id:e.id,schoolName:e.name,adminEmail:e.admin_email,isPro:e.is_pro,paymentStatus:e.payment_status||"FREE",transactionRef:e.transaction_ref,phone:e.phone,place:e.place,createdAt:e.created_at,sheetUrl:"",licenseKey:e.license_key||"FREE",themeColor:e.theme_color||"indigo",logoUrl:e.logo_url}))},deleteSchool:async t=>{const{error:e}=await A.from("schools").delete().eq("id",t);return{success:!e,message:e==null?void 0:e.message}}},ds=t=>({id:t.id,regNo:t.reg_no,rollNo:t.roll_no,name:t.name,classId:t.class_id,dob:t.dob,gender:t.gender,fatherName:t.father_name,motherName:t.mother_name,isVerified:t.is_verified,photoUrl:t.photo_url,isPremium:t.is_premium||!1,premiumExpiry:t.premium_expiry}),El=t=>({studentId:t.student_id,term:t.term,subjects:typeof t.subjects=="string"?JSON.parse(t.subjects):t.subjects,total:t.total,grade:t.grade}),vb=()=>{const t=Zt(),[e,r]=b.useState(!1),[s,n]=b.useState(""),[a,l]=b.useState(""),[o,c]=b.useState(!1),[u,h]=b.useState(null),[d,m]=b.useState({schoolName:"",email:"",password:"",confirmPassword:"",phone:"",place:""});b.useEffect(()=>{l(D.generateRecoveryCode())},[]);const g=async w=>{if(w.preventDefault(),n(""),d.password!==d.confirmPassword){n("Passwords do not match!");return}if(!o){n("Please copy the Recovery Code and check the box to proceed.");return}const f=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,p=d.email.trim();if(!f.test(p)){n("Please enter a valid email address (e.g., admin@school.com)");return}r(!0);const x=await D.registerSchool(d.schoolName.trim(),p,d.password,d.phone.trim(),d.place.trim(),a);r(!1),x.success&&x.schoolId?h({schoolId:x.schoolId,name:d.schoolName}):n("Registration Failed: "+(x.message||"Unknown error"))},v=()=>{navigator.clipboard.writeText(a),alert("Code Copied! Save it somewhere safe.")},y=()=>{if(!u)return;const{url:w,key:f}=gb();localStorage.setItem("sb_url",w),localStorage.setItem("sb_key",f),localStorage.setItem("school_id",u.schoolId),t("/login")};return u?i.jsx("div",{className:"flex items-center justify-center min-h-[80vh] p-4",children:i.jsxs(G,{className:"max-w-lg w-full text-center py-12 px-6 border-green-200 dark:border-green-900 shadow-2xl animate-fade-in-up",children:[i.jsx("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-6",children:i.jsx(Dt,{className:"w-10 h-10 text-green-600 dark:text-green-400"})}),i.jsx("h2",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-2",children:"Registration Successful!"}),i.jsxs("p",{className:"text-lg text-slate-600 dark:text-slate-300 mb-8",children:["Welcome to ",i.jsx("b",{children:u.name})]}),i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-6 rounded-xl border border-blue-100 dark:border-blue-800 mb-8",children:[i.jsx("h3",{className:"font-bold text-blue-900 dark:text-blue-300 mb-2",children:"What happens next?"}),i.jsxs("p",{className:"text-sm text-blue-800/80 dark:text-blue-300/80",children:["Click below to enter your dedicated School Portal. Your unique link will be generated automatically.",i.jsx("b",{children:"Bookmark it"})," when you land on the login page!"]})]}),i.jsxs(H,{onClick:y,className:"w-full text-lg py-4 shadow-xl shadow-blue-200 dark:shadow-none",children:["Enter My School Portal ",i.jsx(Nm,{className:"w-5 h-5 ml-2"})]})]})}):i.jsx("div",{className:"flex items-center justify-center p-4 py-12",children:i.jsxs(G,{className:"max-w-md w-full shadow-xl border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"w-16 h-16 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(zc,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),i.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Register Your School"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Create your result portal in seconds."})]}),s&&i.jsxs("div",{className:"mb-6 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 p-3 rounded-lg text-sm border border-red-100 dark:border-red-800 text-center flex items-center justify-center gap-2",children:[i.jsx("span",{className:"font-bold",children:"Error:"})," ",s]}),i.jsxs("form",{onSubmit:g,className:"space-y-5",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 block mb-1",children:"School Name"}),i.jsx(J,{placeholder:"e.g. Govt HSS Trivandrum",value:d.schoolName,onChange:w=>m({...d,schoolName:w.target.value}),required:!0})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 block mb-1",children:"Place / City"}),i.jsx(J,{placeholder:"e.g. Kochi",value:d.place,onChange:w=>m({...d,place:w.target.value}),required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 block mb-1",children:"Phone Number"}),i.jsx(J,{placeholder:"e.g. 9846...",value:d.phone,onChange:w=>m({...d,phone:w.target.value}),required:!0})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 block mb-1",children:"Admin Email"}),i.jsx(J,{type:"email",placeholder:"admin@school.com",value:d.email,onChange:w=>m({...d,email:w.target.value.trim()}),required:!0})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 block mb-1",children:"Password"}),i.jsx(J,{type:"password",placeholder:"",value:d.password,onChange:w=>m({...d,password:w.target.value}),required:!0,minLength:6})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 block mb-1",children:"Confirm"}),i.jsx(J,{type:"password",placeholder:"",value:d.confirmPassword,onChange:w=>m({...d,confirmPassword:w.target.value}),required:!0,minLength:6})]})]}),i.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/10 p-4 rounded-lg border border-yellow-200 dark:border-yellow-800",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2 text-yellow-800 dark:text-yellow-300 font-bold text-sm",children:[i.jsx(Pm,{className:"w-4 h-4"})," Save this Recovery Code"]}),i.jsxs("div",{className:"flex gap-2 mb-2",children:[i.jsx("div",{className:"flex-1 bg-white dark:bg-slate-800 border border-yellow-300 dark:border-yellow-700 p-2 rounded text-center font-mono font-bold tracking-wider text-slate-800 dark:text-slate-200 break-all text-xs md:text-sm",children:a}),i.jsx("button",{type:"button",onClick:v,className:"p-2 bg-yellow-200 dark:bg-yellow-800 text-yellow-800 dark:text-yellow-200 rounded hover:bg-yellow-300 dark:hover:bg-yellow-700 transition-colors flex-shrink-0",title:"Copy Code",children:i.jsx(Co,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",id:"copiedCheck",className:"w-4 h-4 accent-blue-600 rounded",checked:o,onChange:w=>c(w.target.checked)}),i.jsx("label",{htmlFor:"copiedCheck",className:"text-xs text-slate-600 dark:text-slate-400 cursor-pointer select-none",children:"I have copied and saved this code securely."})]})]}),i.jsx(H,{type:"submit",className:"w-full",disabled:e,children:e?i.jsxs("span",{className:"flex items-center justify-center gap-2",children:[i.jsx(Ht,{className:"animate-spin w-4 h-4"})," Registering..."]}):"Register School"})]}),i.jsx("div",{className:"mt-6 text-center",children:i.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:["Already have an account? ",i.jsx("span",{onClick:()=>t("/login"),className:"text-blue-600 dark:text-blue-400 font-semibold cursor-pointer hover:underline",children:"Login here"})]})})]})})},yb=({onLogin:t})=>{const[e,r]=b.useState(K.STUDENT),[s,n]=b.useState(!1),[a,l]=b.useState(""),[o,c]=b.useState({id:"",password:"",classId:""}),[u,h]=b.useState(!1),[d,m]=b.useState("EMAIL"),[g,v]=b.useState(""),[y,w]=b.useState(""),[f,p]=b.useState(""),[x,k]=b.useState(!1),[N,j]=b.useState({type:"",text:""}),[S,T]=b.useState(!1),[W,P]=b.useState(""),[X,ue]=b.useState(!1),[he,vt]=b.useState(""),[Q,Ce]=b.useState([]),[et,R]=b.useState(!1),[M,V]=b.useState([]),[te,ne]=b.useState([]),[Ke,we]=b.useState(!1),fe=Zt(),Re=Zr();b.useEffect(()=>{const L=Re.state;L!=null&&L.email&&(r(K.ADMIN),c(es=>({...es,id:L.email}))),(L==null?void 0:L.role)==="ADMIN"&&r(K.ADMIN);const ae=new URLSearchParams(Re.search);(Re.hash.includes("type=recovery")||ae.get("reset")==="true")&&T(!0);const yt=ae.get("s");yt?Rt(yt):localStorage.getItem("school_id")||ue(!0)},[Re]),b.useEffect(()=>{!!!localStorage.getItem("school_id")&&(e===K.STUDENT||e===K.TEACHER)&&ue(!0)},[e]),b.useEffect(()=>{(e===K.STUDENT||e===K.TEACHER)&&!X&&$t()},[e,X]);const Rt=async L=>{n(!0);const ae=await D.getSchoolByIdOrSlug(L);n(!1),ae?(localStorage.setItem("school_id",ae.id),ue(!1)):ue(!0)},$t=async()=>{we(!0);const L=await D.getClassesForLogin();V(L),we(!1)},tt=async L=>{const ae=L.target.value;if(c({...o,classId:ae,id:""}),ne([]),ae&&e===K.STUDENT){we(!0);const yt=await D.getStudentNamesForLogin(ae);ne(yt),we(!1)}},Mt=async L=>{L.preventDefault(),R(!0);const ae=await D.findSchoolByEmailOrName(he);Ce(ae),R(!1)},Cr=L=>{localStorage.setItem("school_id",L),ue(!1),r(K.STUDENT),$t()},E=async L=>{if(L.preventDefault(),n(!0),l(""),e===K.ADMIN&&o.id.trim()==="owner@admin.com"&&o.password==="master123"){n(!1),t(K.SUPER_ADMIN,{name:"Super Admin",id:"owner"}),fe("/dashboard/superadmin");return}let ae={};if(e===K.ADMIN)ae={email:o.id.trim(),password:o.password};else if(e===K.TEACHER)ae={classId:o.classId,password:o.password};else if(e===K.STUDENT){const es=te.find(Fi=>Fi.id===o.id);ae={id:es?es.reg_no:o.id,password:o.password}}const yt=await D.login(e,ae);n(!1),yt.success?(t(e,yt.user),e===K.TEACHER?fe("/dashboard/teacher"):e===K.STUDENT?fe("/dashboard/student"):fe("/dashboard/admin")):l(yt.message||"Invalid Login Credentials.")},me=async L=>{L.preventDefault(),j({type:"",text:""}),k(!0);let ae;if(d==="EMAIL"){if(!g){k(!1);return}ae=await D.recoverPassword(g)}else{if(!g||!y||!f){j({type:"error",text:"All fields are required"}),k(!1);return}ae=await D.resetPasswordWithRecoveryCode(g,y,f)}k(!1),ae.success?(j({type:"success",text:ae.message||"Success!"}),d==="CODE"&&setTimeout(()=>{h(!1),c({...o,id:g,password:f})},2e3)):j({type:"error",text:"Error: "+ae.message})},rt=async L=>{L.preventDefault(),k(!0);const ae=await D.updateUserPassword(W);k(!1),ae.success?(alert("Password updated! Please login with your new password."),T(!1),fe("/login")):alert("Failed: "+ae.message)},Ge=L=>`flex-1 py-2 rounded-md text-xs md:text-sm font-medium transition-all flex items-center justify-center gap-2 ${L?"bg-white dark:bg-slate-700 text-blue-600 dark:text-blue-400 shadow-sm ring-1 ring-slate-200 dark:ring-slate-600":"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200"}`;return S?i.jsx("div",{className:"flex items-center justify-center py-12 px-4",children:i.jsxs(G,{className:"w-full max-w-md shadow-lg border-slate-200 dark:border-slate-700",children:[i.jsx("h2",{className:"text-xl font-bold text-center mb-4 text-slate-900 dark:text-white",children:"Set New Password"}),i.jsxs("form",{onSubmit:rt,className:"space-y-4",children:[i.jsx(J,{type:"password",placeholder:"New Password",value:W,onChange:L=>P(L.target.value),required:!0,minLength:6}),i.jsx(H,{type:"submit",className:"w-full",disabled:x,children:x?"Updating...":"Update Password"})]})]})}):X?i.jsx("div",{className:"flex items-center justify-center py-12 px-4",children:i.jsxs(G,{className:"w-full max-w-md shadow-lg border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(kd,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),i.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Find Your School"}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:["Enter your ",i.jsx("b",{children:"School Name"}),", ",i.jsx("b",{children:"Short Code"}),", or Admin Email."]})]}),i.jsxs("form",{onSubmit:Mt,className:"space-y-4",children:[i.jsx(J,{placeholder:"e.g. Oxford Public School or ghss-tvm",value:he,onChange:L=>vt(L.target.value),autoFocus:!0}),i.jsx(H,{type:"submit",className:"w-full flex items-center justify-center gap-2",disabled:et,children:et?"Searching...":i.jsxs(i.Fragment,{children:[i.jsx(Wc,{className:"w-4 h-4"})," Search School"]})})]}),Q.length>0&&i.jsxs("div",{className:"mt-4 space-y-2 max-h-48 overflow-y-auto",children:[i.jsx("p",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Search Results:"}),Q.map(L=>i.jsxs("div",{onClick:()=>Cr(L.id),className:"p-3 bg-slate-50 dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 cursor-pointer hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors",children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-white text-sm",children:L.name}),L.slug&&i.jsxs("span",{className:"text-xs bg-slate-200 dark:bg-slate-700 px-1 rounded text-slate-600 dark:text-slate-300",children:["Code: ",L.slug]})]},L.id))]}),Q.length===0&&!et&&he&&i.jsx("p",{className:"text-center text-sm text-slate-400 mt-4",children:"No schools found."}),i.jsxs("div",{className:"mt-8 pt-6 border-t border-slate-100 dark:border-slate-700 text-center",children:[i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"Are you the School Admin?"}),i.jsxs(H,{variant:"secondary",onClick:()=>{ue(!1),r(K.ADMIN)},className:"w-full flex items-center justify-center gap-2",children:[i.jsx(Bs,{className:"w-4 h-4"})," Login as Admin"]})]})]})}):u?i.jsx("div",{className:"flex items-center justify-center py-12 px-4",children:i.jsxs(G,{className:"w-full max-w-md shadow-lg border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Os,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),i.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Reset Password"}),i.jsxs("div",{className:"flex justify-center gap-4 mt-4 text-sm font-medium border-b border-slate-200 dark:border-slate-700 pb-2",children:[i.jsx("button",{onClick:()=>{m("EMAIL"),j({type:"",text:""})},className:`pb-2 px-2 transition-colors ${d==="EMAIL"?"text-blue-600 border-b-2 border-blue-600":"text-slate-500"}`,children:"Via Email Link"}),i.jsx("button",{onClick:()=>{m("CODE"),j({type:"",text:""})},className:`pb-2 px-2 transition-colors ${d==="CODE"?"text-blue-600 border-b-2 border-blue-600":"text-slate-500"}`,children:"Via Recovery Code"})]})]}),i.jsxs("form",{onSubmit:me,className:"space-y-4",children:[d==="EMAIL"?i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 text-center",children:"We will send a reset link to your registered email."}),i.jsx(J,{type:"email",placeholder:"admin@school.com",value:g,onChange:L=>v(L.target.value),required:!0})]}):i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 text-center",children:"Enter your email and the recovery code you saved during registration."}),i.jsx(J,{type:"email",placeholder:"admin@school.com",value:g,onChange:L=>v(L.target.value),required:!0}),i.jsx(J,{placeholder:"Recovery Code (e.g. REC-XXXX-XXXX)",value:y,onChange:L=>w(L.target.value),required:!0}),i.jsx(J,{type:"password",placeholder:"New Password",value:f,onChange:L=>p(L.target.value),required:!0,minLength:6})]}),N.text&&i.jsx("div",{className:`p-3 rounded text-sm text-center ${N.type==="success"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:N.text}),i.jsx(H,{type:"submit",className:"w-full",disabled:x,children:x?"Processing...":d==="EMAIL"?"Send Recovery Link":"Reset Password"}),i.jsxs("button",{type:"button",onClick:()=>h(!1),className:"w-full text-center text-sm text-slate-500 hover:text-slate-700 dark:hover:text-slate-300 mt-4 flex items-center justify-center gap-2",children:[i.jsx(Sm,{className:"w-4 h-4"})," Back to Login"]})]})]})}):i.jsx("div",{className:"flex items-center justify-center py-12 px-4",children:i.jsxs(G,{className:"w-full max-w-md shadow-lg border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"text-center mb-8 relative",children:[localStorage.getItem("school_id")&&i.jsx("button",{onClick:()=>{localStorage.removeItem("school_id"),ue(!0)},className:"absolute right-0 top-0 text-xs text-blue-600 hover:underline",children:"Switch School"}),i.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Portal Login"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"Access your school dashboard"})]}),i.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-800 p-1 rounded-lg mb-6 border border-slate-200 dark:border-slate-700",children:[i.jsxs("button",{onClick:()=>r(K.STUDENT),className:Ge(e===K.STUDENT),children:[i.jsx(Vc,{className:"w-4 h-4"})," Student"]}),i.jsxs("button",{onClick:()=>r(K.TEACHER),className:Ge(e===K.TEACHER),children:[i.jsx(wr,{className:"w-4 h-4"})," Teacher"]}),i.jsxs("button",{onClick:()=>r(K.ADMIN),className:Ge(e===K.ADMIN),children:[i.jsx(kd,{className:"w-4 h-4"})," Admin"]})]}),a&&i.jsx("div",{className:"mb-4 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 p-3 rounded-lg text-sm border border-red-100 dark:border-red-800 text-center",children:a}),i.jsxs("form",{onSubmit:E,className:"space-y-4",children:[e===K.TEACHER&&i.jsxs("div",{children:[i.jsx("label",{className:"text-slate-700 dark:text-slate-300 font-medium text-sm mb-1 block",children:"Select Class"}),Ke&&M.length===0?i.jsx("div",{className:"text-xs text-slate-500",children:"Loading classes..."}):M.length===0?i.jsx("div",{className:"text-xs text-red-500",children:"No classes found. Please use valid School Link."}):i.jsxs(qr,{value:o.classId,onChange:tt,required:!0,children:[i.jsx("option",{value:"",children:"-- Choose Class --"}),M.map(L=>i.jsx("option",{value:L.id,children:L.name},L.id))]})]}),e===K.STUDENT&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-slate-700 dark:text-slate-300 font-medium text-sm mb-1 block",children:"1. Select Class"}),Ke&&M.length===0?i.jsx("div",{className:"text-xs text-slate-500",children:"Loading classes..."}):M.length===0?i.jsx("div",{className:"text-xs text-red-500",children:"No classes found. Please use valid School Link."}):i.jsxs(qr,{value:o.classId,onChange:tt,required:!0,children:[i.jsx("option",{value:"",children:"-- Choose --"}),M.map(L=>i.jsx("option",{value:L.id,children:L.name},L.id))]})]}),o.classId&&i.jsxs("div",{className:"animate-fade-in-up",children:[i.jsx("label",{className:"text-slate-700 dark:text-slate-300 font-medium text-sm mb-1 block",children:"2. Select Your Name"}),Ke?i.jsx("div",{className:"text-xs text-slate-500",children:"Loading names..."}):i.jsxs(qr,{value:o.id,onChange:L=>c({...o,id:L.target.value}),required:!0,children:[i.jsx("option",{value:"",children:"-- Choose Name --"}),te.map(L=>i.jsxs("option",{value:L.id,children:[L.name," (",L.reg_no,")"]},L.id))]})]})]}),e===K.ADMIN&&i.jsxs("div",{children:[i.jsx("label",{className:"text-slate-700 dark:text-slate-300 font-medium text-sm mb-1 block",children:"Admin Email"}),i.jsx(J,{type:"email",placeholder:"admin@school.com",value:o.id,onChange:L=>c({...o,id:L.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-slate-700 dark:text-slate-300 font-medium text-sm mb-1 block",children:e===K.STUDENT?"3. Date of Birth":"Password"}),i.jsx(J,{type:e===K.STUDENT?"date":"password",placeholder:e===K.STUDENT?"YYYY-MM-DD":"",value:o.password,onChange:L=>c({...o,password:L.target.value})}),e===K.ADMIN&&i.jsx("div",{className:"text-right mt-1",children:i.jsxs("button",{type:"button",onClick:()=>h(!0),className:"text-xs text-blue-600 dark:text-blue-400 hover:underline flex items-center gap-1 justify-end ml-auto",children:[i.jsx(Tm,{className:"w-3 h-3"})," Forgot Password?"]})})]}),i.jsx(H,{type:"submit",className:"w-full mt-2",disabled:s,children:s?"Authenticating...":"Login"})]}),e===K.ADMIN&&i.jsx("div",{className:"mt-4 text-center",children:i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["New School? ",i.jsx("span",{onClick:()=>fe("/setup"),className:"text-blue-600 dark:text-blue-400 cursor-pointer font-bold hover:underline",children:"Register Here"})]})})]})})},wb=({user:t})=>{const[e,r]=b.useState("students"),[s,n]=b.useState([]),[a,l]=b.useState([]),[o,c]=b.useState({}),[u,h]=b.useState(!1),[d,m]=b.useState(t.subjects),[g,v]=b.useState(t.submissionStatus==="SUBMITTED"),[y,w]=b.useState(!1),[f,p]=b.useState({name:t.teacherName||"",photo:t.teacherPhoto||""}),[x,k]=b.useState(!1),[N,j]=b.useState(!1),[S,T]=b.useState(null),[W,P]=b.useState(!1),[X,ue]=b.useState(""),[he,vt]=b.useState({name:"",max:"50",pass:"18"}),[Q,Ce]=b.useState({regNo:"",rollNo:"",name:"",dob:"",gender:"",fatherName:"",motherName:"",photoUrl:""}),[et,R]=b.useState(!1),[M,V]=b.useState(""),[te,ne]=b.useState(""),[Ke,we]=b.useState({name:!1,dob:!1,gender:!1}),[fe,Re]=b.useState(null),[Rt,$t]=b.useState(!1);b.useEffect(()=>{tt()},[]),b.useEffect(()=>{if(te){const _=setTimeout(()=>ne(""),3e3);return()=>clearTimeout(_)}},[te]),b.useEffect(()=>{const _=O=>{e==="marks"&&!g&&(O.preventDefault(),O.returnValue="")};return window.addEventListener("beforeunload",_),()=>window.removeEventListener("beforeunload",_)},[e,g]);const tt=async()=>{h(!0);const _=await D.getSchoolConfig();T(_),w((_==null?void 0:_.allowTeacherSubjectEdit)??!1);const O=await D.getStudentsByClass(t.id);n(O);const F={};for(const Z of O){const Ue=await D.getMarks(Z.id,"Term 1");Ue?F[Z.id]=Ue:F[Z.id]={studentId:Z.id,subjects:d.reduce((re,er)=>({...re,[er.name]:0}),{}),total:0,grade:"F",term:"Term 1"}}c(F);const q=await D.getPendingAdmissions(t.id);l(q),q.length>0&&r("students"),h(!1)},Mt=_=>{Q[_]?we(O=>({...O,[_]:!1})):we(O=>({...O,[_]:!0}))},Cr=(_,O,F)=>{if(g)return;if(F===""){c(Ue=>{const re={...Ue[_]};return re.subjects={...re.subjects,[O]:""},{...Ue,[_]:re}});return}const q=parseInt(F);if(isNaN(q)&&F.toUpperCase()!=="AB")return;const Z=F.toUpperCase()==="AB"?"AB":q;c(Ue=>{const re={...Ue[_]};re.subjects={...re.subjects,[O]:Z};const er=Object.values(re.subjects).reduce((Zn,ss)=>Zn+(typeof ss=="number"?ss:0),0);re.total=er;let zi=0,ru=!1;Object.keys(re.subjects).forEach(Zn=>{const ss=d.find(Ys=>Ys.name===Zn);if(ss){zi+=ss.maxMarks;const Ys=re.subjects[Zn];(typeof Ys=="number"?Ys:0)<ss.passMarks&&(ru=!0)}});const rs=zi>0?er/zi*100:0;return rs>=90?re.grade="A+":rs>=80?re.grade="A":rs>=70?re.grade="B+":rs>=60?re.grade="B":rs>=50?re.grade="C+":rs>=40?re.grade="C":re.grade="D",re.resultStatus=ru?"FAILED":"PASS",(re.grade==="D"||re.grade==="F")&&(re.resultStatus="FAILED"),{...Ue,[_]:re}})},E=async()=>{h(!0);for(const _ of Object.values(o))await D.saveMarks(_);h(!1),alert("All marks saved successfully!")},me=async(_,O)=>{if(O==="APPROVE"){const F=await D.verifyStudent(_);F.success?(tt(),l(q=>q.filter(Z=>Z.id!==_))):alert(F.message)}else{if(!window.confirm("Reject this admission?"))return;(await D.rejectAdmission(_)).success&&l(q=>q.filter(Z=>Z.id!==_))}},rt=async()=>{if(!he.name)return;const _=parseInt(he.max)||50,O=parseInt(he.pass)||18,F=[...d,{name:he.name,maxMarks:_,passMarks:O}];(await D.updateClassSubjects(t.id,F)).success?(m(F),vt({name:"",max:"50",pass:"18"}),tt()):alert("Failed to add subject")},Ge=async _=>{if(!window.confirm("Delete this subject? Existing marks for this subject will be hidden."))return;const O=[...d];O.splice(_,1),(await D.updateClassSubjects(t.id,O)).success&&(m(O),tt())},L=async()=>{(await D.updateClassDetails(t.id,{teacherName:f.name,teacherPhoto:f.photo})).success?k(!1):alert("Failed update")},ae=async()=>{if(!X||X.length<4){alert("Password too short");return}const _=await D.changeClassPassword(t.id,X);_.success?(alert("Password updated!"),P(!1),ue("")):alert("Failed: "+_.message)},yt=async(_,O)=>{if(!_.target.files||_.target.files.length===0)return;if(!t.isPro){alert("Photo upload is an Elite/Pro feature.");return}j(!0);const F=_.target.files[0],q=await D.uploadImage(F,O==="TEACHER"?"teachers":"students");j(!1),q.success&&q.publicUrl?O==="TEACHER"?p(Z=>({...Z,photo:q.publicUrl})):Ce(Z=>({...Z,photoUrl:q.publicUrl})):alert("Upload failed: "+q.message)},es=async _=>{_.preventDefault(),V(""),ne(""),we({name:!1,dob:!1,gender:!1});let O=!1;if(Q.name||(we(q=>({...q,name:!0})),O=!0),Q.dob||(we(q=>({...q,dob:!0})),O=!0),Q.gender||(we(q=>({...q,gender:!0})),O=!0),O){V(" Please fill Name, DOB & Gender!");return}R(!0);const F=await D.createStudent(t.id,Q);if(R(!1),F.success){const q=Q.name;ne(` ${q} Added Successfully! Ready for next.`),Ce({regNo:"",rollNo:"",name:"",dob:"",gender:"",fatherName:"",motherName:"",photoUrl:""}),tt()}else alert("Failed: "+F.message)},eu=async(_,O)=>{if(!window.confirm(`Delete ${O}?`))return;const F=await D.deleteStudent(_);F.success?tt():alert("Failed: "+F.message)},Fi=async()=>{if(g){if(!window.confirm("Unlock results?"))return;(await D.toggleClassSubmission(t.id,!1)).success&&v(!1)}else{if(!window.confirm("Verify & Submit to Admin?"))return;(await D.toggleClassSubmission(t.id,!0)).success&&(v(!0),alert("Submitted!"))}},ts={total:s.length,male:s.filter(_=>_.gender==="Male").length,female:s.filter(_=>_.gender==="Female").length},Bp=()=>{const _=(S==null?void 0:S.sortingMethod)||"GENDER_ROLL";return[...s].sort((O,F)=>_==="GENDER_ROLL"?O.gender==="Male"&&F.gender!=="Male"?-1:O.gender!=="Male"&&F.gender==="Male"?1:(O.rollNo||9999)-(F.rollNo||9999):_==="ROLL_ONLY"?(O.rollNo||9999)-(F.rollNo||9999):_==="NAME_ONLY"?O.name.localeCompare(F.name):0)},tu=(_,O)=>{if(O)return"FAILED";const F=(S==null?void 0:S.resultDisplayType)||"PASS_FAIL";if(F==="PASS_FAIL")return"PASSED";if(F==="CLASS_DISTINCTION"){let q=0;Object.keys(_.subjects).forEach(Ue=>{const re=d.find(er=>er.name===Ue);re&&(q+=re.maxMarks)});const Z=q>0?_.total/q*100:0;return Z>=80?"DISTINCTION":Z>=60?"FIRST CLASS":Z>=50?"SECOND CLASS":"PASSED"}if(F==="GRADE_ONLY")return`GRADE: ${_.grade}`;if(F==="PERCENTAGE"){let q=0;return Object.keys(_.subjects).forEach(Ue=>{const re=d.find(er=>er.name===Ue);re&&(q+=re.maxMarks)}),`${(q>0?_.total/q*100:0).toFixed(1)}%`}return"PASSED"},Bi=b.useMemo(()=>{if(!(S!=null&&S.showRank))return{};const _=[...s].map(F=>{const q=o[F.id];return{id:F.id,total:(q==null?void 0:q.total)||0}}).sort((F,q)=>q.total-F.total),O={};return _.forEach((F,q)=>{O[F.id]=q+1}),O},[s,o,S==null?void 0:S.showRank]),zp=()=>{if(e==="students")return i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"flex items-center gap-1 bg-blue-50 dark:bg-blue-900/40 px-2 py-1 rounded",title:"Boys",children:[i.jsx("img",{src:"https://api.dicebear.com/7.x/avataaars/svg?seed=Felix&gender=male",className:"w-4 h-4 rounded-full",alt:"B"}),i.jsx("span",{className:"text-xs font-bold text-blue-700 dark:text-blue-300",children:ts.male})]}),i.jsxs("div",{className:"flex items-center gap-1 bg-pink-50 dark:bg-pink-900/40 px-2 py-1 rounded",title:"Girls",children:[i.jsx("img",{src:"https://api.dicebear.com/7.x/avataaars/svg?seed=Aneka&gender=female",className:"w-4 h-4 rounded-full",alt:"G"}),i.jsx("span",{className:"text-xs font-bold text-pink-700 dark:text-pink-300",children:ts.female})]}),i.jsxs("div",{className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded",title:"Total",children:[i.jsx(fi,{className:"w-3 h-3 text-slate-600 dark:text-slate-400"}),i.jsx("span",{className:"text-xs font-bold text-slate-700 dark:text-slate-300",children:ts.total})]})]});if(e==="marks"){const _=Object.values(o).filter(O=>O.total>0).length;return i.jsxs("div",{className:"flex items-center gap-2 bg-slate-100 dark:bg-slate-700 px-3 py-1 rounded text-xs",children:[i.jsx("span",{className:"text-slate-500 font-bold uppercase",children:"Progress:"}),i.jsxs("span",{className:`font-bold ${_===ts.total?"text-green-600":"text-slate-800 dark:text-slate-200"}`,children:[_," / ",ts.total]})]})}else if(e==="subjects")return i.jsxs("div",{className:"flex items-center gap-2 bg-slate-100 dark:bg-slate-700 px-3 py-1 rounded text-xs",children:[i.jsx(Ev,{className:"w-3 h-3 text-slate-500"}),i.jsxs("span",{className:"font-bold",children:[d.length," Subjects"]})]});return null},Xn=Bp();if(Rt)return i.jsxs("div",{className:"fixed inset-0 z-50 bg-white overflow-auto",children:[i.jsx("style",{children:`
                @media print {
                  @page {
                    size: A4;
                    margin: 1cm;
                  }
                  body {
                    -webkit-print-color-adjust: exact;
                  }
                }
              `}),i.jsxs("div",{className:"p-8 max-w-[210mm] mx-auto min-h-screen",children:[i.jsxs("div",{className:"flex justify-between items-start mb-6 print:hidden",children:[i.jsxs(H,{variant:"secondary",onClick:()=>$t(!1),children:[i.jsx(Sm,{className:"w-4 h-4 mr-2"})," Back to Dashboard"]}),i.jsx("div",{className:"flex gap-2",children:i.jsxs(H,{onClick:()=>window.print(),className:"bg-blue-600",children:[i.jsx(xl,{className:"w-4 h-4 mr-2"})," Print / Save PDF"]})})]}),i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("h1",{className:"text-3xl font-bold uppercase tracking-wide",children:t.schoolName||"SCHOOL NAME"}),i.jsx("p",{className:"text-lg font-medium",children:t.schoolPlace||"Place"}),i.jsx("div",{className:"mt-4 border-b-2 border-black inline-block px-4",children:i.jsxs("h2",{className:"text-xl font-bold uppercase",children:["Class Register: ",t.name]})}),i.jsxs("p",{className:"text-sm mt-2",children:["Class Teacher: ",f.name," | Year: ",(S==null?void 0:S.academicYear)||new Date().getFullYear()]})]}),i.jsxs("table",{className:"w-full text-left border-collapse border border-black text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-slate-100",children:[i.jsx("th",{className:"border border-black p-2 w-10 text-center",children:"No."}),i.jsx("th",{className:"border border-black p-2 w-12 text-center",children:"Roll"}),i.jsx("th",{className:"border border-black p-2 w-16",children:"Reg No"}),i.jsx("th",{className:"border border-black p-2",children:"Student Name"}),i.jsx("th",{className:"border border-black p-2 w-20",children:"Gender"}),i.jsx("th",{className:"border border-black p-2 w-24",children:"DOB"}),i.jsx("th",{className:"border border-black p-2",children:"Parent's Name"}),i.jsx("th",{className:"border border-black p-2 w-24",children:"Signature"}),i.jsx("th",{className:"border border-black p-2 w-32",children:"Remarks"})]})}),i.jsx("tbody",{children:Xn.map((_,O)=>i.jsxs("tr",{children:[i.jsx("td",{className:"border border-black p-2 text-center",children:O+1}),i.jsx("td",{className:"border border-black p-2 text-center font-bold",children:_.rollNo||"-"}),i.jsx("td",{className:"border border-black p-2 font-mono",children:_.regNo||"-"}),i.jsx("td",{className:"border border-black p-2 font-bold uppercase",children:_.name}),i.jsx("td",{className:"border border-black p-2",children:_.gender}),i.jsx("td",{className:"border border-black p-2",children:_.dob}),i.jsx("td",{className:"border border-black p-2",children:_.fatherName}),i.jsx("td",{className:"border border-black p-2"}),i.jsx("td",{className:"border border-black p-2"})]},_.id))})]}),i.jsxs("div",{className:"mt-12 flex justify-between pt-12",children:[i.jsx("div",{className:"border-t border-black px-8 pt-2",children:"Class Teacher Signature"}),i.jsx("div",{className:"border-t border-black px-8 pt-2",children:"Headmaster Signature"})]})]})]});if(fe){const _=o[fe.id],O=(_==null?void 0:_.resultStatus)==="FAILED",F=tu(_,O),q=Bi[fe.id];return i.jsxs("div",{className:"fixed inset-0 z-50 bg-white flex flex-col items-center justify-center p-4",children:[i.jsxs("div",{className:"w-full max-w-sm border-2 border-slate-800 p-6 rounded-xl text-center print:border-2 print:max-w-full",children:[i.jsxs("div",{className:"mb-4",children:[i.jsxs("h2",{className:"text-xl font-bold uppercase tracking-widest",children:[t.name," Report Card"]}),i.jsxs("p",{className:"text-xs text-slate-500",children:["Academic Year ",(S==null?void 0:S.academicYear)||new Date().getFullYear()]})]}),fe.photoUrl?i.jsx("img",{src:fe.photoUrl,alt:"Student",className:"w-24 h-24 rounded-full mx-auto mb-4 object-cover border-2 border-slate-200"}):i.jsx("div",{className:`w-20 h-20 ${fe.gender==="Male"?"bg-blue-50":"bg-pink-50"} rounded-full mx-auto mb-4 flex items-center justify-center`,children:fe.gender==="Male"?i.jsx(wr,{className:"w-8 h-8 text-blue-500"}):i.jsx(wr,{className:"w-8 h-8 text-pink-500"})}),i.jsx("h1",{className:"text-2xl font-bold mb-1",children:fe.name}),i.jsxs("div",{className:"flex justify-center gap-2 mb-6",children:[i.jsxs("span",{className:"font-mono text-sm bg-slate-100 inline-block px-2 rounded",children:["Reg: ",fe.regNo]}),i.jsxs("span",{className:"font-mono text-sm bg-slate-100 inline-block px-2 rounded",children:["Roll: ",fe.rollNo||"-"]})]}),i.jsx("table",{className:"w-full text-left text-sm mb-6 border-t border-b border-slate-200",children:i.jsxs("tbody",{children:[d.map(Z=>i.jsxs("tr",{className:"border-b border-slate-100 last:border-0",children:[i.jsxs("td",{className:"py-2 font-medium",children:[Z.name," ",i.jsxs("span",{className:"text-[10px] text-slate-400",children:["/ ",Z.maxMarks]})]}),i.jsx("td",{className:"py-2 text-right font-bold",children:(_==null?void 0:_.subjects[Z.name])||0})]},Z.name)),i.jsxs("tr",{className:"bg-slate-50 font-bold",children:[i.jsx("td",{className:"py-2 pl-2",children:"Total"}),i.jsx("td",{className:"py-2 text-right pr-2",children:_==null?void 0:_.total})]}),(S==null?void 0:S.showRank)&&q&&i.jsxs("tr",{className:"bg-yellow-50 font-bold text-yellow-800",children:[i.jsx("td",{className:"py-2 pl-2",children:"Class Rank"}),i.jsxs("td",{className:"py-2 text-right pr-2",children:["#",q]})]})]})}),(S==null?void 0:S.showPassFailStatus)!==!1&&i.jsxs("div",{className:`mt-4 p-2 rounded font-bold text-white ${O?"bg-red-500":"bg-green-500"}`,children:["RESULT: ",F]}),i.jsx("div",{className:"text-xs text-slate-400 mt-8",children:"Generated by SchoolResult Pro"})]}),i.jsxs("div",{className:"mt-6 flex gap-4 print:hidden",children:[i.jsxs(H,{onClick:()=>window.print(),className:"flex items-center gap-2",children:[i.jsx(xl,{className:"w-4 h-4"})," Print / Save PDF"]}),i.jsx(H,{variant:"secondary",onClick:()=>Re(null),children:"Close"})]})]})}return W?i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4 animate-fade-in-up",children:i.jsxs(G,{className:"max-w-xs w-full",children:[i.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[i.jsx(Os,{className:"w-5 h-5"})," Change Password"]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"text-xs font-bold text-slate-500 block mb-1",children:"New Password"}),i.jsx(J,{type:"password",value:X,onChange:_=>ue(_.target.value)})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(H,{onClick:ae,className:"flex-1",children:"Update"}),i.jsx(H,{variant:"secondary",onClick:()=>P(!1),className:"flex-1",children:"Cancel"})]})]})}):i.jsxs("div",{className:"pb-20 relative animate-fade-in-up",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-slate-100 dark:border-slate-700 p-3 mb-4 flex flex-col sm:flex-row items-center justify-between gap-3",children:[i.jsxs("div",{className:"flex items-center gap-3 w-full",children:[i.jsxs("div",{className:"relative group shrink-0",children:[f.photo?i.jsx("img",{src:f.photo,alt:"Teacher",className:"w-12 h-12 rounded-lg object-cover border border-slate-200 dark:border-slate-600"}):i.jsx("div",{className:"w-12 h-12 bg-blue-50 dark:bg-blue-900 rounded-lg flex items-center justify-center text-blue-600 dark:text-blue-300 border border-slate-200 dark:border-slate-600",children:i.jsx(Mv,{className:"w-6 h-6"})}),x&&i.jsx("label",{className:`absolute inset-0 bg-black/50 rounded-lg flex items-center justify-center transition-opacity ${t.isPro?"cursor-pointer hover:bg-black/60":"cursor-not-allowed"}`,children:t.isPro?i.jsxs(i.Fragment,{children:[i.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:_=>yt(_,"TEACHER")}),i.jsx(Fa,{className:"w-4 h-4 text-white"})]}):i.jsx(Bs,{className:"w-4 h-4 text-slate-300"})})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-baseline gap-2 mb-0.5",children:[i.jsx("h1",{className:"text-lg font-black text-blue-600 dark:text-blue-400 tracking-tight leading-none",children:t.name}),g?i.jsxs("span",{className:"text-[10px] font-bold text-green-600 bg-green-50 px-1.5 py-0.5 rounded flex items-center gap-0.5",children:[i.jsx(un,{className:"w-2.5 h-2.5"})," Submitted"]}):i.jsxs("span",{className:"text-[10px] font-bold text-orange-600 bg-orange-50 px-1.5 py-0.5 rounded flex items-center gap-0.5",children:[i.jsx(No,{className:"w-2.5 h-2.5"})," Draft"]})]}),x?i.jsxs("div",{className:"space-y-1",children:[i.jsx("input",{className:"bg-slate-50 border rounded px-1.5 py-0.5 text-xs font-bold w-32",value:f.name,onChange:_=>p({...f,name:_.target.value})}),i.jsxs("div",{className:"flex gap-1 mt-1",children:[i.jsx("button",{onClick:L,className:"text-[10px] bg-green-100 text-green-700 px-2 py-0.5 rounded font-bold",children:"Save"}),i.jsxs("button",{onClick:()=>P(!0),className:"text-[10px] bg-yellow-100 text-yellow-700 px-2 py-0.5 rounded font-bold flex items-center gap-1",children:[i.jsx(Os,{className:"w-3 h-3"})," Pass"]})]})]}):i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("p",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 truncate",children:f.name||"Class Teacher"}),i.jsx("button",{onClick:()=>k(!0),className:"text-slate-400 hover:text-blue-500",children:i.jsx(Po,{className:"w-3 h-3"})})]})]})]}),i.jsxs("div",{className:"flex-shrink-0",children:[zp(),!["students","marks","subjects"].includes(e)&&i.jsxs("div",{className:"flex items-center gap-1 bg-slate-100 px-2 py-1 rounded text-xs",children:[i.jsx(fi,{className:"w-3 h-3 text-slate-400"}),i.jsx("span",{className:"font-bold",children:ts.total})]})]})]}),i.jsx("div",{className:"flex justify-between items-center mb-6 overflow-x-auto pb-2",children:i.jsxs("div",{className:"flex bg-slate-200 dark:bg-slate-700 p-1 rounded-lg",children:[i.jsx("button",{onClick:()=>r("students"),className:`px-4 py-2 rounded-md text-sm font-bold transition-all ${e==="students"?"bg-white dark:bg-slate-800 text-blue-600 shadow-sm":"text-slate-600 dark:text-slate-300 hover:text-slate-900"}`,children:"Students"}),i.jsx("button",{onClick:()=>r("subjects"),className:`px-4 py-2 rounded-md text-sm font-bold transition-all ${e==="subjects"?"bg-white dark:bg-slate-800 text-blue-600 shadow-sm":"text-slate-600 dark:text-slate-300 hover:text-slate-900"}`,children:"Subjects"}),i.jsx("button",{onClick:()=>r("marks"),className:`px-4 py-2 rounded-md text-sm font-bold transition-all ${e==="marks"?"bg-white dark:bg-slate-800 text-blue-600 shadow-sm":"text-slate-600 dark:text-slate-300 hover:text-slate-900"}`,children:"Marks"}),i.jsx("button",{onClick:()=>r("reports"),className:`px-4 py-2 rounded-md text-sm font-bold transition-all ${e==="reports"?"bg-white dark:bg-slate-800 text-blue-600 shadow-sm":"text-slate-600 dark:text-slate-300 hover:text-slate-900"}`,children:"Reports"})]})}),e==="students"&&i.jsxs("div",{className:"grid md:grid-cols-3 gap-6 animate-fade-in-up",children:[i.jsxs("div",{className:"md:col-span-1",children:[i.jsxs(G,{className:"border-t-4 border-t-blue-500 relative",children:[te&&i.jsxs("div",{className:"absolute inset-0 z-20 bg-emerald-500 rounded-xl flex flex-col items-center justify-center p-6 text-center animate-fade-in-up",children:[i.jsx("div",{className:"w-12 h-12 bg-white rounded-full flex items-center justify-center mb-2 shadow-lg animate-bounce",children:i.jsx(un,{className:"w-8 h-8 text-emerald-600"})}),i.jsx("h3",{className:"text-white font-bold text-lg leading-tight",children:te})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white flex items-center gap-2",children:[i.jsx(Om,{className:"w-5 h-5 text-blue-600"})," Add Student"]}),i.jsxs("p",{className:"text-xs text-blue-600 font-bold bg-blue-50 dark:bg-blue-900/30 inline-block px-2 py-1 rounded mt-1",children:["Adding Student #",s.length+1]})]}),M&&i.jsxs("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded text-sm font-bold border border-red-200 dark:border-red-800 flex items-center gap-2",children:[i.jsx(jm,{className:"w-4 h-4"})," ",M]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"flex justify-center mb-4",children:i.jsxs("label",{className:`w-24 h-24 rounded-full flex items-center justify-center relative overflow-hidden shadow-inner transition-all group ${Q.gender==="Male"?"bg-blue-50 border-4 border-blue-100":Q.gender==="Female"?"bg-pink-50 border-4 border-pink-100":"bg-slate-100 border-4 border-slate-200"} ${t.isPro?"cursor-pointer hover:border-blue-400":"cursor-not-allowed opacity-80"}`,children:[Q.photoUrl?i.jsx("img",{src:Q.photoUrl,className:"w-full h-full object-cover",alt:"prev"}):Q.gender==="Male"?i.jsx("img",{src:"https://api.dicebear.com/7.x/avataaars/svg?seed=Felix&gender=male",className:"w-16 h-16 opacity-80",alt:"M"}):Q.gender==="Female"?i.jsx("img",{src:"https://api.dicebear.com/7.x/avataaars/svg?seed=Aneka&gender=female",className:"w-16 h-16 opacity-80",alt:"F"}):i.jsx(Fa,{className:"w-8 h-8 text-slate-400"}),t.isPro?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors flex items-center justify-center",children:i.jsx(Fa,{className:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity"})}),i.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:_=>yt(_,"STUDENT"),disabled:N})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/40 z-10 backdrop-blur-[1px]",children:i.jsx(Bs,{className:"w-6 h-6 text-slate-600 drop-shadow-md"})}),i.jsx("div",{className:"absolute bottom-2 bg-yellow-400 text-yellow-900 text-[9px] font-black px-2 py-0.5 rounded-full z-20 shadow-sm border border-yellow-500",children:"UNLOCK PRO"})]})]})}),i.jsxs("div",{children:[i.jsx("label",{className:"text-[10px] text-slate-500 ml-1 font-bold uppercase",children:"FULL NAME *"}),i.jsx("input",{value:Q.name,onChange:_=>Ce({...Q,name:_.target.value.toUpperCase()}),onBlur:()=>Mt("name"),className:`w-full bg-white dark:bg-slate-800 font-bold rounded-lg px-4 py-2.5 outline-none border-2 transition-all ${Ke.name?"border-red-500 focus:border-red-500":"border-slate-300 dark:border-slate-600 focus:border-blue-500"}`})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-[10px] text-slate-500 ml-1 font-bold uppercase",children:"Gender *"}),i.jsx("div",{className:`rounded-lg border-2 ${Ke.gender?"border-red-500":"border-slate-300 dark:border-slate-600"} overflow-hidden`,children:i.jsxs("select",{className:"w-full bg-white dark:bg-slate-800 px-3 py-2.5 outline-none",value:Q.gender,onChange:_=>Ce({...Q,gender:_.target.value}),onBlur:()=>Mt("gender"),children:[i.jsx("option",{value:"",children:"Select"}),i.jsx("option",{value:"Male",children:"Male"}),i.jsx("option",{value:"Female",children:"Female"})]})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-[10px] text-slate-500 ml-1 font-bold uppercase",children:"DOB *"}),i.jsx("input",{type:"date",className:`w-full bg-white dark:bg-slate-800 rounded-lg px-3 py-2.5 outline-none border-2 transition-all ${Ke.dob?"border-red-500 focus:border-red-500":"border-slate-300 dark:border-slate-600 focus:border-blue-500"}`,value:Q.dob,onChange:_=>Ce({...Q,dob:_.target.value}),onBlur:()=>Mt("dob")})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsx(J,{placeholder:"Reg No (Opt)",value:Q.regNo,onChange:_=>Ce({...Q,regNo:_.target.value})}),i.jsx(J,{type:"text",placeholder:"Roll No (Opt)",value:Q.rollNo,onChange:_=>{const O=_.target.value;(O===""||/^\d+$/.test(O))&&Ce({...Q,rollNo:O})}})]}),i.jsx(J,{placeholder:"Father's Name",value:Q.fatherName,onChange:_=>Ce({...Q,fatherName:_.target.value})}),i.jsx(J,{placeholder:"Mother's Name",value:Q.motherName,onChange:_=>Ce({...Q,motherName:_.target.value})}),i.jsx(H,{onClick:es,disabled:et,className:"w-full bg-blue-600 hover:bg-blue-700 text-white shadow-lg shadow-blue-200 dark:shadow-none",children:et?"Saving...":"Save & Add Next"})]})]}),a.length>0&&i.jsxs(G,{className:"mt-4 border-l-4 border-l-yellow-500",children:[i.jsxs("h4",{className:"font-bold text-sm mb-3",children:["Pending Admissions (",a.length,")"]}),i.jsx("div",{className:"space-y-2",children:a.map(_=>i.jsxs("div",{className:"bg-slate-50 p-2 rounded flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-xs",children:_.name}),i.jsxs("p",{className:"text-[10px] text-slate-500",children:["Reg: ",_.regNo]})]}),i.jsxs("div",{className:"flex gap-1",children:[i.jsx("button",{onClick:()=>me(_.id,"APPROVE"),className:"p-1 bg-green-100 text-green-600 rounded",children:i.jsx(un,{className:"w-3 h-3"})}),i.jsx("button",{onClick:()=>me(_.id,"REJECT"),className:"p-1 bg-red-100 text-red-600 rounded",children:i.jsx(Fv,{className:"w-3 h-3"})})]})]},_.id))})]})]}),i.jsx("div",{className:"md:col-span-2",children:i.jsxs(G,{className:"min-h-[400px]",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("h3",{className:"font-bold text-slate-800 dark:text-white",children:["Student List (",s.length,")"]}),i.jsxs(H,{onClick:()=>$t(!0),className:"flex items-center gap-2 text-xs py-1.5 px-3 bg-slate-800 text-white",children:[i.jsx(xl,{className:"w-3 h-3"})," Class Register"]})]}),i.jsx("div",{className:"space-y-2",children:s.length===0?i.jsx("p",{className:"text-slate-400 text-center py-10",children:"No students added yet."}):Xn.map((_,O)=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border border-slate-100 rounded-lg hover:shadow-sm transition-shadow",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("span",{className:"text-xs font-mono text-slate-400 w-8",children:["#",_.rollNo||"-"]}),_.photoUrl?i.jsx("img",{src:_.photoUrl,className:"w-10 h-10 rounded-full object-cover bg-slate-100",alt:"s"}):i.jsx("div",{className:`w-10 h-10 rounded-full ${_.gender==="Male"?"bg-blue-50":_.gender==="Female"?"bg-pink-50":"bg-slate-100"} flex items-center justify-center font-bold text-xs border-2 border-white shadow-sm`,children:_.gender==="Male"?i.jsx("img",{src:"https://api.dicebear.com/7.x/avataaars/svg?seed=Felix&gender=male",className:"w-8 h-8 rounded-full",alt:"B"}):_.gender==="Female"?i.jsx("img",{src:"https://api.dicebear.com/7.x/avataaars/svg?seed=Aneka&gender=female",className:"w-8 h-8 rounded-full",alt:"G"}):i.jsx(wr,{className:"w-6 h-6 text-slate-400"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-sm text-slate-800",children:_.name}),i.jsxs("p",{className:"text-xs text-slate-500 font-mono",children:[_.gender?_.gender:"-"," | DOB: ",_.dob," | Reg: ",_.regNo||"-"]})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>Re(_),className:"p-2 text-slate-400 hover:text-blue-600 bg-slate-50 rounded-lg",title:"Print Card",children:i.jsx(qc,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>eu(_.id,_.name),className:"p-2 text-slate-400 hover:text-red-600 bg-slate-50 rounded-lg",title:"Delete",children:i.jsx(hi,{className:"w-4 h-4"})})]})]},_.id))})]})})]}),e==="subjects"&&i.jsxs("div",{className:"max-w-2xl mx-auto animate-fade-in-up",children:[!y&&i.jsx("div",{className:"mb-4 p-3 bg-yellow-50 text-yellow-800 text-sm rounded border border-yellow-200",children:"Admin has disabled subject editing. You can only view subjects."}),i.jsxs(G,{className:"mb-6",children:[i.jsx("h3",{className:"font-bold text-slate-800 mb-4",children:"Add New Subject"}),i.jsxs("div",{className:"flex gap-2 items-end",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:"text-xs text-slate-500 ml-1",children:"Subject Name"}),i.jsx(J,{placeholder:"e.g. English",value:he.name,onChange:_=>vt({...he,name:_.target.value}),disabled:!y})]}),i.jsxs("div",{className:"w-20",children:[i.jsx("label",{className:"text-xs text-slate-500 ml-1",children:"Max"}),i.jsx(J,{value:he.max,onChange:_=>vt({...he,max:_.target.value}),disabled:!y})]}),i.jsxs("div",{className:"w-20",children:[i.jsx("label",{className:"text-xs text-slate-500 ml-1",children:"Pass"}),i.jsx(J,{value:he.pass,onChange:_=>vt({...he,pass:_.target.value}),disabled:!y})]}),i.jsx(H,{onClick:rt,disabled:!y,className:"h-[42px] px-4",children:i.jsx(Em,{className:"w-5 h-5"})})]})]}),i.jsxs(G,{children:[i.jsx("h3",{className:"font-bold text-slate-800 mb-4",children:"Current Subjects"}),i.jsx("div",{className:"space-y-2",children:d.map((_,O)=>i.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 rounded border border-slate-200",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-bold text-slate-800",children:_.name}),i.jsxs("p",{className:"text-xs text-slate-500",children:["Max: ",_.maxMarks," | Pass: ",_.passMarks]})]}),y&&i.jsx("button",{onClick:()=>Ge(O),className:"text-red-400 hover:text-red-600",children:i.jsx(hi,{className:"w-4 h-4"})})]},O))})]})]}),e==="marks"&&i.jsxs("div",{className:"animate-fade-in-up",children:[i.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[i.jsxs("p",{className:"text-sm text-slate-500",children:["Enter marks for ",i.jsx("span",{className:"font-bold",children:s.length})," students."]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(H,{onClick:tt,variant:"secondary",className:"p-2",children:i.jsx(Cm,{className:`w-4 h-4 ${u?"animate-spin":""}`})}),i.jsxs(H,{onClick:E,disabled:g,className:"flex items-center gap-2",children:[i.jsx(jd,{className:"w-4 h-4"})," Save All"]})]})]}),i.jsxs("div",{className:"md:hidden space-y-4",children:[Xn.map(_=>{const O=o[_.id],F=(O==null?void 0:O.resultStatus)==="FAILED",q=Bi[_.id];return i.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl p-4 shadow-sm",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4 border-b border-slate-100 dark:border-slate-700 pb-2",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"w-10 h-10 bg-slate-100 rounded-full flex items-center justify-center font-bold text-slate-500",children:["#",_.rollNo||"-"]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-lg leading-tight",children:_.name}),(S==null?void 0:S.showRank)&&q&&i.jsxs("span",{className:"text-xs font-bold text-yellow-600 bg-yellow-50 px-2 py-0.5 rounded mt-1 inline-block",children:["Rank: ",q]})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("span",{className:"block text-2xl font-black text-slate-800 dark:text-white",children:(O==null?void 0:O.total)||0}),(S==null?void 0:S.showPassFailStatus)!==!1&&i.jsx("span",{className:`text-[10px] font-bold px-1.5 py-0.5 rounded uppercase ${F?"bg-red-100 text-red-600":"bg-green-100 text-green-600"}`,children:F?"Failed":"Passed"})]})]}),i.jsx("div",{className:"grid grid-cols-2 gap-3",children:d.map(Z=>i.jsxs("div",{className:"relative",children:[i.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-400 absolute left-2 top-1.5",children:Z.name}),i.jsx("input",{type:"text",inputMode:"numeric",disabled:g,className:"w-full pt-5 pb-1 px-2 text-center bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-600 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-lg font-bold",value:(O==null?void 0:O.subjects[Z.name])??"",onChange:Ue=>Cr(_.id,Z.name,Ue.target.value)})]},Z.name))})]},_.id)}),!g&&i.jsx("button",{onClick:E,className:"fixed bottom-6 right-6 w-14 h-14 bg-blue-600 rounded-full shadow-xl flex items-center justify-center text-white z-50",children:i.jsx(jd,{className:"w-6 h-6"})})]}),i.jsx("div",{className:"hidden md:block overflow-x-auto rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 shadow-sm",children:i.jsxs("table",{className:"w-full text-left border-collapse",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-slate-50 dark:bg-slate-800 text-slate-500 text-xs uppercase font-bold",children:[i.jsx("th",{className:"p-3 border-r border-slate-100 dark:border-slate-700 sticky left-0 bg-slate-50 dark:bg-slate-800 z-10 w-16",children:"Roll"}),i.jsx("th",{className:"p-3 border-r border-slate-100 dark:border-slate-700 sticky left-16 bg-slate-50 dark:bg-slate-800 z-10 w-40",children:"Name"}),d.map(_=>i.jsx("th",{className:"p-3 text-center min-w-[80px]",children:i.jsxs("div",{className:"flex flex-col",children:[i.jsx("span",{children:_.name}),i.jsxs("span",{className:"text-[9px] text-slate-400",children:["Max: ",_.maxMarks]})]})},_.name)),i.jsx("th",{className:"p-3 text-center bg-slate-100 dark:bg-slate-700/50",children:"Total"}),(S==null?void 0:S.showRank)&&i.jsx("th",{className:"p-3 text-center bg-yellow-50 dark:bg-yellow-900/10",children:"Rank"}),(S==null?void 0:S.showPassFailStatus)!==!1&&i.jsx("th",{className:"p-3 text-center bg-slate-100 dark:bg-slate-700/50",children:"Status"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:Xn.map(_=>{const O=o[_.id],F=(O==null?void 0:O.resultStatus)==="FAILED",q=Bi[_.id];return i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50",children:[i.jsx("td",{className:"p-3 font-mono text-xs sticky left-0 bg-inherit z-10 border-r border-slate-100 dark:border-slate-700",children:_.rollNo||"-"}),i.jsx("td",{className:"p-3 font-medium text-sm sticky left-16 bg-inherit z-10 border-r border-slate-100 dark:border-slate-700 truncate max-w-[150px]",children:_.name}),d.map(Z=>i.jsx("td",{className:"p-2 text-center",children:i.jsx("input",{type:"text",disabled:g,className:"w-12 h-8 text-center bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-600 rounded focus:ring-2 focus:ring-blue-500 outline-none text-sm",value:(O==null?void 0:O.subjects[Z.name])??"",onChange:Ue=>Cr(_.id,Z.name,Ue.target.value)})},Z.name)),i.jsx("td",{className:"p-3 text-center font-bold bg-slate-50 dark:bg-slate-800/30",children:(O==null?void 0:O.total)||0}),(S==null?void 0:S.showRank)&&i.jsx("td",{className:"p-3 text-center font-bold text-yellow-600 bg-yellow-50/50",children:q?`#${q}`:"-"}),(S==null?void 0:S.showPassFailStatus)!==!1&&i.jsx("td",{className:"p-3 text-center bg-slate-50 dark:bg-slate-800/30",children:i.jsx("span",{className:`text-[10px] font-bold px-1.5 py-0.5 rounded ${F?"bg-red-100 text-red-600":"bg-green-100 text-green-600"}`,children:tu(O||{},F)})})]},_.id)})})]})})]}),e==="reports"&&i.jsx("div",{className:"max-w-2xl mx-auto animate-fade-in-up",children:i.jsxs(G,{className:"text-center py-10",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"Submission Status"}),i.jsx("div",{className:"flex justify-center mb-6",children:g?i.jsx("div",{className:"w-24 h-24 bg-green-100 rounded-full flex items-center justify-center text-green-600",children:i.jsx(un,{className:"w-12 h-12"})}):i.jsx("div",{className:"w-24 h-24 bg-orange-100 rounded-full flex items-center justify-center text-orange-600",children:i.jsx(No,{className:"w-12 h-12"})})}),i.jsx("p",{className:"text-slate-500 mb-8 max-w-md mx-auto",children:g?"Results submitted to Admin. To make changes, click Unlock.":"Once you finish entering marks for all students, Submit here to notify Admin."}),i.jsx(H,{onClick:Fi,className:`px-8 py-3 ${g?"bg-slate-800":"bg-green-600"}`,children:g?"Unlock Results":"Verify & Submit"})]})})]})},bb=()=>{const[t,e]=b.useState(!1),[r,s]=b.useState(null),[n,a]=b.useState(""),[l,o]=b.useState(!1),[c,u]=b.useState([]),[h,d]=b.useState(!1),[m,g]=b.useState(1),[v,y]=b.useState(""),[w,f]=b.useState(""),[p,x]=b.useState(null),[k,N]=b.useState(""),[j,S]=b.useState({name:"",phone:"",place:"",examName:"",showPassFail:!0,academicYear:"",resultDisplayType:"PASS_FAIL",sortingMethod:"GENDER_ROLL",showRank:!1}),[T,W]=b.useState(""),[P,X]=b.useState(!1),[ue,he]=b.useState([]),[vt,Q]=b.useState(!1),[Ce,et]=b.useState(!1);b.useEffect(()=>{R(),M()},[]),b.useEffect(()=>{m===3&&V()},[m]),b.useEffect(()=>{if(n){const E=setTimeout(()=>a(""),4e3);return()=>clearTimeout(E)}},[n]);const R=async()=>{const E=await D.getSchoolConfig();s(E),E&&(S({name:E.schoolName,phone:E.phone||"",place:E.place||"",examName:E.examName||"",showPassFail:E.showPassFailStatus!==!1,academicYear:E.academicYear||new Date().getFullYear().toString(),resultDisplayType:E.resultDisplayType||"PASS_FAIL",sortingMethod:E.sortingMethod||"GENDER_ROLL",showRank:E.showRank||!1}),E.resultPublishDate?(W(E.resultPublishDate.slice(0,16)),new Date(E.resultPublishDate)<=new Date&&X(!0)):(X(!1),W("")))},M=async()=>{d(!0);const E=await D.getClasses();u(E),d(!1)},V=async()=>{Q(!0);const E=await D.getSchoolProgress();he(E),Q(!1)},te=async E=>{E.preventDefault();const me=v.trim().toUpperCase();if(!me||!w){alert("Please enter both Class Name and Password");return}if(c.some(Ge=>Ge.name.toUpperCase()===me)){alert(`Class "${me}" already exists!`);return}o(!0);const rt=await D.createClass(v,w,"Class Teacher",[]);rt.success?(r&&!r.allowTeacherSubjectEdit&&(await D.updateSchoolSettings({allowTeacherSubjectEdit:!0}),s({...r,allowTeacherSubjectEdit:!0})),a(`Class ${v} Created!`),y(""),f(""),M()):alert("Failed: "+rt.message),o(!1)},ne=async(E,me,rt=0)=>{if(!window.confirm(`Delete Class "${me}"?`))return;if(rt>0){if(!window.confirm(` CRITICAL WARNING 

This class has ${rt} students.
Deleting it will PERMANENTLY DELETE all student data and marks.

Type 'DELETE' to confirm, or click OK to proceed.`))return}else if(!window.confirm(`Are you absolutely sure you want to delete "${me}"? This action cannot be undone.`))return;const Ge=await D.deleteClass(E);Ge.success?(a("Class deleted successfully."),M()):alert("Delete failed: "+Ge.message)},Ke=async()=>{if(!p||!k||!window.confirm(`Are you sure you want to reset the password for Class ${p.name}?

The teacher will need the new password to login.`))return;const E=await D.changeClassPassword(p.id,k);E.success?(a(`Password for ${p.name} updated!`),x(null),N("")):alert("Failed: "+E.message)},we=async()=>{if(!r)return;(await D.updateSchoolSettings({resultPublishDate:T})).success?(a("Schedule Updated!"),R()):alert("Failed to update schedule")},fe=async()=>{if(!r)return;const E=ue.filter(Ge=>Ge.status!=="SUBMITTED");if(E.length>0){if(!window.confirm(` WAIT! Teachers haven't submitted results!

${E.length} classes (e.g., ${E[0].name}) are marked as 'Not Verified' by the teacher.

This means the teacher hasn't confirmed that all students are added. Publish anyway?`))return}else if(!window.confirm("All classes are verified. Publish results now?"))return;const me=new Date().toISOString();(await D.updateSchoolSettings({resultPublishDate:me})).success?(a("Results Published Successfully!"),R(),W(me.slice(0,16))):alert("Failed to publish")},Re=async()=>{if(!window.confirm("Hide results from students? This will close the public portal."))return;(await D.updateSchoolSettings({resultPublishDate:null})).success&&(a("Results Unpublished."),W(""),R())},Rt=async()=>{window.confirm("This will simulate a payment gateway (Cashfree/Razorpay). Proceed to Pay?")&&(et(!0),setTimeout(async()=>{const E="TXN"+Date.now(),me=await D.activateSchoolProLicenseAuto(E);et(!1),me.success?(a("Payment Successful! Pro Activated."),R()):alert("Payment Failed.")},2e3))},$t=()=>`${window.location.href.split("#")[0].replace(/\/$/,"")}/#/login`,tt=()=>`${window.location.href.split("#")[0].replace(/\/$/,"")}/#/login?s=${r==null?void 0:r.id}`,Mt=E=>{navigator.clipboard.writeText(E),a("Link Copied!")},Cr=async(E,me)=>{if(navigator.share)try{await navigator.share({title:E,text:`Access ${E} here:`,url:me})}catch{console.log("Share cancelled")}else Mt(me)};return r?i.jsxs("div",{className:"animate-fade-in-up pb-20",children:[p&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:i.jsxs(G,{className:"max-w-xs w-full",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4 text-slate-800 dark:text-white",children:[i.jsx(Os,{className:"w-5 h-5 text-blue-600"}),i.jsx("h3",{className:"font-bold",children:"Reset Password"})]}),i.jsxs("p",{className:"text-sm text-slate-500 mb-4",children:["Set new password for ",i.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200",children:p.name}),"."]}),i.jsx("div",{className:"mb-4",children:i.jsx(J,{type:"password",autoFocus:!0,placeholder:"New Password",value:k,onChange:E=>N(E.target.value)})}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(H,{onClick:Ke,className:"flex-1",children:"Save"}),i.jsx(H,{variant:"secondary",onClick:()=>{x(null),N("")},className:"flex-1",children:"Cancel"})]})]})}),t&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4 overflow-y-auto",children:i.jsx("div",{className:"w-full max-w-2xl my-auto",children:i.jsxs(G,{children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"School Settings"}),i.jsx(H,{variant:"secondary",onClick:()=>e(!1),children:"Close"})]}),i.jsxs("div",{className:"space-y-4",children:[r.isPro?i.jsxs("div",{className:"bg-green-100 dark:bg-green-900/30 p-4 rounded-xl border border-green-200 dark:border-green-800 mb-6 flex items-center gap-3",children:[i.jsx("div",{className:"bg-green-200 dark:bg-green-800 p-2 rounded-full",children:i.jsx(Vr,{className:"w-6 h-6 text-green-700 dark:text-green-300"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-green-800 dark:text-green-200",children:"Pro License Active"}),i.jsxs("p",{className:"text-xs text-green-700 dark:text-green-300",children:["Valid until ",new Date(r.expiryDate||"").toLocaleDateString()]})]})]}):i.jsx("div",{className:"bg-gradient-to-r from-yellow-500 to-orange-500 rounded-xl p-4 text-white mb-6 shadow-lg transform hover:scale-[1.01] transition-transform cursor-pointer",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsxs("h3",{className:"font-bold text-lg flex items-center gap-2",children:[i.jsx(Vr,{className:"w-5 h-5"})," Upgrade to School Pro"]}),i.jsx("p",{className:"text-white/90 text-sm mt-1",children:"Unlock Student Photos, Teacher Photos & Custom Themes."})]}),i.jsx("button",{onClick:Rt,disabled:Ce,className:"bg-white text-orange-600 px-4 py-2 rounded-lg font-bold text-sm shadow-sm hover:bg-slate-50 disabled:opacity-75",children:Ce?"Processing...":"Pay 199 (Simulated)"})]})}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"School Name"}),i.jsx(J,{value:j.name,onChange:E=>S({...j,name:E.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Exam Name (e.g. Onam Exam 2024)"}),i.jsx(J,{placeholder:"Enter Exam Name to show on Result",value:j.examName,onChange:E=>S({...j,examName:E.target.value})})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Phone"}),i.jsx(J,{value:j.phone,onChange:E=>S({...j,phone:E.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Place"}),i.jsx(J,{value:j.place,onChange:E=>S({...j,place:E.target.value})})]})]}),i.jsxs("div",{className:"border-t border-slate-200 pt-4 mt-2",children:[i.jsx("h4",{className:"font-bold text-sm mb-3",children:"Result & Data Display"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Academic Year"}),i.jsx(J,{placeholder:"e.g. 2024-25",value:j.academicYear,onChange:E=>S({...j,academicYear:E.target.value})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Sorting Method"}),i.jsxs(qr,{value:j.sortingMethod,onChange:E=>S({...j,sortingMethod:E.target.value}),children:[i.jsx("option",{value:"GENDER_ROLL",children:"Boys (Roll) then Girls (Roll)"}),i.jsx("option",{value:"ROLL_ONLY",children:"Roll No Only"}),i.jsx("option",{value:"NAME_ONLY",children:"Name Only"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Result Status Display"}),i.jsxs(qr,{value:j.resultDisplayType,onChange:E=>S({...j,resultDisplayType:E.target.value}),children:[i.jsx("option",{value:"PASS_FAIL",children:"Pass / Fail Only"}),i.jsx("option",{value:"CLASS_DISTINCTION",children:"Distinction / First Class / Failed"}),i.jsx("option",{value:"GRADE_ONLY",children:"Grade Only (A+, B...)"}),i.jsx("option",{value:"PERCENTAGE",children:"Percentage Only"})]})]}),i.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 p-2 rounded",children:[i.jsx("input",{type:"checkbox",id:"showPassFail",className:"w-4 h-4",checked:j.showPassFail,onChange:E=>S({...j,showPassFail:E.target.checked})}),i.jsx("label",{htmlFor:"showPassFail",className:"text-sm cursor-pointer select-none",children:"Show Status Badge (e.g. PASSED) on Result Card"})]}),i.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 p-2 rounded",children:[i.jsx("input",{type:"checkbox",id:"showRank",className:"w-4 h-4",checked:j.showRank,onChange:E=>S({...j,showRank:E.target.checked})}),i.jsx("label",{htmlFor:"showRank",className:"text-sm cursor-pointer select-none",children:"Calculate and Show Class Rank"})]})]})]}),i.jsx(H,{onClick:async()=>{await D.updateSchoolSettings({schoolName:j.name,phone:j.phone,place:j.place,examName:j.examName,showPassFailStatus:j.showPassFail,academicYear:j.academicYear,resultDisplayType:j.resultDisplayType,sortingMethod:j.sortingMethod,showRank:j.showRank}),alert("Settings Saved!"),e(!1),R()},children:"Save Advanced Settings"})]})]})})}),i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:"Admin Console"}),i.jsx("p",{className:"text-slate-500 text-sm",children:"Manage your school result portal."})]}),i.jsxs(H,{variant:"secondary",onClick:()=>e(!0),className:"flex items-center gap-2 text-sm",children:[i.jsx(Dv,{className:"w-4 h-4"})," Advanced"]})]}),n&&i.jsx("div",{className:"fixed top-20 right-4 z-50 bg-green-600 text-white px-6 py-3 rounded-lg shadow-xl animate-bounce",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Dt,{className:"w-5 h-5"})," ",n]})}),i.jsxs("div",{className:"grid grid-cols-3 gap-2 md:gap-4 mb-4",children:[i.jsxs("button",{onClick:()=>g(1),className:`p-3 rounded-xl border transition-all duration-200 flex flex-col items-center justify-center gap-1 ${m===1?"bg-blue-600 text-white border-blue-600 shadow-lg shadow-blue-200 dark:shadow-none":"bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[i.jsx("div",{className:"bg-white/20 px-2 py-0.5 rounded text-[10px] uppercase font-bold mb-1",children:"Step 1"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Em,{className:"w-4 h-4"}),i.jsx("span",{className:"text-xs md:text-sm font-bold",children:"Add Class"})]})]}),i.jsxs("button",{onClick:()=>g(2),className:`p-3 rounded-xl border transition-all duration-200 flex flex-col items-center justify-center gap-1 ${m===2?"bg-purple-600 text-white border-purple-600 shadow-lg shadow-purple-200 dark:shadow-none":"bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[i.jsx("div",{className:"bg-white/20 px-2 py-0.5 rounded text-[10px] uppercase font-bold mb-1",children:"Step 2"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Os,{className:"w-4 h-4"}),i.jsx("span",{className:"text-xs md:text-sm font-bold",children:"Staff Link"})]})]}),i.jsxs("button",{onClick:()=>g(3),className:`p-3 rounded-xl border transition-all duration-200 flex flex-col items-center justify-center gap-1 ${m===3?"bg-green-600 text-white border-green-600 shadow-lg shadow-green-200 dark:shadow-none":"bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:[i.jsx("div",{className:"bg-white/20 px-2 py-0.5 rounded text-[10px] uppercase font-bold mb-1",children:"Step 3"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(bd,{className:"w-4 h-4"}),i.jsx("span",{className:"text-xs md:text-sm font-bold",children:"Publish"})]})]})]}),i.jsxs("div",{className:"mb-6 animate-fade-in-up",children:[m===1&&i.jsxs(G,{className:"border-t-4 border-t-blue-500 ring-1 ring-blue-100 dark:ring-blue-900",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-4",children:"Create New Class"}),i.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[i.jsx("div",{className:"md:col-span-1",children:i.jsx("input",{className:"w-full h-full min-h-[42px] bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg px-3 py-2 text-sm font-bold uppercase placeholder:font-normal outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Class Name (e.g. 10 A)",value:v,onChange:E=>y(E.target.value)})}),i.jsx("div",{className:"md:col-span-1",children:i.jsx("input",{className:"w-full h-full min-h-[42px] bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Set Password",value:w,onChange:E=>f(E.target.value)})}),i.jsx("div",{className:"md:col-span-1",children:i.jsx(H,{type:"submit",disabled:l,onClick:te,className:"w-full h-full min-h-[42px] flex justify-center items-center gap-2 py-2",children:l?i.jsx(Ht,{className:"animate-spin w-4 h-4"}):"Create Class"})})]})]}),m===2&&i.jsxs(G,{className:"border-t-4 border-t-purple-500 ring-1 ring-purple-100 dark:ring-purple-900",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-2",children:"Share Staff Login"}),i.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Teachers use this link to login with their Class Name & Password."}),i.jsx("div",{className:"bg-slate-100 dark:bg-slate-800 p-3 rounded-lg mb-4 text-xs font-mono text-slate-600 dark:text-slate-300 break-all border border-slate-200 dark:border-slate-700",children:$t()}),i.jsxs("div",{className:"flex gap-4",children:[i.jsxs(H,{onClick:()=>Mt($t()),variant:"secondary",className:"flex-1",title:"Copy Link",children:[i.jsx(Co,{className:"w-4 h-4 inline mr-2"})," Copy Link"]}),i.jsxs(H,{onClick:()=>Cr("Staff Login",$t()),className:"flex-1 bg-purple-600 hover:bg-purple-700",children:[i.jsx(Sd,{className:"w-4 h-4 inline mr-2"})," Share Link"]})]})]}),m===3&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs(G,{className:`border-t-4 ${P?"border-t-green-500 ring-1 ring-green-100 dark:ring-green-900":"border-t-slate-400"}`,children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-1",children:P?"Result is LIVE ":"Publish Results"}),i.jsx("p",{className:"text-sm text-slate-500",children:P?`Results are visible since ${new Date(T).toLocaleDateString()}`:"Control when students can see their marks."})]}),P&&i.jsx("button",{onClick:Re,className:"text-xs text-red-500 hover:underline font-bold",children:"Unpublish / Hide"})]}),P?i.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-300 p-3 rounded-lg text-sm text-center font-bold border border-green-200 dark:border-green-800",children:"Public Portal is Active"}):i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-3 rounded-lg border border-slate-200 dark:border-slate-700",children:[i.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 block",children:"Option A: Schedule for Later"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"datetime-local",className:"w-full bg-white dark:bg-slate-900 border border-slate-300 dark:border-slate-600 rounded px-2 py-1 text-sm",value:T,onChange:E=>W(E.target.value)}),i.jsx("button",{onClick:we,className:"bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 px-3 rounded text-slate-700 dark:text-slate-200 text-xs font-bold",children:"Save"})]})]}),i.jsx("div",{className:"flex items-center",children:i.jsxs(H,{onClick:fe,className:"w-full h-full bg-green-600 hover:bg-green-700 flex flex-col justify-center items-center py-2",children:[i.jsx(Am,{className:"w-5 h-5 mb-1"}),i.jsx("span",{children:"Publish Now (Instant)"})]})})]})]}),i.jsxs(G,{children:[i.jsxs("div",{className:"flex justify-between items-center mb-3",children:[i.jsxs("h4",{className:"font-bold text-slate-700 dark:text-slate-200 flex items-center gap-2",children:[i.jsx(bd,{className:"w-4 h-4"})," Data Entry Status"]}),i.jsxs("button",{onClick:V,className:"text-xs text-blue-500 hover:underline flex items-center gap-1",children:[i.jsx(Ht,{className:`w-3 h-3 ${vt?"animate-spin":""}`})," Refresh"]})]}),i.jsx("div",{className:"overflow-hidden rounded-lg border border-slate-200 dark:border-slate-700",children:i.jsxs("table",{className:"w-full text-left text-sm",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800 text-slate-500 text-xs uppercase",children:i.jsxs("tr",{children:[i.jsx("th",{className:"p-3",children:"Class"}),i.jsx("th",{className:"p-3 text-center",children:"Marks Entered"}),i.jsx("th",{className:"p-3 text-right",children:"Verification"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:ue.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:3,className:"p-4 text-center text-slate-400",children:"Loading progress..."})}):ue.map(E=>{const me=E.totalStudents>0?Math.round(E.gradedCount/E.totalStudents*100):0,rt=me===100&&E.totalStudents>0,Ge=E.status==="SUBMITTED";return i.jsxs("tr",{className:"bg-white dark:bg-slate-900",children:[i.jsx("td",{className:"p-3 font-medium text-slate-800 dark:text-white",children:E.name}),i.jsx("td",{className:"p-3",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"flex-1 h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:i.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${rt?"bg-blue-500":"bg-slate-300 dark:bg-slate-500"}`,style:{width:`${me}%`}})}),i.jsxs("span",{className:"text-xs text-slate-500 w-12 text-right",children:[E.gradedCount,"/",E.totalStudents]})]})}),i.jsx("td",{className:"p-3 text-right",children:Ge?i.jsxs("span",{className:"text-xs font-bold text-green-600 bg-green-50 dark:bg-green-900/30 px-2 py-1 rounded inline-flex items-center gap-1",children:[i.jsx(un,{className:"w-3 h-3"})," Verified"]}):i.jsxs("span",{className:"text-xs font-bold text-orange-500 bg-orange-50 dark:bg-orange-900/30 px-2 py-1 rounded inline-flex items-center gap-1",children:[i.jsx(Eo,{className:"w-3 h-3"})," Not Verified"]})})]},E.id)})})]})})]})]})]}),i.jsxs("div",{className:"flex items-center justify-between bg-gradient-to-r from-slate-100 to-white dark:from-slate-800 dark:to-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl p-3 mb-6 shadow-sm",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"bg-blue-100 dark:bg-blue-900/40 p-2 rounded-lg text-blue-600 dark:text-blue-400",children:i.jsx(Ov,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-bold text-slate-800 dark:text-white",children:"Public Student Portal"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text--[10px] md:text-xs",children:"Link for students to check results"})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>Mt(tt()),className:"p-2 text-slate-500 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-slate-800 rounded-lg transition-colors",title:"Copy Public Link",children:i.jsx(Co,{className:"w-5 h-5"})}),i.jsx("button",{onClick:()=>Cr("Check Results",tt()),className:"p-2 text-slate-500 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-slate-800 rounded-lg transition-colors",title:"Share Public Link",children:i.jsx(Sd,{className:"w-5 h-5"})})]})]}),m===1&&i.jsxs(i.Fragment,{children:[i.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4 px-1",children:"Class Manager"}),i.jsx(G,{className:"p-0 overflow-hidden min-h-[300px]",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left border-collapse",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-slate-50 dark:bg-slate-800 text-slate-500 dark:text-slate-400 text-xs uppercase font-bold",children:[i.jsx("th",{className:"p-4",children:"Class Name"}),i.jsx("th",{className:"p-4",children:"Teacher Name"}),i.jsx("th",{className:"p-4 text-center",children:"Students"}),i.jsx("th",{className:"p-4 text-right",children:"Action"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:h?i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"p-6 text-center text-slate-500",children:"Loading..."})}):c.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:4,className:"p-8 text-center text-slate-400",children:"No classes created yet. Use Step 1 to add a class."})}):c.map(E=>i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50 bg-white dark:bg-slate-900 transition-colors",children:[i.jsx("td",{className:"p-4 font-bold text-lg text-slate-800 dark:text-white",children:E.name}),i.jsx("td",{className:"p-4 text-slate-600 dark:text-slate-300",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(wr,{className:"w-3 h-3 text-slate-400"}),i.jsx("span",{className:"text-sm font-medium",children:E.teacherName||"Class Teacher"})]})}),i.jsx("td",{className:"p-4 text-center",children:i.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-bold bg-blue-50 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300",children:[i.jsx(fi,{className:"w-3 h-3"}),E.studentCount||0]})}),i.jsx("td",{className:"p-4 text-right",children:i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsxs("button",{onClick:()=>x({id:E.id,name:E.name}),className:"bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300 px-3 py-2 rounded-lg inline-flex items-center gap-2 transition-colors font-medium text-xs",title:"Reset Class Password",children:[i.jsx(Os,{className:"w-4 h-4"})," Reset Password"]}),i.jsxs("button",{onClick:()=>ne(E.id,E.name,E.studentCount||0),className:"bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/40 text-red-600 dark:text-red-400 px-3 py-2 rounded-lg inline-flex items-center gap-2 transition-colors font-medium text-xs",title:"Delete Class",children:[i.jsx(hi,{className:"w-4 h-4"})," Delete"]})]})})]},E.id))})]})})})]})]}):i.jsx("div",{className:"p-10 text-center",children:i.jsx(Ht,{className:"animate-spin w-8 h-8 mx-auto text-blue-500"})})},kb=({user:t})=>{const[e,r]=b.useState("result"),[s,n]=b.useState(null),[a,l]=b.useState([]),[o,c]=b.useState(null),[u,h]=b.useState(""),[d,m]=b.useState(!1),[g,v]=b.useState(null),[y,w]=b.useState(!1),[f,p]=b.useState(t);b.useEffect(()=>{p(t),x()},[t]);const x=async()=>{const P=await D.getMarks(t.id,"Term 1");n(P);const X=await D.getStudentRequests(t.id);l(X)},k=async()=>{if(!o)return;const P=await D.createProfileRequest(t.id,o.field,o.value);P.success?(alert("Request sent to class teacher for approval."),c(null),x()):alert("Failed: "+P.message)},N=async()=>{if(!u||u.length<4){alert("Password too short");return}const P=await D.changePassword(t.id,u);P.success?(alert("Password updated successfully!"),h("")):alert("Failed: "+P.message)},j=async()=>{w(!0),setTimeout(async()=>{const P="UPI"+Date.now(),X=await D.activateStudentPremium(t.id,P);w(!1),m(!1),X.success?(p({...f,isPremium:!0}),alert(" Payment Successful! You are now a Verified Student.")):alert("Payment Failed")},2500)},S=async P=>{if(!P.target.files||P.target.files.length===0)return;if(!f.isPremium){m(!0);return}const X=P.target.files[0],ue=await D.uploadImage(X,"students");ue.success&&ue.publicUrl&&(await D.createProfileRequest(t.id,"photoUrl",ue.publicUrl)).success&&alert("Photo uploaded! Waiting for Teacher approval.")},T=(P,X)=>{c({field:P,value:X})},W=P=>P==="fatherName"?"Father's Name":P==="motherName"?"Mother's Name":P==="dob"?"Date of Birth":P.charAt(0).toUpperCase()+P.slice(1);return i.jsxs("div",{className:"pb-20 space-y-6",children:[d&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-end md:items-center justify-center bg-black/60 p-4 backdrop-blur-sm animate-fade-in-up",children:i.jsx("div",{className:"bg-white dark:bg-slate-900 w-full max-w-sm rounded-t-2xl md:rounded-2xl shadow-2xl overflow-hidden",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex justify-between items-start mb-6",children:[i.jsxs("div",{children:[i.jsxs("h3",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(Vr,{className:"w-6 h-6 text-yellow-500 fill-yellow-500"}),"Premium Access"]}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Unlock Verified Badge & Features"})]}),i.jsx("button",{onClick:()=>m(!1),className:"p-1 hover:bg-slate-100 rounded-full",children:i.jsx(To,{className:"w-6 h-6 text-slate-400"})})]}),i.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-indigo-700 rounded-xl p-5 text-white mb-6 shadow-lg relative overflow-hidden",children:[i.jsxs("div",{className:"relative z-10",children:[i.jsx("p",{className:"text-blue-100 text-xs font-bold uppercase tracking-wider mb-1",children:"Total Amount"}),i.jsxs("h2",{className:"text-4xl font-black",children:["20",i.jsx("span",{className:"text-lg font-medium text-blue-200",children:".00"})]})]}),i.jsx(Vr,{className:"absolute -bottom-4 -right-4 w-32 h-32 text-white/10 rotate-12"})]}),i.jsxs("div",{className:"space-y-3 mb-6",children:[i.jsxs("button",{disabled:y,onClick:()=>{v("UPI"),j()},className:"w-full flex items-center justify-between p-4 border border-slate-200 dark:border-slate-700 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors group",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:i.jsx(Rm,{className:"w-6 h-6 text-green-600"})}),i.jsxs("div",{className:"text-left",children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-white",children:"UPI Apps"}),i.jsx("p",{className:"text-xs text-slate-500",children:"GPay, PhonePe, Paytm"})]})]}),y&&g==="UPI"?i.jsx(Ht,{className:"animate-spin w-5 h-5 text-blue-600"}):i.jsx(_d,{className:"w-5 h-5 text-slate-300 group-hover:text-blue-500"})]}),i.jsxs("button",{disabled:y,onClick:()=>{v("CARD"),j()},className:"w-full flex items-center justify-between p-4 border border-slate-200 dark:border-slate-700 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors group",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:i.jsx(qc,{className:"w-6 h-6 text-purple-600"})}),i.jsxs("div",{className:"text-left",children:[i.jsx("p",{className:"font-bold text-slate-800 dark:text-white",children:"Cards"}),i.jsx("p",{className:"text-xs text-slate-500",children:"Credit / Debit"})]})]}),y&&g==="CARD"?i.jsx(Ht,{className:"animate-spin w-5 h-5 text-blue-600"}):i.jsx(_d,{className:"w-5 h-5 text-slate-300 group-hover:text-blue-500"})]})]}),i.jsxs("p",{className:"text-[10px] text-center text-slate-400",children:["Secured by ",i.jsx("span",{className:"font-bold text-slate-500",children:"Cashfree Payments"})]})]})})}),i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[i.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[i.jsxs("div",{className:"relative shrink-0",children:[f.photoUrl?i.jsx("img",{src:f.photoUrl,className:`w-16 h-16 rounded-full object-cover border-4 ${f.isPremium?"border-blue-500":"border-slate-100"}`,alt:"profile"}):i.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center border-4 ${f.isPremium?"border-blue-500 bg-blue-50":"border-slate-100 bg-slate-100"}`,children:i.jsx(wr,{className:"w-8 h-8 text-slate-400"})}),f.isPremium&&i.jsx("div",{className:"absolute -bottom-1 -right-1 bg-blue-600 text-white rounded-full p-1 border-4 border-white dark:border-slate-800",title:"Verified Student",children:i.jsx(Dt,{className:"w-4 h-4"})})]}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-black text-slate-800 dark:text-white flex items-center gap-2",children:f.name}),i.jsxs("p",{className:"text-slate-500 dark:text-slate-400 font-medium",children:["Reg No: ",f.regNo]}),f.isPremium?i.jsxs("p",{className:"text-xs text-blue-600 font-bold flex items-center gap-1 mt-1",children:[i.jsx(Pm,{className:"w-3 h-3"})," Verified Student"]}):i.jsx("button",{onClick:()=>m(!0),className:"text-xs text-yellow-600 hover:text-yellow-700 font-bold flex items-center gap-1 mt-1 underline",children:"Get Verified Badge"})]})]}),i.jsxs("div",{className:"flex p-1 bg-slate-100 dark:bg-slate-700 rounded-lg w-full md:w-auto",children:[i.jsx("button",{onClick:()=>r("result"),className:`flex-1 md:flex-none px-4 py-2 rounded-md text-sm font-bold transition-all ${e==="result"?"bg-white dark:bg-slate-600 text-blue-600 shadow-sm":"text-slate-500 dark:text-slate-300"}`,children:"Result"}),i.jsx("button",{onClick:()=>r("profile"),className:`flex-1 md:flex-none px-4 py-2 rounded-md text-sm font-bold transition-all ${e==="profile"?"bg-white dark:bg-slate-600 text-blue-600 shadow-sm":"text-slate-500 dark:text-slate-300"}`,children:"Profile"}),i.jsx("button",{onClick:()=>r("security"),className:`flex-1 md:flex-none px-4 py-2 rounded-md text-sm font-bold transition-all ${e==="security"?"bg-white dark:bg-slate-600 text-blue-600 shadow-sm":"text-slate-500 dark:text-slate-300"}`,children:"Security"})]})]}),e==="result"&&i.jsx("div",{className:"animate-fade-in-up",children:s?i.jsxs(G,{className:"max-w-3xl mx-auto border-slate-200 dark:border-slate-700 relative overflow-hidden",children:[i.jsx("div",{className:"absolute top-0 right-0 -mt-10 -mr-10 w-40 h-40 bg-blue-500/5 rounded-full blur-3xl"}),i.jsx("div",{className:"absolute bottom-0 left-0 -mb-10 -ml-10 w-40 h-40 bg-purple-500/5 rounded-full blur-3xl"}),i.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b border-slate-100 dark:border-slate-700 relative z-10",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs text-slate-500 uppercase font-bold tracking-wider mb-1",children:"Academic Result"}),i.jsx("h3",{className:"font-bold text-xl text-slate-800 dark:text-white",children:"Term 1 Report"})]}),i.jsxs("div",{className:`flex flex-col items-end px-4 py-2 rounded-lg border ${s.grade==="F"?"bg-red-50 border-red-100 text-red-700":"bg-green-50 border-green-100 text-green-700"}`,children:[i.jsx("span",{className:"text-[10px] uppercase font-bold opacity-70",children:"Grade"}),i.jsx("span",{className:"text-2xl font-black leading-none",children:s.grade})]})]}),i.jsx("div",{className:"grid grid-cols-2 gap-4 mb-6 relative z-10",children:Object.entries(s.subjects).map(([P,X])=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-100 dark:border-slate-700/50 shadow-sm flex justify-between items-center",children:[i.jsx("span",{className:"font-bold text-slate-600 dark:text-slate-300 text-sm",children:P}),i.jsx("span",{className:"font-black text-lg text-slate-900 dark:text-white",children:X})]},P))}),i.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-slate-100 dark:border-slate-700 relative z-10",children:[i.jsxs("div",{className:"text-xs text-slate-400",children:["Generated on ",new Date().toLocaleDateString()]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase",children:"Grand Total"}),i.jsx("p",{className:"text-3xl font-black text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600",children:s.total})]})]})]}):i.jsxs("div",{className:"text-center py-20 bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm",children:[i.jsx("div",{className:"w-20 h-20 bg-slate-50 dark:bg-slate-700 rounded-full flex items-center justify-center mx-auto mb-4 animate-pulse",children:i.jsx(Eo,{className:"w-10 h-10 text-slate-300 dark:text-slate-500"})}),i.jsx("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-200",children:"Results Pending"}),i.jsx("p",{className:"text-slate-400 text-sm",children:"Your Term 1 marks have not been published yet."})]})}),e==="profile"&&i.jsxs("div",{className:"grid md:grid-cols-2 gap-6 animate-fade-in-up",children:[i.jsxs(G,{children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("h3",{className:"font-bold text-lg text-slate-800 dark:text-white flex items-center gap-2",children:[i.jsx(wr,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})," Personal Details"]}),f.isPremium&&i.jsx("span",{className:"bg-blue-100 text-blue-700 text-[10px] font-bold px-2 py-1 rounded-full border border-blue-200",children:"PRO UNLOCKED"})]}),i.jsx("div",{className:"mb-8 flex justify-center",children:i.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>!f.isPremium&&m(!0),children:[f.photoUrl?i.jsx("img",{src:f.photoUrl,className:`w-32 h-32 rounded-full object-cover border-4 shadow-xl ${f.isPremium?"border-blue-500 ring-4 ring-blue-50":"border-white"}`,alt:"profile"}):i.jsx("div",{className:`w-32 h-32 rounded-full flex items-center justify-center border-4 shadow-xl ${f.isPremium?"bg-blue-50 border-blue-500":"bg-slate-100 border-white"}`,children:i.jsx(wr,{className:"w-12 h-12 text-slate-300"})}),f.isPremium?i.jsx(i.Fragment,{children:i.jsxs("label",{className:"absolute bottom-0 right-0 bg-blue-600 text-white rounded-full p-2 shadow-lg cursor-pointer hover:bg-blue-700 transition-colors border-4 border-white dark:border-slate-800",children:[i.jsx(Fa,{className:"w-4 h-4"}),i.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:S})]})}):i.jsxs("div",{className:"absolute inset-0 bg-black/60 rounded-full flex flex-col items-center justify-center text-white backdrop-blur-[2px] transition-all group-hover:bg-black/70",children:[i.jsx(Bs,{className:"w-8 h-8 mb-1"}),i.jsx("span",{className:"text-xs font-bold",children:"Unlock 20"})]})]})}),!f.isPremium&&i.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 p-4 rounded-xl mb-6 border border-amber-200 dark:border-amber-800/50",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"bg-gradient-to-br from-amber-400 to-orange-500 text-white p-2 rounded-lg shadow-sm",children:i.jsx(Vr,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-bold text-amber-900 dark:text-amber-100 text-sm",children:"Stand Out from the Crowd!"}),i.jsxs("p",{className:"text-xs text-amber-800 dark:text-amber-200/70 mt-1 mb-3 leading-relaxed",children:["Upgrade to Student Pro to get a ",i.jsx("b",{children:"Verified Blue Tick"})," and upload your own ",i.jsx("b",{children:"Profile Photo"}),"."]}),i.jsxs("button",{onClick:()=>m(!0),className:"bg-slate-900 text-white text-xs font-bold px-4 py-2 rounded-lg shadow-lg hover:shadow-xl hover:bg-black transition-all flex items-center gap-2",children:["Unlock Now ",i.jsx("span",{className:"text-amber-400",children:"20"})]})]})]})}),i.jsx("div",{className:"space-y-3",children:[{key:"name",label:"Student Name",val:f.name},{key:"dob",label:"Date of Birth",val:f.dob},{key:"fatherName",label:"Father's Name",val:f.fatherName},{key:"motherName",label:"Mother's Name",val:f.motherName}].map(P=>i.jsxs("div",{className:"flex justify-between items-center p-3 hover:bg-slate-50 dark:hover:bg-slate-700/50 rounded-lg transition-colors group border border-transparent hover:border-slate-100 dark:hover:border-slate-700",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-0.5",children:P.label}),i.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200 text-sm",children:P.val||"-"})]}),i.jsx("button",{onClick:()=>T(P.key,P.val),className:"opacity-0 group-hover:opacity-100 p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-full transition-all",title:"Request Change",children:i.jsx(Po,{className:"w-4 h-4"})})]},P.key))})]}),i.jsxs("div",{className:"space-y-6",children:[o&&i.jsxs(G,{className:"border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-900/20 shadow-lg relative overflow-hidden",children:[i.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:i.jsx(Po,{className:"w-24 h-24 text-blue-600"})}),i.jsx("h4",{className:"font-bold text-blue-900 dark:text-blue-300 mb-2 relative z-10",children:"Request Change"}),i.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-400 mb-4 relative z-10",children:["You are requesting to change ",i.jsx("b",{children:W(o.field)}),". This will be reviewed by your class teacher."]}),i.jsxs("div",{className:"space-y-3 relative z-10",children:[i.jsx(J,{value:o.value,onChange:P=>c({...o,value:P.target.value}),autoFocus:!0,className:"bg-white/80 dark:bg-slate-900/80 backdrop-blur-sm"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(H,{onClick:k,className:"w-full shadow-lg shadow-blue-200 dark:shadow-none",children:"Send Request"}),i.jsx(H,{variant:"secondary",onClick:()=>c(null),children:"Cancel"})]})]})]}),i.jsxs(G,{children:[i.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-white mb-4",children:"Request History"}),i.jsx("div",{className:"space-y-3",children:a.length===0?i.jsx("p",{className:"text-sm text-slate-400 italic",children:"No active requests."}):a.map(P=>i.jsxs("div",{className:"p-3 bg-white dark:bg-slate-800 border border-slate-100 dark:border-slate-700 rounded-lg shadow-sm flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 font-medium",children:["Change ",W(P.field)]}),i.jsxs("p",{className:"font-bold text-slate-800 dark:text-slate-200 text-sm",children:["To: ",P.newValue]})]}),i.jsxs("div",{children:[P.status==="PENDING"&&i.jsxs("span",{className:"text-[10px] bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400 px-2 py-1 rounded font-bold flex items-center gap-1 uppercase tracking-wider",children:[i.jsx(Eo,{className:"w-3 h-3"})," Pending"]}),P.status==="APPROVED"&&i.jsxs("span",{className:"text-[10px] bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 px-2 py-1 rounded font-bold flex items-center gap-1 uppercase tracking-wider",children:[i.jsx(Dt,{className:"w-3 h-3"})," Approved"]}),P.status==="REJECTED"&&i.jsxs("span",{className:"text-[10px] bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 px-2 py-1 rounded font-bold flex items-center gap-1 uppercase tracking-wider",children:[i.jsx(To,{className:"w-3 h-3"})," Rejected"]})]})]},P.id))})]})]})]}),e==="security"&&i.jsx("div",{className:"animate-fade-in-up",children:i.jsxs(G,{className:"max-w-md mx-auto border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"p-3 bg-slate-100 dark:bg-slate-800 rounded-full text-slate-600 dark:text-slate-400",children:i.jsx(Bs,{className:"w-6 h-6"})}),i.jsx("h3",{className:"font-bold text-xl text-slate-800 dark:text-white",children:"Account Security"})]}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-6 leading-relaxed bg-slate-50 dark:bg-slate-800/50 p-3 rounded-lg border border-slate-100 dark:border-slate-700",children:"We recommend setting a strong password. If you forget it, your Class Teacher can reset it for you."}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 block mb-1",children:"New Password"}),i.jsx(J,{type:"password",placeholder:"Min 4 characters",value:u,onChange:P=>h(P.target.value)})]}),i.jsx(H,{onClick:N,className:"w-full",children:"Update Password"})]})]})})]})},_b=()=>{const[t,e]=b.useState([]),[r,s]=b.useState(!0),[n,a]=b.useState(""),[l,o]=b.useState("requests");b.useEffect(()=>{c()},[]);const c=async()=>{s(!0);const f=await D.getAllSchools();e(f),s(!1)},u=async(f,p)=>{if(!window.confirm(`Are you sure you want to PERMANENTLY DELETE "${p}" and all its data?`))return;const x=await D.deleteSchool(f);x.success?c():alert("Failed to delete: "+x.message)},h=async(f,p)=>{(await D.toggleSchoolStatus(f,p)).success?c():alert("Failed to update status")},d=async f=>{if(!window.confirm("Approve this upgrade request?"))return;const p=await D.approveUpgradeRequest(f);p.success?(alert("Approved successfully! License generated."),c()):alert("Failed: "+p.message)},m=async f=>{if(!window.confirm("Reject this request?"))return;const p=await D.rejectUpgradeRequest(f);p.success?c():alert("Failed: "+p.message)},g=t.filter(f=>{var p;return f.schoolName.toLowerCase().includes(n.toLowerCase())||((p=f.adminEmail)==null?void 0:p.toLowerCase().includes(n.toLowerCase()))}),v=t.filter(f=>f.paymentStatus==="PENDING"),y={total:t.length,pro:t.filter(f=>f.isPro).length,free:t.filter(f=>!f.isPro).length,pending:v.length},w=()=>window.location.href.split("#")[0].replace(/\/$/,"");return i.jsxs("div",{className:"pb-20 animate-fade-in-up",children:[i.jsxs("div",{className:"mb-8 flex justify-between items-end",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-2",children:"Master Control Panel"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Welcome, Owner. Manage all registered schools."})]}),i.jsxs(H,{onClick:c,variant:"secondary",className:"flex items-center gap-2",children:[i.jsx(Cm,{className:"w-4 h-4"})," Refresh"]})]}),i.jsxs("div",{className:"grid md:grid-cols-4 gap-6 mb-8",children:[i.jsxs(G,{className:"flex items-center gap-4 bg-yellow-50 dark:bg-yellow-900/20 border-yellow-100 dark:border-yellow-800 cursor-pointer hover:shadow-md",onClick:()=>o("requests"),children:[i.jsxs("div",{className:"p-3 bg-yellow-100 dark:bg-yellow-800 rounded-full text-yellow-600 dark:text-yellow-200 relative",children:[i.jsx(qc,{className:"w-6 h-6"}),y.pending>0&&i.jsxs("span",{className:"absolute -top-1 -right-1 flex h-3 w-3",children:[i.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),i.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-red-500"})]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Requests"}),i.jsx("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:y.pending})]})]}),i.jsxs(G,{className:"flex items-center gap-4 bg-blue-50 dark:bg-blue-900/20 border-blue-100 dark:border-blue-800 cursor-pointer hover:shadow-md",onClick:()=>o("all"),children:[i.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-800 rounded-full text-blue-600 dark:text-blue-200",children:i.jsx(zc,{className:"w-6 h-6"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Total Schools"}),i.jsx("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:y.total})]})]}),i.jsxs(G,{className:"flex items-center gap-4 bg-green-50 dark:bg-green-900/20 border-green-100 dark:border-green-800",children:[i.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-800 rounded-full text-green-600 dark:text-green-200",children:i.jsx(Vr,{className:"w-6 h-6"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Pro Licenses"}),i.jsx("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:y.pro})]})]}),i.jsxs(G,{className:"flex items-center gap-4 bg-slate-50 dark:bg-slate-800 border-slate-200 dark:border-slate-700",children:[i.jsx("div",{className:"p-3 bg-slate-200 dark:bg-slate-700 rounded-full text-slate-600 dark:text-slate-200",children:i.jsx(fi,{className:"w-6 h-6"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Free Tier"}),i.jsx("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:y.free})]})]})]}),i.jsxs("div",{className:"mb-8 p-4 bg-slate-100 dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Uv,{className:"w-5 h-5 text-slate-500"}),i.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-300 font-medium",children:"System Host URL Detected:"}),i.jsx("span",{className:"text-sm font-mono bg-white dark:bg-slate-900 px-2 py-1 rounded text-blue-600 dark:text-blue-400",children:w()})]}),i.jsx("div",{className:"text-xs text-slate-400",children:"Auto-detected from current browser location"})]}),i.jsxs("div",{className:"flex gap-4 mb-6 border-b border-slate-200 dark:border-slate-700",children:[i.jsxs("button",{onClick:()=>o("requests"),className:`pb-3 px-2 font-medium transition-colors ${l==="requests"?"text-blue-600 border-b-2 border-blue-600":"text-slate-500 hover:text-slate-700 dark:text-slate-400"}`,children:["License Requests ",y.pending>0&&`(${y.pending})`]}),i.jsx("button",{onClick:()=>o("all"),className:`pb-3 px-2 font-medium transition-colors ${l==="all"?"text-blue-600 border-b-2 border-blue-600":"text-slate-500 hover:text-slate-700 dark:text-slate-400"}`,children:"All Schools"})]}),l==="requests"?i.jsx("div",{className:"space-y-4",children:v.length===0?i.jsxs("div",{className:"text-center py-12 text-slate-500 dark:text-slate-400 bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsx(Dt,{className:"w-12 h-12 mx-auto mb-3 opacity-50 text-green-500"}),i.jsx("p",{children:"No pending license requests."})]}):i.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:v.map(f=>i.jsxs(G,{className:"border-l-4 border-l-yellow-500",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-lg text-slate-900 dark:text-white",children:f.schoolName}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:f.adminEmail}),f.phone&&i.jsxs("p",{className:"text-xs text-slate-400",children:[f.phone," | ",f.place]})]}),i.jsx("span",{className:"bg-yellow-100 dark:bg-yellow-900/40 text-yellow-700 dark:text-yellow-400 px-2 py-1 rounded text-xs font-bold",children:"PENDING"})]}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 p-3 rounded mb-4 border border-slate-200 dark:border-slate-700",children:[i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 uppercase tracking-wide mb-1",children:"Transaction Ref / UTR"}),i.jsx("p",{className:"font-mono font-bold text-slate-800 dark:text-slate-200 text-lg",children:f.transactionRef})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(H,{onClick:()=>d(f.id),className:"flex-1 bg-green-600 hover:bg-green-700 flex items-center justify-center gap-2",children:[i.jsx(Dt,{className:"w-4 h-4"})," Approve"]}),i.jsxs(H,{onClick:()=>m(f.id),variant:"secondary",className:"flex-1 text-red-500 hover:text-red-600 flex items-center justify-center gap-2",children:[i.jsx(To,{className:"w-4 h-4"})," Reject"]})]})]},f.id))})}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4",children:i.jsxs("div",{className:"relative w-full md:w-96",children:[i.jsx("input",{type:"text",placeholder:"Search school name or email...",className:"w-full pl-10 pr-4 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none transition-all",value:n,onChange:f=>a(f.target.value)}),i.jsx(Wc,{className:"w-4 h-4 text-slate-400 absolute left-3 top-3"})]})}),i.jsx(G,{className:"p-0 overflow-hidden border-slate-200 dark:border-slate-700",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-left border-collapse",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-slate-50 dark:bg-slate-800 text-slate-500 dark:text-slate-400 text-xs uppercase font-semibold",children:[i.jsx("th",{className:"p-4",children:"School Name"}),i.jsx("th",{className:"p-4",children:"Admin Email"}),i.jsx("th",{className:"p-4 text-center",children:"Plan"}),i.jsx("th",{className:"p-4",children:"Joined Date"}),i.jsx("th",{className:"p-4 text-right",children:"Actions"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:r?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-8 text-center text-slate-500",children:"Loading data..."})}):g.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"p-8 text-center text-slate-500",children:"No schools found matching search."})}):g.map(f=>i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors bg-white dark:bg-slate-900",children:[i.jsx("td",{className:"p-4 font-medium text-slate-900 dark:text-white",children:f.schoolName}),i.jsx("td",{className:"p-4 text-slate-600 dark:text-slate-300 text-sm",children:f.adminEmail}),i.jsx("td",{className:"p-4 text-center",children:f.isPro?i.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-bold bg-yellow-100 dark:bg-yellow-900/40 text-yellow-700 dark:text-yellow-400 border border-yellow-200 dark:border-yellow-800",children:[i.jsx(Vr,{className:"w-3 h-3"})," PRO"]}):i.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-bold bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300 border border-slate-200 dark:border-slate-600",children:"FREE"})}),i.jsx("td",{className:"p-4 text-slate-500 dark:text-slate-400 text-sm",children:new Date(f.createdAt||"").toLocaleDateString()}),i.jsx("td",{className:"p-4 text-right",children:i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx("button",{onClick:()=>h(f.id,f.isPro),className:"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg transition-colors",title:f.isPro?"Downgrade to Free":"Upgrade to Pro",children:i.jsx(Tm,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>u(f.id,f.schoolName),className:"p-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors",title:"Delete School",children:i.jsx(hi,{className:"w-4 h-4"})})]})})]},f.id))})]})})})]})]})},jb=()=>{var m;const t=Zt(),[e,r]=b.useState(""),[s,n]=b.useState(""),[a,l]=b.useState(null),[o,c]=b.useState(!1),[u,h]=b.useState(""),d=async g=>{g.preventDefault(),c(!0),h(""),l(null);const v=await D.publicSearch(e,s);if(v){const y=await D.getSchoolConfig();l({...v,schoolConfig:y})}else h("Result not found. Please check Register Number and DOB.");c(!1)};return i.jsxs("div",{className:"flex flex-col items-center pt-8 md:pt-16 pb-20 px-4",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-white mb-2 text-center tracking-tight print:hidden",children:"Result Portal"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8 text-center text-sm print:hidden",children:"Enter your details to view your academic performance"}),a?i.jsx("div",{className:"w-full max-w-lg animate-fade-in-up",children:i.jsxs(G,{className:"relative overflow-hidden border-slate-200 dark:border-slate-700 shadow-xl print:shadow-none print:border-none",children:[i.jsx("div",{className:"absolute top-0 left-0 right-0 h-2 bg-gradient-to-r from-blue-500 to-purple-600 print:hidden"}),i.jsxs("div",{className:"text-center mb-8 mt-4",children:[i.jsx("div",{className:"w-16 h-16 bg-slate-50 dark:bg-slate-700 rounded-full mx-auto mb-4 flex items-center justify-center border border-slate-200 dark:border-slate-600 shadow-inner",children:i.jsx(Nv,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),i.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-1",children:a.student.name}),i.jsxs("p",{className:"text-slate-500 dark:text-slate-400 font-mono text-sm bg-slate-100 dark:bg-slate-800 inline-block px-3 py-1 rounded-full",children:["Reg No: ",a.student.regNo]}),((m=a.schoolConfig)==null?void 0:m.examName)&&i.jsx("p",{className:"text-sm font-bold text-blue-600 mt-2",children:a.schoolConfig.examName}),i.jsx("div",{className:"mt-4 flex justify-center",children:i.jsxs("span",{className:`inline-flex items-center px-4 py-1 rounded-full text-sm font-bold border shadow-sm ${a.marks.grade==="F"?"bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-400 border-red-200 dark:border-red-800":"bg-green-50 dark:bg-green-900/30 text-green-700 dark:text-green-400 border-green-200 dark:border-green-800"}`,children:["Overall Grade: ",a.marks.grade]})})]}),i.jsxs("div",{className:"mb-8 border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:[i.jsxs("div",{className:"grid grid-cols-2 bg-slate-50 dark:bg-slate-800 p-2 border-b border-slate-200 dark:border-slate-700 text-xs uppercase font-semibold text-slate-500 dark:text-slate-400",children:[i.jsx("div",{className:"pl-2",children:"Subject"}),i.jsx("div",{className:"text-right pr-2",children:"Marks Secured"})]}),Object.entries(a.marks.subjects).map(([g,v],y)=>i.jsxs("div",{className:`flex justify-between items-center p-3.5 border-b border-slate-100 dark:border-slate-700/50 last:border-0 ${y%2===0?"bg-white dark:bg-slate-900":"bg-slate-50/50 dark:bg-slate-800/50"}`,children:[i.jsx("span",{className:"text-slate-700 dark:text-slate-300 font-medium",children:g}),i.jsx("span",{className:"text-slate-900 dark:text-white font-bold font-mono",children:v})]},g)),i.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-100 dark:bg-slate-700 font-bold border-t border-slate-200 dark:border-slate-600",children:[i.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:"Grand Total"}),i.jsx("span",{className:"text-slate-900 dark:text-white text-lg",children:a.marks.total})]})]}),i.jsxs("div",{className:"flex gap-4 print:hidden",children:[i.jsxs(H,{variant:"secondary",className:"flex-1 flex justify-center items-center gap-2",onClick:()=>l(null),children:[i.jsx(Pv,{className:"w-4 h-4"})," Back"]}),i.jsxs(H,{className:"flex-1 flex justify-center items-center gap-2 shadow-lg shadow-blue-200 dark:shadow-none",onClick:()=>window.print(),children:[i.jsx(Rv,{className:"w-4 h-4"})," Print"]})]}),i.jsx("div",{className:"mt-8 pt-6 border-t border-slate-100 dark:border-slate-700 text-center print:block hidden",children:i.jsx("p",{className:"text-xs text-slate-400 mb-1",children:"Generated by SchoolResult Pro"})}),i.jsxs("div",{className:"mt-8 pt-4 border-t border-slate-100 dark:border-slate-700 text-center print:hidden bg-blue-50/50 dark:bg-blue-900/10 rounded-lg p-3",children:[i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Powered by"}),i.jsxs("button",{onClick:()=>t("/"),className:"text-sm font-bold text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 flex items-center justify-center gap-2 mx-auto transition-colors",children:[i.jsx(Vc,{className:"w-4 h-4"})," SchoolResult Pro"]}),i.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"Create your own school result portal for free"})]})]})}):i.jsx(G,{className:"w-full max-w-md shadow-lg border-slate-200 dark:border-slate-700 animate-fade-in-up",children:i.jsxs("form",{onSubmit:d,className:"space-y-5",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-blue-100 dark:bg-blue-900/30 mb-4",children:i.jsx(Wc,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),i.jsx("h2",{className:"text-lg font-semibold text-slate-700 dark:text-slate-200",children:"Student Search"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-slate-700 dark:text-slate-300 font-medium text-sm mb-1 block",children:"Register Number"}),i.jsx(J,{placeholder:"e.g. 1001",value:e,onChange:g=>r(g.target.value),required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-slate-700 dark:text-slate-300 font-medium text-sm mb-1 block",children:"Date of Birth"}),i.jsx(J,{type:"date",value:s,onChange:g=>n(g.target.value),required:!0})]}),u&&i.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 text-sm p-3 rounded-lg text-center border border-red-100 dark:border-red-800 flex items-center justify-center gap-2",children:[i.jsx("span",{className:"font-bold",children:"Error:"})," ",u]}),i.jsx(H,{type:"submit",className:"w-full flex justify-center items-center gap-2",disabled:o,children:o?"Searching...":"Get Result"})]})})]})},Sb=()=>{const[t]=kv(),e=Zt(),r=t.get("schoolId"),s=t.get("token"),[n,a]=b.useState(""),[l,o]=b.useState(""),[c,u]=b.useState([]),[h,d]=b.useState(!0),[m,g]=b.useState(!1),[v,y]=b.useState(!1),[w,f]=b.useState(!1),[p,x]=b.useState({name:"",regNo:"",classId:"",dob:"",gender:"",fatherName:"",motherName:""});b.useEffect(()=>{if(!r&&!s){d(!1);return}k()},[r,s]);const k=async()=>{let j=r;if(s){const T=await D.getSchoolByAdmissionToken(s);if(T){if(j=T.id,T.allow_public_admission===!1){f(!0),a(T.name),d(!1);return}}else{d(!1);return}}if(!j){d(!1);return}const S=await D.getSchoolDetailsPublic(j);if(S){o(j),a(S.name);const T=await D.getClassesForPublic(j);u(T)}d(!1)},N=async j=>{if(j.preventDefault(),!l)return;g(!0);const S=await D.publicRegisterStudent(l,p.classId,p);g(!1),S.success?y(!0):alert("Registration failed: "+S.message)};return w?i.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] text-center p-4",children:[i.jsx(Bs,{className:"w-16 h-16 text-slate-300 dark:text-slate-600 mb-4"}),i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white",children:n}),i.jsx("h3",{className:"text-lg font-semibold text-red-500 mt-2",children:"Admissions Closed"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2 max-w-sm",children:"Public registration is currently disabled by the school administrator. Please contact the school office."}),i.jsx(H,{onClick:()=>e("/login"),className:"mt-8",children:"Go to Login"})]}):!h&&!l?i.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] text-center p-4",children:[i.jsx(No,{className:"w-12 h-12 text-yellow-500 mb-4"}),i.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white",children:"Invalid or Expired Link"}),i.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:["This registration link is no longer valid.",i.jsx("br",{}),"Please ask your school admin for a new link."]})]}):h?i.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh]",children:[i.jsx(Ht,{className:"w-8 h-8 animate-spin text-blue-600 mb-2"}),i.jsx("p",{className:"text-slate-500",children:"Loading School Details..."})]}):v?i.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] text-center p-4 animate-fade-in-up",children:[i.jsx("div",{className:"w-20 h-20 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mb-6",children:i.jsx(Dt,{className:"w-10 h-10 text-green-600 dark:text-green-400"})}),i.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-2",children:"Registration Submitted!"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-md mx-auto mb-8",children:"Your details have been sent to the Class Teacher. Once verified, you will be able to login using your Register Number."}),i.jsx(H,{onClick:()=>e("/login"),children:"Go to Login"})]}):i.jsx("div",{className:"flex justify-center p-4 py-10",children:i.jsxs(G,{className:"w-full max-w-2xl border-t-4 border-t-blue-600 dark:border-t-blue-500",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"inline-flex p-3 bg-blue-50 dark:bg-blue-900/20 rounded-full mb-3 text-blue-600 dark:text-blue-400",children:i.jsx(Lv,{className:"w-8 h-8"})}),i.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:n}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Student Admission Form"})]}),i.jsxs("form",{onSubmit:N,className:"space-y-6",children:[i.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 block mb-1",children:"Student Name"}),i.jsx(J,{placeholder:"Full Name",value:p.name,onChange:j=>x({...p,name:j.target.value.toUpperCase()}),required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 block mb-1",children:"Register No / Admission No"}),i.jsx(J,{placeholder:"e.g. 1024",value:p.regNo,onChange:j=>x({...p,regNo:j.target.value}),required:!0})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 block mb-1",children:"Date of Birth"}),i.jsx(J,{type:"date",value:p.dob,onChange:j=>x({...p,dob:j.target.value}),required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 block mb-1",children:"Gender"}),i.jsxs(qr,{value:p.gender,onChange:j=>x({...p,gender:j.target.value}),required:!0,children:[i.jsx("option",{value:"",children:"Select"}),i.jsx("option",{value:"Male",children:"Male"}),i.jsx("option",{value:"Female",children:"Female"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 block mb-1",children:"Select Class"}),i.jsxs(qr,{value:p.classId,onChange:j=>x({...p,classId:j.target.value}),required:!0,children:[i.jsx("option",{value:"",children:"-- Choose Class --"}),c.map(j=>i.jsx("option",{value:j.id,children:j.name},j.id))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 block mb-1",children:"Father's Name"}),i.jsx(J,{placeholder:"Father/Guardian Name",value:p.fatherName,onChange:j=>x({...p,fatherName:j.target.value}),required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 block mb-1",children:"Mother's Name"}),i.jsx(J,{placeholder:"Mother's Name",value:p.motherName,onChange:j=>x({...p,motherName:j.target.value}),required:!0})]})]}),i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg flex items-start gap-3",children:[i.jsx("div",{className:"mt-0.5 text-blue-600 dark:text-blue-400",children:i.jsx(Om,{className:"w-5 h-5"})}),i.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-300",children:"By submitting this form, you request admission to the class. Your teacher will verify these details before you can access the result portal."})]}),i.jsx(H,{type:"submit",disabled:m,className:"w-full text-lg py-3",children:m?"Submitting...":"Submit Registration"})]})]})})},Nb=()=>{const{slug:t}=Gx(),e=Zt(),[r,s]=b.useState(""),[n,a]=b.useState("");b.useEffect(()=>{t&&l(t)},[t]);const l=async o=>{const c=await D.getSchoolBySlug(o);c?(a(c.name),localStorage.setItem("school_id",c.id),setTimeout(()=>{e("/login",{replace:!0})},800)):s(`School with code "${o}" not found.`)};return r?i.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-50 dark:bg-slate-900 p-4",children:i.jsxs(G,{className:"max-w-md w-full text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(jm,{className:"w-8 h-8 text-red-600 dark:text-red-400"})}),i.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white mb-2",children:"Portal Not Found"}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:r}),i.jsx(H,{onClick:()=>e("/login"),className:"w-full",children:"Go to Main Login"})]})}):i.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-slate-50 dark:bg-slate-900 p-4",children:i.jsxs("div",{className:"text-center animate-fade-in-up",children:[i.jsx("div",{className:"w-20 h-20 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center mx-auto mb-6",children:i.jsx(zc,{className:"w-10 h-10 text-blue-600 dark:text-blue-400"})}),n?i.jsxs(i.Fragment,{children:[i.jsxs("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:["Welcome to ",n]}),i.jsxs("div",{className:"flex items-center justify-center gap-2 text-slate-500 dark:text-slate-400",children:[i.jsx(Ht,{className:"w-4 h-4 animate-spin"}),i.jsx("span",{children:"Redirecting to login..."})]})]}):i.jsxs("div",{className:"flex items-center gap-3 text-slate-500 dark:text-slate-400",children:[i.jsx(Ht,{className:"w-6 h-6 animate-spin text-blue-600"}),i.jsx("span",{className:"text-lg",children:"Locating School Portal..."})]})]})})},Eb=({children:t,user:e,role:r,onLogout:s,theme:n,toggleTheme:a})=>{const[l,o]=b.useState(null),[c,u]=b.useState("blue");b.useEffect(()=>{const d=localStorage.getItem("school_logo"),m=localStorage.getItem("school_theme");d&&o(d),m&&u(m),e&&e.logoUrl&&o(e.logoUrl),e&&e.schoolLogoUrl&&o(e.schoolLogoUrl)},[e]),b.useEffect(()=>{const d=()=>{const m=localStorage.getItem("school_logo"),g=localStorage.getItem("school_theme");m&&o(m),g&&u(g)};return window.addEventListener("storage",d),()=>window.removeEventListener("storage",d)},[]);const h=()=>{switch(c){case"purple":return"bg-purple-600";case"green":return"bg-green-600";case"orange":return"bg-orange-600";case"red":return"bg-red-600";default:return"bg-blue-600"}};return i.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 font-sans text-slate-900 dark:text-slate-100 transition-colors duration-200",children:[i.jsx("nav",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 sticky top-0 z-50 transition-colors duration-200",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex justify-between h-16",children:[i.jsx("div",{className:"flex items-center",children:i.jsxs(gl,{to:"/",className:"flex-shrink-0 flex items-center gap-2",children:[l?i.jsx("img",{src:l,alt:"Logo",className:"w-10 h-10 rounded-lg object-contain bg-white border border-slate-200 p-0.5"}):i.jsx("div",{className:`${h()} text-white p-1.5 rounded-lg`,children:i.jsx(Vc,{className:"w-6 h-6"})}),i.jsx("span",{className:"font-bold text-xl text-slate-800 dark:text-white tracking-tight hidden md:block",children:(e==null?void 0:e.schoolName)||"SchoolResult Pro"}),i.jsx("span",{className:"font-bold text-lg text-slate-800 dark:text-white tracking-tight md:hidden",children:e!=null&&e.schoolName?e.schoolName.length>15?e.schoolName.substring(0,12)+"...":e.schoolName:"SchoolResult"})]})}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("button",{onClick:a,className:"p-2 text-slate-500 hover:text-blue-600 dark:text-slate-400 dark:hover:text-blue-400 transition-colors rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",title:"Toggle Theme",children:n==="dark"?i.jsx($v,{className:"w-5 h-5"}):i.jsx(Iv,{className:"w-5 h-5"})}),e?i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400 hidden md:block",children:r===K.SUPER_ADMIN?"Platform Owner":r===K.ADMIN?"Administrator":r===K.TEACHER?`Teacher (${e.name})`:e.name}),i.jsx("button",{onClick:s,className:"text-slate-500 hover:text-red-600 dark:text-slate-400 dark:hover:text-red-400 transition-colors",children:i.jsx(Av,{className:"w-5 h-5"})})]}):i.jsxs("div",{className:"hidden md:flex gap-4 text-sm font-medium text-slate-600 dark:text-slate-300",children:[i.jsx(gl,{to:"/login",className:"hover:text-blue-600 dark:hover:text-blue-400",children:"Login"}),i.jsx(gl,{to:"/result",className:"hover:text-blue-600 dark:hover:text-blue-400",children:"Results"})]})]})]})})}),i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:t})]})},Cb=()=>{const[t,e]=b.useState(null),[r,s]=b.useState(null),[n,a]=b.useState(!0),[l,o]=b.useState(localStorage.getItem("theme")||"light");b.useEffect(()=>{const d=window.location.href;let m=null;if(d.includes("cfg=")){const g=d.match(/[?&]cfg=([^&#]*)/);g&&(m=g[1])}if(m)try{const g=atob(decodeURIComponent(m)),{u:v,k:y,s:w}=JSON.parse(g);if(v&&y){localStorage.setItem("sb_url",v),localStorage.setItem("sb_key",y),w&&localStorage.setItem("school_id",w);const f=window.location.href.replace(/[?&]cfg=[^&#]*/,"");window.history.replaceState({},document.title,f),window.location.reload();return}}catch(g){console.error("Invalid Magic Link",g)}setTimeout(()=>a(!1),1e3)},[]),b.useEffect(()=>{l==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("theme",l)},[l]);const c=()=>{o(d=>d==="light"?"dark":"light")},u=(d,m)=>{s(d),e(m),(m.logoUrl||m.schoolLogoUrl)&&localStorage.setItem("school_logo",m.logoUrl||m.schoolLogoUrl),(m.themeColor||m.schoolThemeColor)&&localStorage.setItem("school_theme",m.themeColor||m.schoolThemeColor)},h=()=>{s(null),e(null),window.location.hash="#/login"};return n?i.jsx(_v,{}):i.jsx(vv,{children:i.jsx(Eb,{user:t,role:r,onLogout:h,theme:l,toggleTheme:c,children:i.jsxs(uv,{children:[i.jsx(bt,{path:"/",element:i.jsx(Bv,{})}),i.jsx(bt,{path:"/setup",element:i.jsx(vb,{})}),i.jsx(bt,{path:"/login",element:i.jsx(yb,{onLogin:u})}),i.jsx(bt,{path:"/result",element:i.jsx(jb,{})}),i.jsx(bt,{path:"/register",element:i.jsx(Sb,{})}),i.jsx(bt,{path:"/portal/:slug",element:i.jsx(Nb,{})}),i.jsx(bt,{path:"/dashboard/teacher",element:r===K.TEACHER&&t?i.jsx(wb,{user:t}):i.jsx(xa,{to:"/login"})}),i.jsx(bt,{path:"/dashboard/admin",element:r===K.ADMIN?i.jsx(bb,{}):i.jsx(xa,{to:"/login"})}),i.jsx(bt,{path:"/dashboard/superadmin",element:r===K.SUPER_ADMIN?i.jsx(_b,{}):i.jsx(xa,{to:"/login"})}),i.jsx(bt,{path:"/dashboard/student",element:r===K.STUDENT&&t?i.jsx(kb,{user:t}):i.jsx(xa,{to:"/login"})})]})})})},Fp=document.getElementById("root");if(!Fp)throw new Error("Could not find root element to mount to");const Pb=Cl.createRoot(Fp);Pb.render(i.jsx(dh.StrictMode,{children:i.jsx(Cb,{})}));
